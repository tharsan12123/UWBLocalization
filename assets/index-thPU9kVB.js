var vv=Object.defineProperty;var bv=(t,e,n)=>e in t?vv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var W=(t,e,n)=>bv(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function wv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jg={exports:{}},ya={},Pg={exports:{}},U={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eo=Symbol.for("react.element"),Sv=Symbol.for("react.portal"),kv=Symbol.for("react.fragment"),Cv=Symbol.for("react.strict_mode"),Ev=Symbol.for("react.profiler"),Nv=Symbol.for("react.provider"),Tv=Symbol.for("react.context"),Iv=Symbol.for("react.forward_ref"),Mv=Symbol.for("react.suspense"),Av=Symbol.for("react.memo"),jv=Symbol.for("react.lazy"),lf=Symbol.iterator;function Pv(t){return t===null||typeof t!="object"?null:(t=lf&&t[lf]||t["@@iterator"],typeof t=="function"?t:null)}var Rg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Dg=Object.assign,Og={};function ws(t,e,n){this.props=t,this.context=e,this.refs=Og,this.updater=n||Rg}ws.prototype.isReactComponent={};ws.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ws.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Lg(){}Lg.prototype=ws.prototype;function md(t,e,n){this.props=t,this.context=e,this.refs=Og,this.updater=n||Rg}var gd=md.prototype=new Lg;gd.constructor=md;Dg(gd,ws.prototype);gd.isPureReactComponent=!0;var af=Array.isArray,Fg=Object.prototype.hasOwnProperty,yd={current:null},zg={key:!0,ref:!0,__self:!0,__source:!0};function Wg(t,e,n){var i,s={},r=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)Fg.call(e,i)&&!zg.hasOwnProperty(i)&&(s[i]=e[i]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}if(t&&t.defaultProps)for(i in l=t.defaultProps,l)s[i]===void 0&&(s[i]=l[i]);return{$$typeof:eo,type:t,key:r,ref:o,props:s,_owner:yd.current}}function Rv(t,e){return{$$typeof:eo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function xd(t){return typeof t=="object"&&t!==null&&t.$$typeof===eo}function Dv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var cf=/\/+/g;function Ja(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Dv(""+t.key):e.toString(36)}function tl(t,e,n,i,s){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case eo:case Sv:o=!0}}if(o)return o=t,s=s(o),t=i===""?"."+Ja(o,0):i,af(s)?(n="",t!=null&&(n=t.replace(cf,"$&/")+"/"),tl(s,e,n,"",function(c){return c})):s!=null&&(xd(s)&&(s=Rv(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(cf,"$&/")+"/")+t)),e.push(s)),1;if(o=0,i=i===""?".":i+":",af(t))for(var l=0;l<t.length;l++){r=t[l];var a=i+Ja(r,l);o+=tl(r,e,n,a,s)}else if(a=Pv(t),typeof a=="function")for(t=a.call(t),l=0;!(r=t.next()).done;)r=r.value,a=i+Ja(r,l++),o+=tl(r,e,n,a,s);else if(r==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function vo(t,e,n){if(t==null)return t;var i=[],s=0;return tl(t,i,"","",function(r){return e.call(n,r,s++)}),i}function Ov(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xe={current:null},nl={transition:null},Lv={ReactCurrentDispatcher:Xe,ReactCurrentBatchConfig:nl,ReactCurrentOwner:yd};function Bg(){throw Error("act(...) is not supported in production builds of React.")}U.Children={map:vo,forEach:function(t,e,n){vo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return vo(t,function(){e++}),e},toArray:function(t){return vo(t,function(e){return e})||[]},only:function(t){if(!xd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};U.Component=ws;U.Fragment=kv;U.Profiler=Ev;U.PureComponent=md;U.StrictMode=Cv;U.Suspense=Mv;U.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lv;U.act=Bg;U.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Dg({},t.props),s=t.key,r=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=yd.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)Fg.call(e,a)&&!zg.hasOwnProperty(a)&&(i[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:eo,type:t.type,key:s,ref:r,props:i,_owner:o}};U.createContext=function(t){return t={$$typeof:Tv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Nv,_context:t},t.Consumer=t};U.createElement=Wg;U.createFactory=function(t){var e=Wg.bind(null,t);return e.type=t,e};U.createRef=function(){return{current:null}};U.forwardRef=function(t){return{$$typeof:Iv,render:t}};U.isValidElement=xd;U.lazy=function(t){return{$$typeof:jv,_payload:{_status:-1,_result:t},_init:Ov}};U.memo=function(t,e){return{$$typeof:Av,type:t,compare:e===void 0?null:e}};U.startTransition=function(t){var e=nl.transition;nl.transition={};try{t()}finally{nl.transition=e}};U.unstable_act=Bg;U.useCallback=function(t,e){return Xe.current.useCallback(t,e)};U.useContext=function(t){return Xe.current.useContext(t)};U.useDebugValue=function(){};U.useDeferredValue=function(t){return Xe.current.useDeferredValue(t)};U.useEffect=function(t,e){return Xe.current.useEffect(t,e)};U.useId=function(){return Xe.current.useId()};U.useImperativeHandle=function(t,e,n){return Xe.current.useImperativeHandle(t,e,n)};U.useInsertionEffect=function(t,e){return Xe.current.useInsertionEffect(t,e)};U.useLayoutEffect=function(t,e){return Xe.current.useLayoutEffect(t,e)};U.useMemo=function(t,e){return Xe.current.useMemo(t,e)};U.useReducer=function(t,e,n){return Xe.current.useReducer(t,e,n)};U.useRef=function(t){return Xe.current.useRef(t)};U.useState=function(t){return Xe.current.useState(t)};U.useSyncExternalStore=function(t,e,n){return Xe.current.useSyncExternalStore(t,e,n)};U.useTransition=function(){return Xe.current.useTransition()};U.version="18.3.1";Pg.exports=U;var N=Pg.exports;const Hg=wv(N);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fv=N,zv=Symbol.for("react.element"),Wv=Symbol.for("react.fragment"),Bv=Object.prototype.hasOwnProperty,Hv=Fv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$v={key:!0,ref:!0,__self:!0,__source:!0};function $g(t,e,n){var i,s={},r=null,o=null;n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)Bv.call(e,i)&&!$v.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:zv,type:t,key:r,ref:o,props:s,_owner:Hv.current}}ya.Fragment=Wv;ya.jsx=$g;ya.jsxs=$g;jg.exports=ya;var u=jg.exports,Ug={exports:{}},pt={},Vg={exports:{}},Yg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,L){var z=P.length;P.push(L);e:for(;0<z;){var ne=z-1>>>1,oe=P[ne];if(0<s(oe,L))P[ne]=L,P[z]=oe,z=ne;else break e}}function n(P){return P.length===0?null:P[0]}function i(P){if(P.length===0)return null;var L=P[0],z=P.pop();if(z!==L){P[0]=z;e:for(var ne=0,oe=P.length,Ht=oe>>>1;ne<Ht;){var Ve=2*(ne+1)-1,Zt=P[Ve],Ye=Ve+1,_o=P[Ye];if(0>s(Zt,z))Ye<oe&&0>s(_o,Zt)?(P[ne]=_o,P[Ye]=z,ne=Ye):(P[ne]=Zt,P[Ve]=z,ne=Ve);else if(Ye<oe&&0>s(_o,z))P[ne]=_o,P[Ye]=z,ne=Ye;else break e}}return L}function s(P,L){var z=P.sortIndex-L.sortIndex;return z!==0?z:P.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],c=[],d=1,h=null,f=3,p=!1,m=!1,x=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(P){for(var L=n(c);L!==null;){if(L.callback===null)i(c);else if(L.startTime<=P)i(c),L.sortIndex=L.expirationTime,e(a,L);else break;L=n(c)}}function b(P){if(x=!1,_(P),!m)if(n(a)!==null)m=!0,de(w);else{var L=n(c);L!==null&&Re(b,L.startTime-P)}}function w(P,L){m=!1,x&&(x=!1,g(E),E=-1),p=!0;var z=f;try{for(_(L),h=n(a);h!==null&&(!(h.expirationTime>L)||P&&!C());){var ne=h.callback;if(typeof ne=="function"){h.callback=null,f=h.priorityLevel;var oe=ne(h.expirationTime<=L);L=t.unstable_now(),typeof oe=="function"?h.callback=oe:h===n(a)&&i(a),_(L)}else i(a);h=n(a)}if(h!==null)var Ht=!0;else{var Ve=n(c);Ve!==null&&Re(b,Ve.startTime-L),Ht=!1}return Ht}finally{h=null,f=z,p=!1}}var k=!1,S=null,E=-1,j=5,A=-1;function C(){return!(t.unstable_now()-A<j)}function T(){if(S!==null){var P=t.unstable_now();A=P;var L=!0;try{L=S(!0,P)}finally{L?R():(k=!1,S=null)}}else k=!1}var R;if(typeof y=="function")R=function(){y(T)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,te=F.port2;F.port1.onmessage=T,R=function(){te.postMessage(null)}}else R=function(){v(T,0)};function de(P){S=P,k||(k=!0,R())}function Re(P,L){E=v(function(){P(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,de(w))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(P){switch(f){case 1:case 2:case 3:var L=3;break;default:L=f}var z=f;f=L;try{return P()}finally{f=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,L){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var z=f;f=P;try{return L()}finally{f=z}},t.unstable_scheduleCallback=function(P,L,z){var ne=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?ne+z:ne):z=ne,P){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=z+oe,P={id:d++,callback:L,priorityLevel:P,startTime:z,expirationTime:oe,sortIndex:-1},z>ne?(P.sortIndex=z,e(c,P),n(a)===null&&P===n(c)&&(x?(g(E),E=-1):x=!0,Re(b,z-ne))):(P.sortIndex=oe,e(a,P),m||p||(m=!0,de(w))),P},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(P){var L=f;return function(){var z=f;f=L;try{return P.apply(this,arguments)}finally{f=z}}}})(Yg);Vg.exports=Yg;var Uv=Vg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv=N,ft=Uv;function I(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Kg=new Set,Sr={};function Ni(t,e){ls(t,e),ls(t+"Capture",e)}function ls(t,e){for(Sr[t]=e,t=0;t<e.length;t++)Kg.add(e[t])}var dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yc=Object.prototype.hasOwnProperty,Yv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uf={},df={};function Kv(t){return Yc.call(df,t)?!0:Yc.call(uf,t)?!1:Yv.test(t)?df[t]=!0:(uf[t]=!0,!1)}function Gv(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function qv(t,e,n,i){if(e===null||typeof e>"u"||Gv(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ze(t,e,n,i,s,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var Pe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pe[t]=new Ze(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pe[e]=new Ze(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pe[t]=new Ze(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pe[t]=new Ze(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pe[t]=new Ze(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pe[t]=new Ze(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pe[t]=new Ze(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pe[t]=new Ze(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pe[t]=new Ze(t,5,!1,t.toLowerCase(),null,!1,!1)});var _d=/[\-:]([a-z])/g;function vd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(_d,vd);Pe[e]=new Ze(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(_d,vd);Pe[e]=new Ze(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(_d,vd);Pe[e]=new Ze(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pe[t]=new Ze(t,1,!1,t.toLowerCase(),null,!1,!1)});Pe.xlinkHref=new Ze("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pe[t]=new Ze(t,1,!1,t.toLowerCase(),null,!0,!0)});function bd(t,e,n,i){var s=Pe.hasOwnProperty(e)?Pe[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qv(e,n,s,i)&&(n=null),i||s===null?Kv(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var xn=Vv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bo=Symbol.for("react.element"),Di=Symbol.for("react.portal"),Oi=Symbol.for("react.fragment"),wd=Symbol.for("react.strict_mode"),Kc=Symbol.for("react.profiler"),Gg=Symbol.for("react.provider"),qg=Symbol.for("react.context"),Sd=Symbol.for("react.forward_ref"),Gc=Symbol.for("react.suspense"),qc=Symbol.for("react.suspense_list"),kd=Symbol.for("react.memo"),Sn=Symbol.for("react.lazy"),Qg=Symbol.for("react.offscreen"),hf=Symbol.iterator;function Ms(t){return t===null||typeof t!="object"?null:(t=hf&&t[hf]||t["@@iterator"],typeof t=="function"?t:null)}var me=Object.assign,ec;function Ks(t){if(ec===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ec=e&&e[1]||""}return`
`+ec+t}var tc=!1;function nc(t,e){if(!t||tc)return"";tc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,l=r.length-1;1<=o&&0<=l&&s[o]!==r[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==r[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==r[l]){var a=`
`+s[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{tc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ks(t):""}function Qv(t){switch(t.tag){case 5:return Ks(t.type);case 16:return Ks("Lazy");case 13:return Ks("Suspense");case 19:return Ks("SuspenseList");case 0:case 2:case 15:return t=nc(t.type,!1),t;case 11:return t=nc(t.type.render,!1),t;case 1:return t=nc(t.type,!0),t;default:return""}}function Qc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Oi:return"Fragment";case Di:return"Portal";case Kc:return"Profiler";case wd:return"StrictMode";case Gc:return"Suspense";case qc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case qg:return(t.displayName||"Context")+".Consumer";case Gg:return(t._context.displayName||"Context")+".Provider";case Sd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kd:return e=t.displayName||null,e!==null?e:Qc(t.type)||"Memo";case Sn:e=t._payload,t=t._init;try{return Qc(t(e))}catch{}}return null}function Xv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qc(e);case 8:return e===wd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Un(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Xg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Zv(t){var e=Xg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function wo(t){t._valueTracker||(t._valueTracker=Zv(t))}function Zg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Xg(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function xl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Xc(t,e){var n=e.checked;return me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ff(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Un(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Jg(t,e){e=e.checked,e!=null&&bd(t,"checked",e,!1)}function Zc(t,e){Jg(t,e);var n=Un(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Jc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Jc(t,e.type,Un(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function pf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Jc(t,e,n){(e!=="number"||xl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Gs=Array.isArray;function qi(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Un(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function eu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(I(91));return me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function mf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(I(92));if(Gs(n)){if(1<n.length)throw Error(I(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Un(n)}}function e0(t,e){var n=Un(e.value),i=Un(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function gf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function t0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?t0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var So,n0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(So=So||document.createElement("div"),So.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=So.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function kr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var nr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jv=["Webkit","ms","Moz","O"];Object.keys(nr).forEach(function(t){Jv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),nr[e]=nr[t]})});function i0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||nr.hasOwnProperty(t)&&nr[t]?(""+e).trim():e+"px"}function s0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=i0(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var e1=me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nu(t,e){if(e){if(e1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(I(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(I(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(I(61))}if(e.style!=null&&typeof e.style!="object")throw Error(I(62))}}function iu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var su=null;function Cd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ru=null,Qi=null,Xi=null;function yf(t){if(t=io(t)){if(typeof ru!="function")throw Error(I(280));var e=t.stateNode;e&&(e=wa(e),ru(t.stateNode,t.type,e))}}function r0(t){Qi?Xi?Xi.push(t):Xi=[t]:Qi=t}function o0(){if(Qi){var t=Qi,e=Xi;if(Xi=Qi=null,yf(t),e)for(t=0;t<e.length;t++)yf(e[t])}}function l0(t,e){return t(e)}function a0(){}var ic=!1;function c0(t,e,n){if(ic)return t(e,n);ic=!0;try{return l0(t,e,n)}finally{ic=!1,(Qi!==null||Xi!==null)&&(a0(),o0())}}function Cr(t,e){var n=t.stateNode;if(n===null)return null;var i=wa(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(I(231,e,typeof n));return n}var ou=!1;if(dn)try{var As={};Object.defineProperty(As,"passive",{get:function(){ou=!0}}),window.addEventListener("test",As,As),window.removeEventListener("test",As,As)}catch{ou=!1}function t1(t,e,n,i,s,r,o,l,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var ir=!1,_l=null,vl=!1,lu=null,n1={onError:function(t){ir=!0,_l=t}};function i1(t,e,n,i,s,r,o,l,a){ir=!1,_l=null,t1.apply(n1,arguments)}function s1(t,e,n,i,s,r,o,l,a){if(i1.apply(this,arguments),ir){if(ir){var c=_l;ir=!1,_l=null}else throw Error(I(198));vl||(vl=!0,lu=c)}}function Ti(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function u0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xf(t){if(Ti(t)!==t)throw Error(I(188))}function r1(t){var e=t.alternate;if(!e){if(e=Ti(t),e===null)throw Error(I(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return xf(s),t;if(r===i)return xf(s),e;r=r.sibling}throw Error(I(188))}if(n.return!==i.return)n=s,i=r;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,i=r;break}if(l===i){o=!0,i=s,n=r;break}l=l.sibling}if(!o){for(l=r.child;l;){if(l===n){o=!0,n=r,i=s;break}if(l===i){o=!0,i=r,n=s;break}l=l.sibling}if(!o)throw Error(I(189))}}if(n.alternate!==i)throw Error(I(190))}if(n.tag!==3)throw Error(I(188));return n.stateNode.current===n?t:e}function d0(t){return t=r1(t),t!==null?h0(t):null}function h0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=h0(t);if(e!==null)return e;t=t.sibling}return null}var f0=ft.unstable_scheduleCallback,_f=ft.unstable_cancelCallback,o1=ft.unstable_shouldYield,l1=ft.unstable_requestPaint,xe=ft.unstable_now,a1=ft.unstable_getCurrentPriorityLevel,Ed=ft.unstable_ImmediatePriority,p0=ft.unstable_UserBlockingPriority,bl=ft.unstable_NormalPriority,c1=ft.unstable_LowPriority,m0=ft.unstable_IdlePriority,xa=null,qt=null;function u1(t){if(qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(xa,t,void 0,(t.current.flags&128)===128)}catch{}}var Ft=Math.clz32?Math.clz32:f1,d1=Math.log,h1=Math.LN2;function f1(t){return t>>>=0,t===0?32:31-(d1(t)/h1|0)|0}var ko=64,Co=4194304;function qs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wl(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,r=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?i=qs(l):(r&=o,r!==0&&(i=qs(r)))}else o=n&~s,o!==0?i=qs(o):r!==0&&(i=qs(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Ft(e),s=1<<n,i|=t[n],e&=~s;return i}function p1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function m1(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes;0<r;){var o=31-Ft(r),l=1<<o,a=s[o];a===-1?(!(l&n)||l&i)&&(s[o]=p1(l,e)):a<=e&&(t.expiredLanes|=l),r&=~l}}function au(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function g0(){var t=ko;return ko<<=1,!(ko&4194240)&&(ko=64),t}function sc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function to(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ft(e),t[e]=n}function g1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ft(n),r=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~r}}function Nd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Ft(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var Z=0;function y0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var x0,Td,_0,v0,b0,cu=!1,Eo=[],Mn=null,An=null,jn=null,Er=new Map,Nr=new Map,Cn=[],y1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vf(t,e){switch(t){case"focusin":case"focusout":Mn=null;break;case"dragenter":case"dragleave":An=null;break;case"mouseover":case"mouseout":jn=null;break;case"pointerover":case"pointerout":Er.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nr.delete(e.pointerId)}}function js(t,e,n,i,s,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=io(e),e!==null&&Td(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function x1(t,e,n,i,s){switch(e){case"focusin":return Mn=js(Mn,t,e,n,i,s),!0;case"dragenter":return An=js(An,t,e,n,i,s),!0;case"mouseover":return jn=js(jn,t,e,n,i,s),!0;case"pointerover":var r=s.pointerId;return Er.set(r,js(Er.get(r)||null,t,e,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Nr.set(r,js(Nr.get(r)||null,t,e,n,i,s)),!0}return!1}function w0(t){var e=ai(t.target);if(e!==null){var n=Ti(e);if(n!==null){if(e=n.tag,e===13){if(e=u0(n),e!==null){t.blockedOn=e,b0(t.priority,function(){_0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function il(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=uu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);su=i,n.target.dispatchEvent(i),su=null}else return e=io(n),e!==null&&Td(e),t.blockedOn=n,!1;e.shift()}return!0}function bf(t,e,n){il(t)&&n.delete(e)}function _1(){cu=!1,Mn!==null&&il(Mn)&&(Mn=null),An!==null&&il(An)&&(An=null),jn!==null&&il(jn)&&(jn=null),Er.forEach(bf),Nr.forEach(bf)}function Ps(t,e){t.blockedOn===e&&(t.blockedOn=null,cu||(cu=!0,ft.unstable_scheduleCallback(ft.unstable_NormalPriority,_1)))}function Tr(t){function e(s){return Ps(s,t)}if(0<Eo.length){Ps(Eo[0],t);for(var n=1;n<Eo.length;n++){var i=Eo[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Mn!==null&&Ps(Mn,t),An!==null&&Ps(An,t),jn!==null&&Ps(jn,t),Er.forEach(e),Nr.forEach(e),n=0;n<Cn.length;n++)i=Cn[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Cn.length&&(n=Cn[0],n.blockedOn===null);)w0(n),n.blockedOn===null&&Cn.shift()}var Zi=xn.ReactCurrentBatchConfig,Sl=!0;function v1(t,e,n,i){var s=Z,r=Zi.transition;Zi.transition=null;try{Z=1,Id(t,e,n,i)}finally{Z=s,Zi.transition=r}}function b1(t,e,n,i){var s=Z,r=Zi.transition;Zi.transition=null;try{Z=4,Id(t,e,n,i)}finally{Z=s,Zi.transition=r}}function Id(t,e,n,i){if(Sl){var s=uu(t,e,n,i);if(s===null)pc(t,e,i,kl,n),vf(t,i);else if(x1(s,t,e,n,i))i.stopPropagation();else if(vf(t,i),e&4&&-1<y1.indexOf(t)){for(;s!==null;){var r=io(s);if(r!==null&&x0(r),r=uu(t,e,n,i),r===null&&pc(t,e,i,kl,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else pc(t,e,i,null,n)}}var kl=null;function uu(t,e,n,i){if(kl=null,t=Cd(i),t=ai(t),t!==null)if(e=Ti(t),e===null)t=null;else if(n=e.tag,n===13){if(t=u0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return kl=t,null}function S0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(a1()){case Ed:return 1;case p0:return 4;case bl:case c1:return 16;case m0:return 536870912;default:return 16}default:return 16}}var Nn=null,Md=null,sl=null;function k0(){if(sl)return sl;var t,e=Md,n=e.length,i,s="value"in Nn?Nn.value:Nn.textContent,r=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===s[r-i];i++);return sl=s.slice(t,1<i?1-i:void 0)}function rl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function No(){return!0}function wf(){return!1}function mt(t){function e(n,i,s,r,o){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?No:wf,this.isPropagationStopped=wf,this}return me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=No)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=No)},persist:function(){},isPersistent:No}),e}var Ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ad=mt(Ss),no=me({},Ss,{view:0,detail:0}),w1=mt(no),rc,oc,Rs,_a=me({},no,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Rs&&(Rs&&t.type==="mousemove"?(rc=t.screenX-Rs.screenX,oc=t.screenY-Rs.screenY):oc=rc=0,Rs=t),rc)},movementY:function(t){return"movementY"in t?t.movementY:oc}}),Sf=mt(_a),S1=me({},_a,{dataTransfer:0}),k1=mt(S1),C1=me({},no,{relatedTarget:0}),lc=mt(C1),E1=me({},Ss,{animationName:0,elapsedTime:0,pseudoElement:0}),N1=mt(E1),T1=me({},Ss,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),I1=mt(T1),M1=me({},Ss,{data:0}),kf=mt(M1),A1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},j1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},P1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function R1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=P1[t])?!!e[t]:!1}function jd(){return R1}var D1=me({},no,{key:function(t){if(t.key){var e=A1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=rl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?j1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jd,charCode:function(t){return t.type==="keypress"?rl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?rl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),O1=mt(D1),L1=me({},_a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cf=mt(L1),F1=me({},no,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jd}),z1=mt(F1),W1=me({},Ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),B1=mt(W1),H1=me({},_a,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$1=mt(H1),U1=[9,13,27,32],Pd=dn&&"CompositionEvent"in window,sr=null;dn&&"documentMode"in document&&(sr=document.documentMode);var V1=dn&&"TextEvent"in window&&!sr,C0=dn&&(!Pd||sr&&8<sr&&11>=sr),Ef=" ",Nf=!1;function E0(t,e){switch(t){case"keyup":return U1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function N0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Li=!1;function Y1(t,e){switch(t){case"compositionend":return N0(e);case"keypress":return e.which!==32?null:(Nf=!0,Ef);case"textInput":return t=e.data,t===Ef&&Nf?null:t;default:return null}}function K1(t,e){if(Li)return t==="compositionend"||!Pd&&E0(t,e)?(t=k0(),sl=Md=Nn=null,Li=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return C0&&e.locale!=="ko"?null:e.data;default:return null}}var G1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!G1[t.type]:e==="textarea"}function T0(t,e,n,i){r0(i),e=Cl(e,"onChange"),0<e.length&&(n=new Ad("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var rr=null,Ir=null;function q1(t){z0(t,0)}function va(t){var e=Wi(t);if(Zg(e))return t}function Q1(t,e){if(t==="change")return e}var I0=!1;if(dn){var ac;if(dn){var cc="oninput"in document;if(!cc){var If=document.createElement("div");If.setAttribute("oninput","return;"),cc=typeof If.oninput=="function"}ac=cc}else ac=!1;I0=ac&&(!document.documentMode||9<document.documentMode)}function Mf(){rr&&(rr.detachEvent("onpropertychange",M0),Ir=rr=null)}function M0(t){if(t.propertyName==="value"&&va(Ir)){var e=[];T0(e,Ir,t,Cd(t)),c0(q1,e)}}function X1(t,e,n){t==="focusin"?(Mf(),rr=e,Ir=n,rr.attachEvent("onpropertychange",M0)):t==="focusout"&&Mf()}function Z1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return va(Ir)}function J1(t,e){if(t==="click")return va(e)}function eb(t,e){if(t==="input"||t==="change")return va(e)}function tb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Bt=typeof Object.is=="function"?Object.is:tb;function Mr(t,e){if(Bt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Yc.call(e,s)||!Bt(t[s],e[s]))return!1}return!0}function Af(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jf(t,e){var n=Af(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Af(n)}}function A0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?A0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function j0(){for(var t=window,e=xl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=xl(t.document)}return e}function Rd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nb(t){var e=j0(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&A0(n.ownerDocument.documentElement,n)){if(i!==null&&Rd(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!t.extend&&r>i&&(s=i,i=r,r=s),s=jf(n,r);var o=jf(n,i);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),r>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ib=dn&&"documentMode"in document&&11>=document.documentMode,Fi=null,du=null,or=null,hu=!1;function Pf(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hu||Fi==null||Fi!==xl(i)||(i=Fi,"selectionStart"in i&&Rd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),or&&Mr(or,i)||(or=i,i=Cl(du,"onSelect"),0<i.length&&(e=new Ad("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Fi)))}function To(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var zi={animationend:To("Animation","AnimationEnd"),animationiteration:To("Animation","AnimationIteration"),animationstart:To("Animation","AnimationStart"),transitionend:To("Transition","TransitionEnd")},uc={},P0={};dn&&(P0=document.createElement("div").style,"AnimationEvent"in window||(delete zi.animationend.animation,delete zi.animationiteration.animation,delete zi.animationstart.animation),"TransitionEvent"in window||delete zi.transitionend.transition);function ba(t){if(uc[t])return uc[t];if(!zi[t])return t;var e=zi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in P0)return uc[t]=e[n];return t}var R0=ba("animationend"),D0=ba("animationiteration"),O0=ba("animationstart"),L0=ba("transitionend"),F0=new Map,Rf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qn(t,e){F0.set(t,e),Ni(e,[t])}for(var dc=0;dc<Rf.length;dc++){var hc=Rf[dc],sb=hc.toLowerCase(),rb=hc[0].toUpperCase()+hc.slice(1);qn(sb,"on"+rb)}qn(R0,"onAnimationEnd");qn(D0,"onAnimationIteration");qn(O0,"onAnimationStart");qn("dblclick","onDoubleClick");qn("focusin","onFocus");qn("focusout","onBlur");qn(L0,"onTransitionEnd");ls("onMouseEnter",["mouseout","mouseover"]);ls("onMouseLeave",["mouseout","mouseover"]);ls("onPointerEnter",["pointerout","pointerover"]);ls("onPointerLeave",["pointerout","pointerover"]);Ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ni("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ob=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qs));function Df(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,s1(i,e,void 0,t),t.currentTarget=null}function z0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var o=i.length-1;0<=o;o--){var l=i[o],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==r&&s.isPropagationStopped())break e;Df(s,l,c),r=a}else for(o=0;o<i.length;o++){if(l=i[o],a=l.instance,c=l.currentTarget,l=l.listener,a!==r&&s.isPropagationStopped())break e;Df(s,l,c),r=a}}}if(vl)throw t=lu,vl=!1,lu=null,t}function le(t,e){var n=e[yu];n===void 0&&(n=e[yu]=new Set);var i=t+"__bubble";n.has(i)||(W0(e,t,2,!1),n.add(i))}function fc(t,e,n){var i=0;e&&(i|=4),W0(n,t,i,e)}var Io="_reactListening"+Math.random().toString(36).slice(2);function Ar(t){if(!t[Io]){t[Io]=!0,Kg.forEach(function(n){n!=="selectionchange"&&(ob.has(n)||fc(n,!1,t),fc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Io]||(e[Io]=!0,fc("selectionchange",!1,e))}}function W0(t,e,n,i){switch(S0(e)){case 1:var s=v1;break;case 4:s=b1;break;default:s=Id}n=s.bind(null,e,n,t),s=void 0,!ou||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function pc(t,e,n,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var l=i.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===s||a.nodeType===8&&a.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ai(l),o===null)return;if(a=o.tag,a===5||a===6){i=r=o;continue e}l=l.parentNode}}i=i.return}c0(function(){var c=r,d=Cd(n),h=[];e:{var f=F0.get(t);if(f!==void 0){var p=Ad,m=t;switch(t){case"keypress":if(rl(n)===0)break e;case"keydown":case"keyup":p=O1;break;case"focusin":m="focus",p=lc;break;case"focusout":m="blur",p=lc;break;case"beforeblur":case"afterblur":p=lc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Sf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=k1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=z1;break;case R0:case D0:case O0:p=N1;break;case L0:p=B1;break;case"scroll":p=w1;break;case"wheel":p=$1;break;case"copy":case"cut":case"paste":p=I1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Cf}var x=(e&4)!==0,v=!x&&t==="scroll",g=x?f!==null?f+"Capture":null:f;x=[];for(var y=c,_;y!==null;){_=y;var b=_.stateNode;if(_.tag===5&&b!==null&&(_=b,g!==null&&(b=Cr(y,g),b!=null&&x.push(jr(y,b,_)))),v)break;y=y.return}0<x.length&&(f=new p(f,m,null,n,d),h.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==su&&(m=n.relatedTarget||n.fromElement)&&(ai(m)||m[hn]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=c,m=m?ai(m):null,m!==null&&(v=Ti(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(x=Sf,b="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(x=Cf,b="onPointerLeave",g="onPointerEnter",y="pointer"),v=p==null?f:Wi(p),_=m==null?f:Wi(m),f=new x(b,y+"leave",p,n,d),f.target=v,f.relatedTarget=_,b=null,ai(d)===c&&(x=new x(g,y+"enter",m,n,d),x.target=_,x.relatedTarget=v,b=x),v=b,p&&m)t:{for(x=p,g=m,y=0,_=x;_;_=ji(_))y++;for(_=0,b=g;b;b=ji(b))_++;for(;0<y-_;)x=ji(x),y--;for(;0<_-y;)g=ji(g),_--;for(;y--;){if(x===g||g!==null&&x===g.alternate)break t;x=ji(x),g=ji(g)}x=null}else x=null;p!==null&&Of(h,f,p,x,!1),m!==null&&v!==null&&Of(h,v,m,x,!0)}}e:{if(f=c?Wi(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var w=Q1;else if(Tf(f))if(I0)w=eb;else{w=Z1;var k=X1}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(w=J1);if(w&&(w=w(t,c))){T0(h,w,n,d);break e}k&&k(t,f,c),t==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&Jc(f,"number",f.value)}switch(k=c?Wi(c):window,t){case"focusin":(Tf(k)||k.contentEditable==="true")&&(Fi=k,du=c,or=null);break;case"focusout":or=du=Fi=null;break;case"mousedown":hu=!0;break;case"contextmenu":case"mouseup":case"dragend":hu=!1,Pf(h,n,d);break;case"selectionchange":if(ib)break;case"keydown":case"keyup":Pf(h,n,d)}var S;if(Pd)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Li?E0(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(C0&&n.locale!=="ko"&&(Li||E!=="onCompositionStart"?E==="onCompositionEnd"&&Li&&(S=k0()):(Nn=d,Md="value"in Nn?Nn.value:Nn.textContent,Li=!0)),k=Cl(c,E),0<k.length&&(E=new kf(E,t,null,n,d),h.push({event:E,listeners:k}),S?E.data=S:(S=N0(n),S!==null&&(E.data=S)))),(S=V1?Y1(t,n):K1(t,n))&&(c=Cl(c,"onBeforeInput"),0<c.length&&(d=new kf("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=S))}z0(h,e)})}function jr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Cl(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=Cr(t,n),r!=null&&i.unshift(jr(t,r,s)),r=Cr(t,e),r!=null&&i.push(jr(t,r,s))),t=t.return}return i}function ji(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Of(t,e,n,i,s){for(var r=e._reactName,o=[];n!==null&&n!==i;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===i)break;l.tag===5&&c!==null&&(l=c,s?(a=Cr(n,r),a!=null&&o.unshift(jr(n,a,l))):s||(a=Cr(n,r),a!=null&&o.push(jr(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var lb=/\r\n?/g,ab=/\u0000|\uFFFD/g;function Lf(t){return(typeof t=="string"?t:""+t).replace(lb,`
`).replace(ab,"")}function Mo(t,e,n){if(e=Lf(e),Lf(t)!==e&&n)throw Error(I(425))}function El(){}var fu=null,pu=null;function mu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gu=typeof setTimeout=="function"?setTimeout:void 0,cb=typeof clearTimeout=="function"?clearTimeout:void 0,Ff=typeof Promise=="function"?Promise:void 0,ub=typeof queueMicrotask=="function"?queueMicrotask:typeof Ff<"u"?function(t){return Ff.resolve(null).then(t).catch(db)}:gu;function db(t){setTimeout(function(){throw t})}function mc(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),Tr(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);Tr(e)}function Pn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function zf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ks=Math.random().toString(36).slice(2),Gt="__reactFiber$"+ks,Pr="__reactProps$"+ks,hn="__reactContainer$"+ks,yu="__reactEvents$"+ks,hb="__reactListeners$"+ks,fb="__reactHandles$"+ks;function ai(t){var e=t[Gt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[hn]||n[Gt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=zf(t);t!==null;){if(n=t[Gt])return n;t=zf(t)}return e}t=n,n=t.parentNode}return null}function io(t){return t=t[Gt]||t[hn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(I(33))}function wa(t){return t[Pr]||null}var xu=[],Bi=-1;function Qn(t){return{current:t}}function ue(t){0>Bi||(t.current=xu[Bi],xu[Bi]=null,Bi--)}function re(t,e){Bi++,xu[Bi]=t.current,t.current=e}var Vn={},Ue=Qn(Vn),rt=Qn(!1),yi=Vn;function as(t,e){var n=t.type.contextTypes;if(!n)return Vn;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in n)s[r]=e[r];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ot(t){return t=t.childContextTypes,t!=null}function Nl(){ue(rt),ue(Ue)}function Wf(t,e,n){if(Ue.current!==Vn)throw Error(I(168));re(Ue,e),re(rt,n)}function B0(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(I(108,Xv(t)||"Unknown",s));return me({},n,i)}function Tl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vn,yi=Ue.current,re(Ue,t),re(rt,rt.current),!0}function Bf(t,e,n){var i=t.stateNode;if(!i)throw Error(I(169));n?(t=B0(t,e,yi),i.__reactInternalMemoizedMergedChildContext=t,ue(rt),ue(Ue),re(Ue,t)):ue(rt),re(rt,n)}var sn=null,Sa=!1,gc=!1;function H0(t){sn===null?sn=[t]:sn.push(t)}function pb(t){Sa=!0,H0(t)}function Xn(){if(!gc&&sn!==null){gc=!0;var t=0,e=Z;try{var n=sn;for(Z=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}sn=null,Sa=!1}catch(s){throw sn!==null&&(sn=sn.slice(t+1)),f0(Ed,Xn),s}finally{Z=e,gc=!1}}return null}var Hi=[],$i=0,Il=null,Ml=0,_t=[],vt=0,xi=null,on=1,ln="";function ni(t,e){Hi[$i++]=Ml,Hi[$i++]=Il,Il=t,Ml=e}function $0(t,e,n){_t[vt++]=on,_t[vt++]=ln,_t[vt++]=xi,xi=t;var i=on;t=ln;var s=32-Ft(i)-1;i&=~(1<<s),n+=1;var r=32-Ft(e)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,on=1<<32-Ft(e)+s|n<<s|i,ln=r+t}else on=1<<r|n<<s|i,ln=t}function Dd(t){t.return!==null&&(ni(t,1),$0(t,1,0))}function Od(t){for(;t===Il;)Il=Hi[--$i],Hi[$i]=null,Ml=Hi[--$i],Hi[$i]=null;for(;t===xi;)xi=_t[--vt],_t[vt]=null,ln=_t[--vt],_t[vt]=null,on=_t[--vt],_t[vt]=null}var dt=null,ut=null,he=!1,Pt=null;function U0(t,e){var n=bt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Hf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dt=t,ut=Pn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dt=t,ut=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=xi!==null?{id:on,overflow:ln}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=bt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,dt=t,ut=null,!0):!1;default:return!1}}function _u(t){return(t.mode&1)!==0&&(t.flags&128)===0}function vu(t){if(he){var e=ut;if(e){var n=e;if(!Hf(t,e)){if(_u(t))throw Error(I(418));e=Pn(n.nextSibling);var i=dt;e&&Hf(t,e)?U0(i,n):(t.flags=t.flags&-4097|2,he=!1,dt=t)}}else{if(_u(t))throw Error(I(418));t.flags=t.flags&-4097|2,he=!1,dt=t}}}function $f(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dt=t}function Ao(t){if(t!==dt)return!1;if(!he)return $f(t),he=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!mu(t.type,t.memoizedProps)),e&&(e=ut)){if(_u(t))throw V0(),Error(I(418));for(;e;)U0(t,e),e=Pn(e.nextSibling)}if($f(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(I(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ut=Pn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ut=null}}else ut=dt?Pn(t.stateNode.nextSibling):null;return!0}function V0(){for(var t=ut;t;)t=Pn(t.nextSibling)}function cs(){ut=dt=null,he=!1}function Ld(t){Pt===null?Pt=[t]:Pt.push(t)}var mb=xn.ReactCurrentBatchConfig;function Ds(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(I(309));var i=n.stateNode}if(!i)throw Error(I(147,t));var s=i,r=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var l=s.refs;o===null?delete l[r]:l[r]=o},e._stringRef=r,e)}if(typeof t!="string")throw Error(I(284));if(!n._owner)throw Error(I(290,t))}return t}function jo(t,e){throw t=Object.prototype.toString.call(e),Error(I(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Uf(t){var e=t._init;return e(t._payload)}function Y0(t){function e(g,y){if(t){var _=g.deletions;_===null?(g.deletions=[y],g.flags|=16):_.push(y)}}function n(g,y){if(!t)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function i(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function s(g,y){return g=Ln(g,y),g.index=0,g.sibling=null,g}function r(g,y,_){return g.index=_,t?(_=g.alternate,_!==null?(_=_.index,_<y?(g.flags|=2,y):_):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,y,_,b){return y===null||y.tag!==6?(y=Sc(_,g.mode,b),y.return=g,y):(y=s(y,_),y.return=g,y)}function a(g,y,_,b){var w=_.type;return w===Oi?d(g,y,_.props.children,b,_.key):y!==null&&(y.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Sn&&Uf(w)===y.type)?(b=s(y,_.props),b.ref=Ds(g,y,_),b.return=g,b):(b=hl(_.type,_.key,_.props,null,g.mode,b),b.ref=Ds(g,y,_),b.return=g,b)}function c(g,y,_,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==_.containerInfo||y.stateNode.implementation!==_.implementation?(y=kc(_,g.mode,b),y.return=g,y):(y=s(y,_.children||[]),y.return=g,y)}function d(g,y,_,b,w){return y===null||y.tag!==7?(y=mi(_,g.mode,b,w),y.return=g,y):(y=s(y,_),y.return=g,y)}function h(g,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Sc(""+y,g.mode,_),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case bo:return _=hl(y.type,y.key,y.props,null,g.mode,_),_.ref=Ds(g,null,y),_.return=g,_;case Di:return y=kc(y,g.mode,_),y.return=g,y;case Sn:var b=y._init;return h(g,b(y._payload),_)}if(Gs(y)||Ms(y))return y=mi(y,g.mode,_,null),y.return=g,y;jo(g,y)}return null}function f(g,y,_,b){var w=y!==null?y.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return w!==null?null:l(g,y,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case bo:return _.key===w?a(g,y,_,b):null;case Di:return _.key===w?c(g,y,_,b):null;case Sn:return w=_._init,f(g,y,w(_._payload),b)}if(Gs(_)||Ms(_))return w!==null?null:d(g,y,_,b,null);jo(g,_)}return null}function p(g,y,_,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(_)||null,l(y,g,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case bo:return g=g.get(b.key===null?_:b.key)||null,a(y,g,b,w);case Di:return g=g.get(b.key===null?_:b.key)||null,c(y,g,b,w);case Sn:var k=b._init;return p(g,y,_,k(b._payload),w)}if(Gs(b)||Ms(b))return g=g.get(_)||null,d(y,g,b,w,null);jo(y,b)}return null}function m(g,y,_,b){for(var w=null,k=null,S=y,E=y=0,j=null;S!==null&&E<_.length;E++){S.index>E?(j=S,S=null):j=S.sibling;var A=f(g,S,_[E],b);if(A===null){S===null&&(S=j);break}t&&S&&A.alternate===null&&e(g,S),y=r(A,y,E),k===null?w=A:k.sibling=A,k=A,S=j}if(E===_.length)return n(g,S),he&&ni(g,E),w;if(S===null){for(;E<_.length;E++)S=h(g,_[E],b),S!==null&&(y=r(S,y,E),k===null?w=S:k.sibling=S,k=S);return he&&ni(g,E),w}for(S=i(g,S);E<_.length;E++)j=p(S,g,E,_[E],b),j!==null&&(t&&j.alternate!==null&&S.delete(j.key===null?E:j.key),y=r(j,y,E),k===null?w=j:k.sibling=j,k=j);return t&&S.forEach(function(C){return e(g,C)}),he&&ni(g,E),w}function x(g,y,_,b){var w=Ms(_);if(typeof w!="function")throw Error(I(150));if(_=w.call(_),_==null)throw Error(I(151));for(var k=w=null,S=y,E=y=0,j=null,A=_.next();S!==null&&!A.done;E++,A=_.next()){S.index>E?(j=S,S=null):j=S.sibling;var C=f(g,S,A.value,b);if(C===null){S===null&&(S=j);break}t&&S&&C.alternate===null&&e(g,S),y=r(C,y,E),k===null?w=C:k.sibling=C,k=C,S=j}if(A.done)return n(g,S),he&&ni(g,E),w;if(S===null){for(;!A.done;E++,A=_.next())A=h(g,A.value,b),A!==null&&(y=r(A,y,E),k===null?w=A:k.sibling=A,k=A);return he&&ni(g,E),w}for(S=i(g,S);!A.done;E++,A=_.next())A=p(S,g,E,A.value,b),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?E:A.key),y=r(A,y,E),k===null?w=A:k.sibling=A,k=A);return t&&S.forEach(function(T){return e(g,T)}),he&&ni(g,E),w}function v(g,y,_,b){if(typeof _=="object"&&_!==null&&_.type===Oi&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case bo:e:{for(var w=_.key,k=y;k!==null;){if(k.key===w){if(w=_.type,w===Oi){if(k.tag===7){n(g,k.sibling),y=s(k,_.props.children),y.return=g,g=y;break e}}else if(k.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Sn&&Uf(w)===k.type){n(g,k.sibling),y=s(k,_.props),y.ref=Ds(g,k,_),y.return=g,g=y;break e}n(g,k);break}else e(g,k);k=k.sibling}_.type===Oi?(y=mi(_.props.children,g.mode,b,_.key),y.return=g,g=y):(b=hl(_.type,_.key,_.props,null,g.mode,b),b.ref=Ds(g,y,_),b.return=g,g=b)}return o(g);case Di:e:{for(k=_.key;y!==null;){if(y.key===k)if(y.tag===4&&y.stateNode.containerInfo===_.containerInfo&&y.stateNode.implementation===_.implementation){n(g,y.sibling),y=s(y,_.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else e(g,y);y=y.sibling}y=kc(_,g.mode,b),y.return=g,g=y}return o(g);case Sn:return k=_._init,v(g,y,k(_._payload),b)}if(Gs(_))return m(g,y,_,b);if(Ms(_))return x(g,y,_,b);jo(g,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,y!==null&&y.tag===6?(n(g,y.sibling),y=s(y,_),y.return=g,g=y):(n(g,y),y=Sc(_,g.mode,b),y.return=g,g=y),o(g)):n(g,y)}return v}var us=Y0(!0),K0=Y0(!1),Al=Qn(null),jl=null,Ui=null,Fd=null;function zd(){Fd=Ui=jl=null}function Wd(t){var e=Al.current;ue(Al),t._currentValue=e}function bu(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ji(t,e){jl=t,Fd=Ui=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(nt=!0),t.firstContext=null)}function Ct(t){var e=t._currentValue;if(Fd!==t)if(t={context:t,memoizedValue:e,next:null},Ui===null){if(jl===null)throw Error(I(308));Ui=t,jl.dependencies={lanes:0,firstContext:t}}else Ui=Ui.next=t;return e}var ci=null;function Bd(t){ci===null?ci=[t]:ci.push(t)}function G0(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,Bd(e)):(n.next=s.next,s.next=n),e.interleaved=n,fn(t,i)}function fn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var kn=!1;function Hd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function q0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function cn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Rn(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,K&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,fn(t,n)}return s=i.interleaved,s===null?(e.next=e,Bd(i)):(e.next=s.next,s.next=e),i.interleaved=e,fn(t,n)}function ol(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Nd(t,n)}}function Vf(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?s=r=o:r=r.next=o,n=n.next}while(n!==null);r===null?s=r=e:r=r.next=e}else s=r=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Pl(t,e,n,i){var s=t.updateQueue;kn=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var a=l,c=a.next;a.next=null,o===null?r=c:o.next=c,o=a;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=a))}if(r!==null){var h=s.baseState;o=0,d=c=a=null,l=r;do{var f=l.lane,p=l.eventTime;if((i&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,x=l;switch(f=e,p=n,x.tag){case 1:if(m=x.payload,typeof m=="function"){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=x.payload,f=typeof m=="function"?m.call(p,h,f):m,f==null)break e;h=me({},h,f);break e;case 2:kn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=p,a=h):d=d.next=p,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(a=h),s.baseState=a,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);vi|=o,t.lanes=o,t.memoizedState=h}}function Yf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(I(191,s));s.call(i)}}}var so={},Qt=Qn(so),Rr=Qn(so),Dr=Qn(so);function ui(t){if(t===so)throw Error(I(174));return t}function $d(t,e){switch(re(Dr,e),re(Rr,t),re(Qt,so),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=tu(e,t)}ue(Qt),re(Qt,e)}function ds(){ue(Qt),ue(Rr),ue(Dr)}function Q0(t){ui(Dr.current);var e=ui(Qt.current),n=tu(e,t.type);e!==n&&(re(Rr,t),re(Qt,n))}function Ud(t){Rr.current===t&&(ue(Qt),ue(Rr))}var fe=Qn(0);function Rl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yc=[];function Vd(){for(var t=0;t<yc.length;t++)yc[t]._workInProgressVersionPrimary=null;yc.length=0}var ll=xn.ReactCurrentDispatcher,xc=xn.ReactCurrentBatchConfig,_i=0,pe=null,be=null,Ce=null,Dl=!1,lr=!1,Or=0,gb=0;function De(){throw Error(I(321))}function Yd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Bt(t[n],e[n]))return!1;return!0}function Kd(t,e,n,i,s,r){if(_i=r,pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ll.current=t===null||t.memoizedState===null?vb:bb,t=n(i,s),lr){r=0;do{if(lr=!1,Or=0,25<=r)throw Error(I(301));r+=1,Ce=be=null,e.updateQueue=null,ll.current=wb,t=n(i,s)}while(lr)}if(ll.current=Ol,e=be!==null&&be.next!==null,_i=0,Ce=be=pe=null,Dl=!1,e)throw Error(I(300));return t}function Gd(){var t=Or!==0;return Or=0,t}function Yt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?pe.memoizedState=Ce=t:Ce=Ce.next=t,Ce}function Et(){if(be===null){var t=pe.alternate;t=t!==null?t.memoizedState:null}else t=be.next;var e=Ce===null?pe.memoizedState:Ce.next;if(e!==null)Ce=e,be=t;else{if(t===null)throw Error(I(310));be=t,t={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},Ce===null?pe.memoizedState=Ce=t:Ce=Ce.next=t}return Ce}function Lr(t,e){return typeof e=="function"?e(t):e}function _c(t){var e=Et(),n=e.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=t;var i=be,s=i.baseQueue,r=n.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,n.pending=null}if(s!==null){r=s.next,i=i.baseState;var l=o=null,a=null,c=r;do{var d=c.lane;if((_i&d)===d)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=h,o=i):a=a.next=h,pe.lanes|=d,vi|=d}c=c.next}while(c!==null&&c!==r);a===null?o=i:a.next=l,Bt(i,e.memoizedState)||(nt=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=a,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do r=s.lane,pe.lanes|=r,vi|=r,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vc(t){var e=Et(),n=e.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,r=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do r=t(r,o.action),o=o.next;while(o!==s);Bt(r,e.memoizedState)||(nt=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,i]}function X0(){}function Z0(t,e){var n=pe,i=Et(),s=e(),r=!Bt(i.memoizedState,s);if(r&&(i.memoizedState=s,nt=!0),i=i.queue,qd(ty.bind(null,n,i,t),[t]),i.getSnapshot!==e||r||Ce!==null&&Ce.memoizedState.tag&1){if(n.flags|=2048,Fr(9,ey.bind(null,n,i,s,e),void 0,null),Ie===null)throw Error(I(349));_i&30||J0(n,e,s)}return s}function J0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=pe.updateQueue,e===null?(e={lastEffect:null,stores:null},pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ey(t,e,n,i){e.value=n,e.getSnapshot=i,ny(e)&&iy(t)}function ty(t,e,n){return n(function(){ny(e)&&iy(t)})}function ny(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Bt(t,n)}catch{return!0}}function iy(t){var e=fn(t,1);e!==null&&zt(e,t,1,-1)}function Kf(t){var e=Yt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:t},e.queue=t,t=t.dispatch=_b.bind(null,pe,t),[e.memoizedState,t]}function Fr(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=pe.updateQueue,e===null?(e={lastEffect:null,stores:null},pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function sy(){return Et().memoizedState}function al(t,e,n,i){var s=Yt();pe.flags|=t,s.memoizedState=Fr(1|e,n,void 0,i===void 0?null:i)}function ka(t,e,n,i){var s=Et();i=i===void 0?null:i;var r=void 0;if(be!==null){var o=be.memoizedState;if(r=o.destroy,i!==null&&Yd(i,o.deps)){s.memoizedState=Fr(e,n,r,i);return}}pe.flags|=t,s.memoizedState=Fr(1|e,n,r,i)}function Gf(t,e){return al(8390656,8,t,e)}function qd(t,e){return ka(2048,8,t,e)}function ry(t,e){return ka(4,2,t,e)}function oy(t,e){return ka(4,4,t,e)}function ly(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ay(t,e,n){return n=n!=null?n.concat([t]):null,ka(4,4,ly.bind(null,e,t),n)}function Qd(){}function cy(t,e){var n=Et();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Yd(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function uy(t,e){var n=Et();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Yd(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function dy(t,e,n){return _i&21?(Bt(n,e)||(n=g0(),pe.lanes|=n,vi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,nt=!0),t.memoizedState=n)}function yb(t,e){var n=Z;Z=n!==0&&4>n?n:4,t(!0);var i=xc.transition;xc.transition={};try{t(!1),e()}finally{Z=n,xc.transition=i}}function hy(){return Et().memoizedState}function xb(t,e,n){var i=On(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},fy(t))py(e,n);else if(n=G0(t,e,n,i),n!==null){var s=Qe();zt(n,t,i,s),my(n,e,i)}}function _b(t,e,n){var i=On(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(fy(t))py(e,s);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,l=r(o,n);if(s.hasEagerState=!0,s.eagerState=l,Bt(l,o)){var a=e.interleaved;a===null?(s.next=s,Bd(e)):(s.next=a.next,a.next=s),e.interleaved=s;return}}catch{}finally{}n=G0(t,e,s,i),n!==null&&(s=Qe(),zt(n,t,i,s),my(n,e,i))}}function fy(t){var e=t.alternate;return t===pe||e!==null&&e===pe}function py(t,e){lr=Dl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function my(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Nd(t,n)}}var Ol={readContext:Ct,useCallback:De,useContext:De,useEffect:De,useImperativeHandle:De,useInsertionEffect:De,useLayoutEffect:De,useMemo:De,useReducer:De,useRef:De,useState:De,useDebugValue:De,useDeferredValue:De,useTransition:De,useMutableSource:De,useSyncExternalStore:De,useId:De,unstable_isNewReconciler:!1},vb={readContext:Ct,useCallback:function(t,e){return Yt().memoizedState=[t,e===void 0?null:e],t},useContext:Ct,useEffect:Gf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,al(4194308,4,ly.bind(null,e,t),n)},useLayoutEffect:function(t,e){return al(4194308,4,t,e)},useInsertionEffect:function(t,e){return al(4,2,t,e)},useMemo:function(t,e){var n=Yt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Yt();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=xb.bind(null,pe,t),[i.memoizedState,t]},useRef:function(t){var e=Yt();return t={current:t},e.memoizedState=t},useState:Kf,useDebugValue:Qd,useDeferredValue:function(t){return Yt().memoizedState=t},useTransition:function(){var t=Kf(!1),e=t[0];return t=yb.bind(null,t[1]),Yt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=pe,s=Yt();if(he){if(n===void 0)throw Error(I(407));n=n()}else{if(n=e(),Ie===null)throw Error(I(349));_i&30||J0(i,e,n)}s.memoizedState=n;var r={value:n,getSnapshot:e};return s.queue=r,Gf(ty.bind(null,i,r,t),[t]),i.flags|=2048,Fr(9,ey.bind(null,i,r,n,e),void 0,null),n},useId:function(){var t=Yt(),e=Ie.identifierPrefix;if(he){var n=ln,i=on;n=(i&~(1<<32-Ft(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Or++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=gb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},bb={readContext:Ct,useCallback:cy,useContext:Ct,useEffect:qd,useImperativeHandle:ay,useInsertionEffect:ry,useLayoutEffect:oy,useMemo:uy,useReducer:_c,useRef:sy,useState:function(){return _c(Lr)},useDebugValue:Qd,useDeferredValue:function(t){var e=Et();return dy(e,be.memoizedState,t)},useTransition:function(){var t=_c(Lr)[0],e=Et().memoizedState;return[t,e]},useMutableSource:X0,useSyncExternalStore:Z0,useId:hy,unstable_isNewReconciler:!1},wb={readContext:Ct,useCallback:cy,useContext:Ct,useEffect:qd,useImperativeHandle:ay,useInsertionEffect:ry,useLayoutEffect:oy,useMemo:uy,useReducer:vc,useRef:sy,useState:function(){return vc(Lr)},useDebugValue:Qd,useDeferredValue:function(t){var e=Et();return be===null?e.memoizedState=t:dy(e,be.memoizedState,t)},useTransition:function(){var t=vc(Lr)[0],e=Et().memoizedState;return[t,e]},useMutableSource:X0,useSyncExternalStore:Z0,useId:hy,unstable_isNewReconciler:!1};function At(t,e){if(t&&t.defaultProps){e=me({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function wu(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:me({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ca={isMounted:function(t){return(t=t._reactInternals)?Ti(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Qe(),s=On(t),r=cn(i,s);r.payload=e,n!=null&&(r.callback=n),e=Rn(t,r,s),e!==null&&(zt(e,t,s,i),ol(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Qe(),s=On(t),r=cn(i,s);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=Rn(t,r,s),e!==null&&(zt(e,t,s,i),ol(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Qe(),i=On(t),s=cn(n,i);s.tag=2,e!=null&&(s.callback=e),e=Rn(t,s,i),e!==null&&(zt(e,t,i,n),ol(e,t,i))}};function qf(t,e,n,i,s,r,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,r,o):e.prototype&&e.prototype.isPureReactComponent?!Mr(n,i)||!Mr(s,r):!0}function gy(t,e,n){var i=!1,s=Vn,r=e.contextType;return typeof r=="object"&&r!==null?r=Ct(r):(s=ot(e)?yi:Ue.current,i=e.contextTypes,r=(i=i!=null)?as(t,s):Vn),e=new e(n,r),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ca,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=r),e}function Qf(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Ca.enqueueReplaceState(e,e.state,null)}function Su(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Hd(t);var r=e.contextType;typeof r=="object"&&r!==null?s.context=Ct(r):(r=ot(e)?yi:Ue.current,s.context=as(t,r)),s.state=t.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(wu(t,e,r,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ca.enqueueReplaceState(s,s.state,null),Pl(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function hs(t,e){try{var n="",i=e;do n+=Qv(i),i=i.return;while(i);var s=n}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:t,source:e,stack:s,digest:null}}function bc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ku(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Sb=typeof WeakMap=="function"?WeakMap:Map;function yy(t,e,n){n=cn(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Fl||(Fl=!0,Ru=i),ku(t,e)},n}function xy(t,e,n){n=cn(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){ku(t,e)}}var r=t.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){ku(t,e),typeof i!="function"&&(Dn===null?Dn=new Set([this]):Dn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Xf(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Sb;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=Lb.bind(null,t,e,n),e.then(t,t))}function Zf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Jf(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=cn(-1,1),e.tag=2,Rn(n,e,1))),n.lanes|=1),t)}var kb=xn.ReactCurrentOwner,nt=!1;function qe(t,e,n,i){e.child=t===null?K0(e,null,n,i):us(e,t.child,n,i)}function ep(t,e,n,i,s){n=n.render;var r=e.ref;return Ji(e,s),i=Kd(t,e,n,i,r,s),n=Gd(),t!==null&&!nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,pn(t,e,s)):(he&&n&&Dd(e),e.flags|=1,qe(t,e,i,s),e.child)}function tp(t,e,n,i,s){if(t===null){var r=n.type;return typeof r=="function"&&!sh(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=r,_y(t,e,r,i,s)):(t=hl(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!(t.lanes&s)){var o=r.memoizedProps;if(n=n.compare,n=n!==null?n:Mr,n(o,i)&&t.ref===e.ref)return pn(t,e,s)}return e.flags|=1,t=Ln(r,i),t.ref=e.ref,t.return=e,e.child=t}function _y(t,e,n,i,s){if(t!==null){var r=t.memoizedProps;if(Mr(r,i)&&t.ref===e.ref)if(nt=!1,e.pendingProps=i=r,(t.lanes&s)!==0)t.flags&131072&&(nt=!0);else return e.lanes=t.lanes,pn(t,e,s)}return Cu(t,e,n,i,s)}function vy(t,e,n){var i=e.pendingProps,s=i.children,r=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},re(Yi,ct),ct|=n;else{if(!(n&1073741824))return t=r!==null?r.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,re(Yi,ct),ct|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:n,re(Yi,ct),ct|=i}else r!==null?(i=r.baseLanes|n,e.memoizedState=null):i=n,re(Yi,ct),ct|=i;return qe(t,e,s,n),e.child}function by(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Cu(t,e,n,i,s){var r=ot(n)?yi:Ue.current;return r=as(e,r),Ji(e,s),n=Kd(t,e,n,i,r,s),i=Gd(),t!==null&&!nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,pn(t,e,s)):(he&&i&&Dd(e),e.flags|=1,qe(t,e,n,s),e.child)}function np(t,e,n,i,s){if(ot(n)){var r=!0;Tl(e)}else r=!1;if(Ji(e,s),e.stateNode===null)cl(t,e),gy(e,n,i),Su(e,n,i,s),i=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ct(c):(c=ot(n)?yi:Ue.current,c=as(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==i||a!==c)&&Qf(e,o,i,c),kn=!1;var f=e.memoizedState;o.state=f,Pl(e,i,o,s),a=e.memoizedState,l!==i||f!==a||rt.current||kn?(typeof d=="function"&&(wu(e,n,d,i),a=e.memoizedState),(l=kn||qf(e,n,l,i,f,a,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=a),o.props=i,o.state=a,o.context=c,i=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,q0(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:At(e.type,l),o.props=c,h=e.pendingProps,f=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=Ct(a):(a=ot(n)?yi:Ue.current,a=as(e,a));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==a)&&Qf(e,o,i,a),kn=!1,f=e.memoizedState,o.state=f,Pl(e,i,o,s);var m=e.memoizedState;l!==h||f!==m||rt.current||kn?(typeof p=="function"&&(wu(e,n,p,i),m=e.memoizedState),(c=kn||qf(e,n,c,i,f,m,a)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,m,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,m,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=m),o.props=i,o.state=m,o.context=a,i=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return Eu(t,e,n,i,r,s)}function Eu(t,e,n,i,s,r){by(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&Bf(e,n,!1),pn(t,e,r);i=e.stateNode,kb.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=us(e,t.child,null,r),e.child=us(e,null,l,r)):qe(t,e,l,r),e.memoizedState=i.state,s&&Bf(e,n,!0),e.child}function wy(t){var e=t.stateNode;e.pendingContext?Wf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Wf(t,e.context,!1),$d(t,e.containerInfo)}function ip(t,e,n,i,s){return cs(),Ld(s),e.flags|=256,qe(t,e,n,i),e.child}var Nu={dehydrated:null,treeContext:null,retryLane:0};function Tu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Sy(t,e,n){var i=e.pendingProps,s=fe.current,r=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(r=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),re(fe,s&1),t===null)return vu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,r?(i=e.mode,r=e.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=Ta(o,i,0,null),t=mi(t,i,n,null),r.return=e,t.return=e,r.sibling=t,e.child=r,e.child.memoizedState=Tu(n),e.memoizedState=Nu,t):Xd(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Cb(t,e,o,i,l,s,n);if(r){r=i.fallback,o=e.mode,s=t.child,l=s.sibling;var a={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=a,e.deletions=null):(i=Ln(s,a),i.subtreeFlags=s.subtreeFlags&14680064),l!==null?r=Ln(l,r):(r=mi(r,o,n,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,o=t.child.memoizedState,o=o===null?Tu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=t.childLanes&~n,e.memoizedState=Nu,i}return r=t.child,t=r.sibling,i=Ln(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Xd(t,e){return e=Ta({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Po(t,e,n,i){return i!==null&&Ld(i),us(e,t.child,null,n),t=Xd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Cb(t,e,n,i,s,r,o){if(n)return e.flags&256?(e.flags&=-257,i=bc(Error(I(422))),Po(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=Ta({mode:"visible",children:i.children},s,0,null),r=mi(r,s,o,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&us(e,t.child,null,o),e.child.memoizedState=Tu(o),e.memoizedState=Nu,r);if(!(e.mode&1))return Po(t,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var l=i.dgst;return i=l,r=Error(I(419)),i=bc(r,i,void 0),Po(t,e,o,i)}if(l=(o&t.childLanes)!==0,nt||l){if(i=Ie,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,fn(t,s),zt(i,t,s,-1))}return ih(),i=bc(Error(I(421))),Po(t,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Fb.bind(null,t),s._reactRetry=e,null):(t=r.treeContext,ut=Pn(s.nextSibling),dt=e,he=!0,Pt=null,t!==null&&(_t[vt++]=on,_t[vt++]=ln,_t[vt++]=xi,on=t.id,ln=t.overflow,xi=e),e=Xd(e,i.children),e.flags|=4096,e)}function sp(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),bu(t.return,e,n)}function wc(t,e,n,i,s){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function ky(t,e,n){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(qe(t,e,i.children,n),i=fe.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sp(t,n,e);else if(t.tag===19)sp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(re(fe,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Rl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),wc(e,!1,s,n,r);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Rl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}wc(e,!0,n,null,r);break;case"together":wc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),vi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(I(153));if(e.child!==null){for(t=e.child,n=Ln(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ln(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Eb(t,e,n){switch(e.tag){case 3:wy(e),cs();break;case 5:Q0(e);break;case 1:ot(e.type)&&Tl(e);break;case 4:$d(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;re(Al,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(re(fe,fe.current&1),e.flags|=128,null):n&e.child.childLanes?Sy(t,e,n):(re(fe,fe.current&1),t=pn(t,e,n),t!==null?t.sibling:null);re(fe,fe.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return ky(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),re(fe,fe.current),i)break;return null;case 22:case 23:return e.lanes=0,vy(t,e,n)}return pn(t,e,n)}var Cy,Iu,Ey,Ny;Cy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Iu=function(){};Ey=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,ui(Qt.current);var r=null;switch(n){case"input":s=Xc(t,s),i=Xc(t,i),r=[];break;case"select":s=me({},s,{value:void 0}),i=me({},i,{value:void 0}),r=[];break;case"textarea":s=eu(t,s),i=eu(t,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=El)}nu(n,i);var o;n=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Sr.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in i){var a=i[c];if(l=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(r||(r=[]),r.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(r=r||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(r=r||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Sr.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&le("scroll",t),r||l===a||(r=[])):(r=r||[]).push(c,a))}n&&(r=r||[]).push("style",n);var c=r;(e.updateQueue=c)&&(e.flags|=4)}};Ny=function(t,e,n,i){n!==i&&(e.flags|=4)};function Os(t,e){if(!he)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Oe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Nb(t,e,n){var i=e.pendingProps;switch(Od(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oe(e),null;case 1:return ot(e.type)&&Nl(),Oe(e),null;case 3:return i=e.stateNode,ds(),ue(rt),ue(Ue),Vd(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Ao(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pt!==null&&(Lu(Pt),Pt=null))),Iu(t,e),Oe(e),null;case 5:Ud(e);var s=ui(Dr.current);if(n=e.type,t!==null&&e.stateNode!=null)Ey(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(I(166));return Oe(e),null}if(t=ui(Qt.current),Ao(e)){i=e.stateNode,n=e.type;var r=e.memoizedProps;switch(i[Gt]=e,i[Pr]=r,t=(e.mode&1)!==0,n){case"dialog":le("cancel",i),le("close",i);break;case"iframe":case"object":case"embed":le("load",i);break;case"video":case"audio":for(s=0;s<Qs.length;s++)le(Qs[s],i);break;case"source":le("error",i);break;case"img":case"image":case"link":le("error",i),le("load",i);break;case"details":le("toggle",i);break;case"input":ff(i,r),le("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},le("invalid",i);break;case"textarea":mf(i,r),le("invalid",i)}nu(n,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var l=r[o];o==="children"?typeof l=="string"?i.textContent!==l&&(r.suppressHydrationWarning!==!0&&Mo(i.textContent,l,t),s=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(r.suppressHydrationWarning!==!0&&Mo(i.textContent,l,t),s=["children",""+l]):Sr.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&le("scroll",i)}switch(n){case"input":wo(i),pf(i,r,!0);break;case"textarea":wo(i),gf(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=El)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=t0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Gt]=e,t[Pr]=i,Cy(t,e,!1,!1),e.stateNode=t;e:{switch(o=iu(n,i),n){case"dialog":le("cancel",t),le("close",t),s=i;break;case"iframe":case"object":case"embed":le("load",t),s=i;break;case"video":case"audio":for(s=0;s<Qs.length;s++)le(Qs[s],t);s=i;break;case"source":le("error",t),s=i;break;case"img":case"image":case"link":le("error",t),le("load",t),s=i;break;case"details":le("toggle",t),s=i;break;case"input":ff(t,i),s=Xc(t,i),le("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=me({},i,{value:void 0}),le("invalid",t);break;case"textarea":mf(t,i),s=eu(t,i),le("invalid",t);break;default:s=i}nu(n,s),l=s;for(r in l)if(l.hasOwnProperty(r)){var a=l[r];r==="style"?s0(t,a):r==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&n0(t,a)):r==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&kr(t,a):typeof a=="number"&&kr(t,""+a):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Sr.hasOwnProperty(r)?a!=null&&r==="onScroll"&&le("scroll",t):a!=null&&bd(t,r,a,o))}switch(n){case"input":wo(t),pf(t,i,!1);break;case"textarea":wo(t),gf(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Un(i.value));break;case"select":t.multiple=!!i.multiple,r=i.value,r!=null?qi(t,!!i.multiple,r,!1):i.defaultValue!=null&&qi(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=El)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Oe(e),null;case 6:if(t&&e.stateNode!=null)Ny(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(I(166));if(n=ui(Dr.current),ui(Qt.current),Ao(e)){if(i=e.stateNode,n=e.memoizedProps,i[Gt]=e,(r=i.nodeValue!==n)&&(t=dt,t!==null))switch(t.tag){case 3:Mo(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Mo(i.nodeValue,n,(t.mode&1)!==0)}r&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Gt]=e,e.stateNode=i}return Oe(e),null;case 13:if(ue(fe),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(he&&ut!==null&&e.mode&1&&!(e.flags&128))V0(),cs(),e.flags|=98560,r=!1;else if(r=Ao(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(I(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(I(317));r[Gt]=e}else cs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Oe(e),r=!1}else Pt!==null&&(Lu(Pt),Pt=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||fe.current&1?Se===0&&(Se=3):ih())),e.updateQueue!==null&&(e.flags|=4),Oe(e),null);case 4:return ds(),Iu(t,e),t===null&&Ar(e.stateNode.containerInfo),Oe(e),null;case 10:return Wd(e.type._context),Oe(e),null;case 17:return ot(e.type)&&Nl(),Oe(e),null;case 19:if(ue(fe),r=e.memoizedState,r===null)return Oe(e),null;if(i=(e.flags&128)!==0,o=r.rendering,o===null)if(i)Os(r,!1);else{if(Se!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Rl(t),o!==null){for(e.flags|=128,Os(r,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)r=n,t=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=t,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,t=o.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return re(fe,fe.current&1|2),e.child}t=t.sibling}r.tail!==null&&xe()>fs&&(e.flags|=128,i=!0,Os(r,!1),e.lanes=4194304)}else{if(!i)if(t=Rl(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Os(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!he)return Oe(e),null}else 2*xe()-r.renderingStartTime>fs&&n!==1073741824&&(e.flags|=128,i=!0,Os(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(n=r.last,n!==null?n.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=xe(),e.sibling=null,n=fe.current,re(fe,i?n&1|2:n&1),e):(Oe(e),null);case 22:case 23:return nh(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?ct&1073741824&&(Oe(e),e.subtreeFlags&6&&(e.flags|=8192)):Oe(e),null;case 24:return null;case 25:return null}throw Error(I(156,e.tag))}function Tb(t,e){switch(Od(e),e.tag){case 1:return ot(e.type)&&Nl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ds(),ue(rt),ue(Ue),Vd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ud(e),null;case 13:if(ue(fe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(I(340));cs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ue(fe),null;case 4:return ds(),null;case 10:return Wd(e.type._context),null;case 22:case 23:return nh(),null;case 24:return null;default:return null}}var Ro=!1,We=!1,Ib=typeof WeakSet=="function"?WeakSet:Set,D=null;function Vi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){ge(t,e,i)}else n.current=null}function Mu(t,e,n){try{n()}catch(i){ge(t,e,i)}}var rp=!1;function Mb(t,e){if(fu=Sl,t=j0(),Rd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==r||i!==0&&h.nodeType!==3||(a=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++c===s&&(l=o),f===r&&++d===i&&(a=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(pu={focusedElem:t,selectionRange:n},Sl=!1,D=e;D!==null;)if(e=D,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,D=t;else for(;D!==null;){e=D;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var x=m.memoizedProps,v=m.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?x:At(e.type,x),v);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(b){ge(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,D=t;break}D=e.return}return m=rp,rp=!1,m}function ar(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var r=s.destroy;s.destroy=void 0,r!==void 0&&Mu(e,n,r)}s=s.next}while(s!==i)}}function Ea(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Au(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ty(t){var e=t.alternate;e!==null&&(t.alternate=null,Ty(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Gt],delete e[Pr],delete e[yu],delete e[hb],delete e[fb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Iy(t){return t.tag===5||t.tag===3||t.tag===4}function op(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Iy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ju(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=El));else if(i!==4&&(t=t.child,t!==null))for(ju(t,e,n),t=t.sibling;t!==null;)ju(t,e,n),t=t.sibling}function Pu(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Pu(t,e,n),t=t.sibling;t!==null;)Pu(t,e,n),t=t.sibling}var Ae=null,jt=!1;function vn(t,e,n){for(n=n.child;n!==null;)My(t,e,n),n=n.sibling}function My(t,e,n){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(xa,n)}catch{}switch(n.tag){case 5:We||Vi(n,e);case 6:var i=Ae,s=jt;Ae=null,vn(t,e,n),Ae=i,jt=s,Ae!==null&&(jt?(t=Ae,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ae.removeChild(n.stateNode));break;case 18:Ae!==null&&(jt?(t=Ae,n=n.stateNode,t.nodeType===8?mc(t.parentNode,n):t.nodeType===1&&mc(t,n),Tr(t)):mc(Ae,n.stateNode));break;case 4:i=Ae,s=jt,Ae=n.stateNode.containerInfo,jt=!0,vn(t,e,n),Ae=i,jt=s;break;case 0:case 11:case 14:case 15:if(!We&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&Mu(n,e,o),s=s.next}while(s!==i)}vn(t,e,n);break;case 1:if(!We&&(Vi(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(l){ge(n,e,l)}vn(t,e,n);break;case 21:vn(t,e,n);break;case 22:n.mode&1?(We=(i=We)||n.memoizedState!==null,vn(t,e,n),We=i):vn(t,e,n);break;default:vn(t,e,n)}}function lp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ib),e.forEach(function(i){var s=zb.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function Mt(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var r=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ae=l.stateNode,jt=!1;break e;case 3:Ae=l.stateNode.containerInfo,jt=!0;break e;case 4:Ae=l.stateNode.containerInfo,jt=!0;break e}l=l.return}if(Ae===null)throw Error(I(160));My(r,o,s),Ae=null,jt=!1;var a=s.alternate;a!==null&&(a.return=null),s.return=null}catch(c){ge(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ay(e,t),e=e.sibling}function Ay(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mt(e,t),$t(t),i&4){try{ar(3,t,t.return),Ea(3,t)}catch(x){ge(t,t.return,x)}try{ar(5,t,t.return)}catch(x){ge(t,t.return,x)}}break;case 1:Mt(e,t),$t(t),i&512&&n!==null&&Vi(n,n.return);break;case 5:if(Mt(e,t),$t(t),i&512&&n!==null&&Vi(n,n.return),t.flags&32){var s=t.stateNode;try{kr(s,"")}catch(x){ge(t,t.return,x)}}if(i&4&&(s=t.stateNode,s!=null)){var r=t.memoizedProps,o=n!==null?n.memoizedProps:r,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&r.type==="radio"&&r.name!=null&&Jg(s,r),iu(l,o);var c=iu(l,r);for(o=0;o<a.length;o+=2){var d=a[o],h=a[o+1];d==="style"?s0(s,h):d==="dangerouslySetInnerHTML"?n0(s,h):d==="children"?kr(s,h):bd(s,d,h,c)}switch(l){case"input":Zc(s,r);break;case"textarea":e0(s,r);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?qi(s,!!r.multiple,p,!1):f!==!!r.multiple&&(r.defaultValue!=null?qi(s,!!r.multiple,r.defaultValue,!0):qi(s,!!r.multiple,r.multiple?[]:"",!1))}s[Pr]=r}catch(x){ge(t,t.return,x)}}break;case 6:if(Mt(e,t),$t(t),i&4){if(t.stateNode===null)throw Error(I(162));s=t.stateNode,r=t.memoizedProps;try{s.nodeValue=r}catch(x){ge(t,t.return,x)}}break;case 3:if(Mt(e,t),$t(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Tr(e.containerInfo)}catch(x){ge(t,t.return,x)}break;case 4:Mt(e,t),$t(t);break;case 13:Mt(e,t),$t(t),s=t.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(eh=xe())),i&4&&lp(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(We=(c=We)||d,Mt(e,t),We=c):Mt(e,t),$t(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(D=t,d=t.child;d!==null;){for(h=D=d;D!==null;){switch(f=D,p=f.child,f.tag){case 0:case 11:case 14:case 15:ar(4,f,f.return);break;case 1:Vi(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(x){ge(i,n,x)}}break;case 5:Vi(f,f.return);break;case 22:if(f.memoizedState!==null){cp(h);continue}}p!==null?(p.return=f,D=p):cp(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(l=h.stateNode,a=h.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=i0("display",o))}catch(x){ge(t,t.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(x){ge(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Mt(e,t),$t(t),i&4&&lp(t);break;case 21:break;default:Mt(e,t),$t(t)}}function $t(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Iy(n)){var i=n;break e}n=n.return}throw Error(I(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(kr(s,""),i.flags&=-33);var r=op(t);Pu(t,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,l=op(t);ju(t,l,o);break;default:throw Error(I(161))}}catch(a){ge(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ab(t,e,n){D=t,jy(t)}function jy(t,e,n){for(var i=(t.mode&1)!==0;D!==null;){var s=D,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||Ro;if(!o){var l=s.alternate,a=l!==null&&l.memoizedState!==null||We;l=Ro;var c=We;if(Ro=o,(We=a)&&!c)for(D=s;D!==null;)o=D,a=o.child,o.tag===22&&o.memoizedState!==null?up(s):a!==null?(a.return=o,D=a):up(s);for(;r!==null;)D=r,jy(r),r=r.sibling;D=s,Ro=l,We=c}ap(t)}else s.subtreeFlags&8772&&r!==null?(r.return=s,D=r):ap(t)}}function ap(t){for(;D!==null;){var e=D;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:We||Ea(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!We)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:At(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&Yf(e,r,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Yf(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Tr(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}We||e.flags&512&&Au(e)}catch(f){ge(e,e.return,f)}}if(e===t){D=null;break}if(n=e.sibling,n!==null){n.return=e.return,D=n;break}D=e.return}}function cp(t){for(;D!==null;){var e=D;if(e===t){D=null;break}var n=e.sibling;if(n!==null){n.return=e.return,D=n;break}D=e.return}}function up(t){for(;D!==null;){var e=D;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ea(4,e)}catch(a){ge(e,n,a)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(a){ge(e,s,a)}}var r=e.return;try{Au(e)}catch(a){ge(e,r,a)}break;case 5:var o=e.return;try{Au(e)}catch(a){ge(e,o,a)}}}catch(a){ge(e,e.return,a)}if(e===t){D=null;break}var l=e.sibling;if(l!==null){l.return=e.return,D=l;break}D=e.return}}var jb=Math.ceil,Ll=xn.ReactCurrentDispatcher,Zd=xn.ReactCurrentOwner,kt=xn.ReactCurrentBatchConfig,K=0,Ie=null,ve=null,je=0,ct=0,Yi=Qn(0),Se=0,zr=null,vi=0,Na=0,Jd=0,cr=null,et=null,eh=0,fs=1/0,nn=null,Fl=!1,Ru=null,Dn=null,Do=!1,Tn=null,zl=0,ur=0,Du=null,ul=-1,dl=0;function Qe(){return K&6?xe():ul!==-1?ul:ul=xe()}function On(t){return t.mode&1?K&2&&je!==0?je&-je:mb.transition!==null?(dl===0&&(dl=g0()),dl):(t=Z,t!==0||(t=window.event,t=t===void 0?16:S0(t.type)),t):1}function zt(t,e,n,i){if(50<ur)throw ur=0,Du=null,Error(I(185));to(t,n,i),(!(K&2)||t!==Ie)&&(t===Ie&&(!(K&2)&&(Na|=n),Se===4&&En(t,je)),lt(t,i),n===1&&K===0&&!(e.mode&1)&&(fs=xe()+500,Sa&&Xn()))}function lt(t,e){var n=t.callbackNode;m1(t,e);var i=wl(t,t===Ie?je:0);if(i===0)n!==null&&_f(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&_f(n),e===1)t.tag===0?pb(dp.bind(null,t)):H0(dp.bind(null,t)),ub(function(){!(K&6)&&Xn()}),n=null;else{switch(y0(i)){case 1:n=Ed;break;case 4:n=p0;break;case 16:n=bl;break;case 536870912:n=m0;break;default:n=bl}n=Wy(n,Py.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Py(t,e){if(ul=-1,dl=0,K&6)throw Error(I(327));var n=t.callbackNode;if(es()&&t.callbackNode!==n)return null;var i=wl(t,t===Ie?je:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Wl(t,i);else{e=i;var s=K;K|=2;var r=Dy();(Ie!==t||je!==e)&&(nn=null,fs=xe()+500,pi(t,e));do try{Db();break}catch(l){Ry(t,l)}while(!0);zd(),Ll.current=r,K=s,ve!==null?e=0:(Ie=null,je=0,e=Se)}if(e!==0){if(e===2&&(s=au(t),s!==0&&(i=s,e=Ou(t,s))),e===1)throw n=zr,pi(t,0),En(t,i),lt(t,xe()),n;if(e===6)En(t,i);else{if(s=t.current.alternate,!(i&30)&&!Pb(s)&&(e=Wl(t,i),e===2&&(r=au(t),r!==0&&(i=r,e=Ou(t,r))),e===1))throw n=zr,pi(t,0),En(t,i),lt(t,xe()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(I(345));case 2:ii(t,et,nn);break;case 3:if(En(t,i),(i&130023424)===i&&(e=eh+500-xe(),10<e)){if(wl(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){Qe(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=gu(ii.bind(null,t,et,nn),e);break}ii(t,et,nn);break;case 4:if(En(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var o=31-Ft(i);r=1<<o,o=e[o],o>s&&(s=o),i&=~r}if(i=s,i=xe()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*jb(i/1960))-i,10<i){t.timeoutHandle=gu(ii.bind(null,t,et,nn),i);break}ii(t,et,nn);break;case 5:ii(t,et,nn);break;default:throw Error(I(329))}}}return lt(t,xe()),t.callbackNode===n?Py.bind(null,t):null}function Ou(t,e){var n=cr;return t.current.memoizedState.isDehydrated&&(pi(t,e).flags|=256),t=Wl(t,e),t!==2&&(e=et,et=n,e!==null&&Lu(e)),t}function Lu(t){et===null?et=t:et.push.apply(et,t)}function Pb(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!Bt(r(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function En(t,e){for(e&=~Jd,e&=~Na,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ft(e),i=1<<n;t[n]=-1,e&=~i}}function dp(t){if(K&6)throw Error(I(327));es();var e=wl(t,0);if(!(e&1))return lt(t,xe()),null;var n=Wl(t,e);if(t.tag!==0&&n===2){var i=au(t);i!==0&&(e=i,n=Ou(t,i))}if(n===1)throw n=zr,pi(t,0),En(t,e),lt(t,xe()),n;if(n===6)throw Error(I(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ii(t,et,nn),lt(t,xe()),null}function th(t,e){var n=K;K|=1;try{return t(e)}finally{K=n,K===0&&(fs=xe()+500,Sa&&Xn())}}function bi(t){Tn!==null&&Tn.tag===0&&!(K&6)&&es();var e=K;K|=1;var n=kt.transition,i=Z;try{if(kt.transition=null,Z=1,t)return t()}finally{Z=i,kt.transition=n,K=e,!(K&6)&&Xn()}}function nh(){ct=Yi.current,ue(Yi)}function pi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,cb(n)),ve!==null)for(n=ve.return;n!==null;){var i=n;switch(Od(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Nl();break;case 3:ds(),ue(rt),ue(Ue),Vd();break;case 5:Ud(i);break;case 4:ds();break;case 13:ue(fe);break;case 19:ue(fe);break;case 10:Wd(i.type._context);break;case 22:case 23:nh()}n=n.return}if(Ie=t,ve=t=Ln(t.current,null),je=ct=e,Se=0,zr=null,Jd=Na=vi=0,et=cr=null,ci!==null){for(e=0;e<ci.length;e++)if(n=ci[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,r=n.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}n.pending=i}ci=null}return t}function Ry(t,e){do{var n=ve;try{if(zd(),ll.current=Ol,Dl){for(var i=pe.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Dl=!1}if(_i=0,Ce=be=pe=null,lr=!1,Or=0,Zd.current=null,n===null||n.return===null){Se=1,zr=e,ve=null;break}e:{var r=t,o=n.return,l=n,a=e;if(e=je,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Zf(o);if(p!==null){p.flags&=-257,Jf(p,o,l,r,e),p.mode&1&&Xf(r,c,e),e=p,a=c;var m=e.updateQueue;if(m===null){var x=new Set;x.add(a),e.updateQueue=x}else m.add(a);break e}else{if(!(e&1)){Xf(r,c,e),ih();break e}a=Error(I(426))}}else if(he&&l.mode&1){var v=Zf(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Jf(v,o,l,r,e),Ld(hs(a,l));break e}}r=a=hs(a,l),Se!==4&&(Se=2),cr===null?cr=[r]:cr.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var g=yy(r,a,e);Vf(r,g);break e;case 1:l=a;var y=r.type,_=r.stateNode;if(!(r.flags&128)&&(typeof y.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Dn===null||!Dn.has(_)))){r.flags|=65536,e&=-e,r.lanes|=e;var b=xy(r,l,e);Vf(r,b);break e}}r=r.return}while(r!==null)}Ly(n)}catch(w){e=w,ve===n&&n!==null&&(ve=n=n.return);continue}break}while(!0)}function Dy(){var t=Ll.current;return Ll.current=Ol,t===null?Ol:t}function ih(){(Se===0||Se===3||Se===2)&&(Se=4),Ie===null||!(vi&268435455)&&!(Na&268435455)||En(Ie,je)}function Wl(t,e){var n=K;K|=2;var i=Dy();(Ie!==t||je!==e)&&(nn=null,pi(t,e));do try{Rb();break}catch(s){Ry(t,s)}while(!0);if(zd(),K=n,Ll.current=i,ve!==null)throw Error(I(261));return Ie=null,je=0,Se}function Rb(){for(;ve!==null;)Oy(ve)}function Db(){for(;ve!==null&&!o1();)Oy(ve)}function Oy(t){var e=zy(t.alternate,t,ct);t.memoizedProps=t.pendingProps,e===null?Ly(t):ve=e,Zd.current=null}function Ly(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Tb(n,e),n!==null){n.flags&=32767,ve=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Se=6,ve=null;return}}else if(n=Nb(n,e,ct),n!==null){ve=n;return}if(e=e.sibling,e!==null){ve=e;return}ve=e=t}while(e!==null);Se===0&&(Se=5)}function ii(t,e,n){var i=Z,s=kt.transition;try{kt.transition=null,Z=1,Ob(t,e,n,i)}finally{kt.transition=s,Z=i}return null}function Ob(t,e,n,i){do es();while(Tn!==null);if(K&6)throw Error(I(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(I(177));t.callbackNode=null,t.callbackPriority=0;var r=n.lanes|n.childLanes;if(g1(t,r),t===Ie&&(ve=Ie=null,je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Do||(Do=!0,Wy(bl,function(){return es(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=kt.transition,kt.transition=null;var o=Z;Z=1;var l=K;K|=4,Zd.current=null,Mb(t,n),Ay(n,t),nb(pu),Sl=!!fu,pu=fu=null,t.current=n,Ab(n),l1(),K=l,Z=o,kt.transition=r}else t.current=n;if(Do&&(Do=!1,Tn=t,zl=s),r=t.pendingLanes,r===0&&(Dn=null),u1(n.stateNode),lt(t,xe()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(Fl)throw Fl=!1,t=Ru,Ru=null,t;return zl&1&&t.tag!==0&&es(),r=t.pendingLanes,r&1?t===Du?ur++:(ur=0,Du=t):ur=0,Xn(),null}function es(){if(Tn!==null){var t=y0(zl),e=kt.transition,n=Z;try{if(kt.transition=null,Z=16>t?16:t,Tn===null)var i=!1;else{if(t=Tn,Tn=null,zl=0,K&6)throw Error(I(331));var s=K;for(K|=4,D=t.current;D!==null;){var r=D,o=r.child;if(D.flags&16){var l=r.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(D=c;D!==null;){var d=D;switch(d.tag){case 0:case 11:case 15:ar(8,d,r)}var h=d.child;if(h!==null)h.return=d,D=h;else for(;D!==null;){d=D;var f=d.sibling,p=d.return;if(Ty(d),d===c){D=null;break}if(f!==null){f.return=p,D=f;break}D=p}}}var m=r.alternate;if(m!==null){var x=m.child;if(x!==null){m.child=null;do{var v=x.sibling;x.sibling=null,x=v}while(x!==null)}}D=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,D=o;else e:for(;D!==null;){if(r=D,r.flags&2048)switch(r.tag){case 0:case 11:case 15:ar(9,r,r.return)}var g=r.sibling;if(g!==null){g.return=r.return,D=g;break e}D=r.return}}var y=t.current;for(D=y;D!==null;){o=D;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,D=_;else e:for(o=y;D!==null;){if(l=D,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ea(9,l)}}catch(w){ge(l,l.return,w)}if(l===o){D=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,D=b;break e}D=l.return}}if(K=s,Xn(),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(xa,t)}catch{}i=!0}return i}finally{Z=n,kt.transition=e}}return!1}function hp(t,e,n){e=hs(n,e),e=yy(t,e,1),t=Rn(t,e,1),e=Qe(),t!==null&&(to(t,1,e),lt(t,e))}function ge(t,e,n){if(t.tag===3)hp(t,t,n);else for(;e!==null;){if(e.tag===3){hp(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Dn===null||!Dn.has(i))){t=hs(n,t),t=xy(e,t,1),e=Rn(e,t,1),t=Qe(),e!==null&&(to(e,1,t),lt(e,t));break}}e=e.return}}function Lb(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Qe(),t.pingedLanes|=t.suspendedLanes&n,Ie===t&&(je&n)===n&&(Se===4||Se===3&&(je&130023424)===je&&500>xe()-eh?pi(t,0):Jd|=n),lt(t,e)}function Fy(t,e){e===0&&(t.mode&1?(e=Co,Co<<=1,!(Co&130023424)&&(Co=4194304)):e=1);var n=Qe();t=fn(t,e),t!==null&&(to(t,e,n),lt(t,n))}function Fb(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Fy(t,n)}function zb(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(I(314))}i!==null&&i.delete(e),Fy(t,n)}var zy;zy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||rt.current)nt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return nt=!1,Eb(t,e,n);nt=!!(t.flags&131072)}else nt=!1,he&&e.flags&1048576&&$0(e,Ml,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;cl(t,e),t=e.pendingProps;var s=as(e,Ue.current);Ji(e,n),s=Kd(null,e,i,t,s,n);var r=Gd();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ot(i)?(r=!0,Tl(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Hd(e),s.updater=Ca,e.stateNode=s,s._reactInternals=e,Su(e,i,t,n),e=Eu(null,e,i,!0,r,n)):(e.tag=0,he&&r&&Dd(e),qe(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(cl(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=Bb(i),t=At(i,t),s){case 0:e=Cu(null,e,i,t,n);break e;case 1:e=np(null,e,i,t,n);break e;case 11:e=ep(null,e,i,t,n);break e;case 14:e=tp(null,e,i,At(i.type,t),n);break e}throw Error(I(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:At(i,s),Cu(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:At(i,s),np(t,e,i,s,n);case 3:e:{if(wy(e),t===null)throw Error(I(387));i=e.pendingProps,r=e.memoizedState,s=r.element,q0(t,e),Pl(e,i,null,n);var o=e.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=hs(Error(I(423)),e),e=ip(t,e,i,n,s);break e}else if(i!==s){s=hs(Error(I(424)),e),e=ip(t,e,i,n,s);break e}else for(ut=Pn(e.stateNode.containerInfo.firstChild),dt=e,he=!0,Pt=null,n=K0(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(cs(),i===s){e=pn(t,e,n);break e}qe(t,e,i,n)}e=e.child}return e;case 5:return Q0(e),t===null&&vu(e),i=e.type,s=e.pendingProps,r=t!==null?t.memoizedProps:null,o=s.children,mu(i,s)?o=null:r!==null&&mu(i,r)&&(e.flags|=32),by(t,e),qe(t,e,o,n),e.child;case 6:return t===null&&vu(e),null;case 13:return Sy(t,e,n);case 4:return $d(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=us(e,null,i,n):qe(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:At(i,s),ep(t,e,i,s,n);case 7:return qe(t,e,e.pendingProps,n),e.child;case 8:return qe(t,e,e.pendingProps.children,n),e.child;case 12:return qe(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,o=s.value,re(Al,i._currentValue),i._currentValue=o,r!==null)if(Bt(r.value,o)){if(r.children===s.children&&!rt.current){e=pn(t,e,n);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var l=r.dependencies;if(l!==null){o=r.child;for(var a=l.firstContext;a!==null;){if(a.context===i){if(r.tag===1){a=cn(-1,n&-n),a.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?a.next=a:(a.next=d.next,d.next=a),c.pending=a}}r.lanes|=n,a=r.alternate,a!==null&&(a.lanes|=n),bu(r.return,n,e),l.lanes|=n;break}a=a.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(I(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),bu(o,n,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}qe(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Ji(e,n),s=Ct(s),i=i(s),e.flags|=1,qe(t,e,i,n),e.child;case 14:return i=e.type,s=At(i,e.pendingProps),s=At(i.type,s),tp(t,e,i,s,n);case 15:return _y(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:At(i,s),cl(t,e),e.tag=1,ot(i)?(t=!0,Tl(e)):t=!1,Ji(e,n),gy(e,i,s),Su(e,i,s,n),Eu(null,e,i,!0,t,n);case 19:return ky(t,e,n);case 22:return vy(t,e,n)}throw Error(I(156,e.tag))};function Wy(t,e){return f0(t,e)}function Wb(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(t,e,n,i){return new Wb(t,e,n,i)}function sh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Bb(t){if(typeof t=="function")return sh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Sd)return 11;if(t===kd)return 14}return 2}function Ln(t,e){var n=t.alternate;return n===null?(n=bt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function hl(t,e,n,i,s,r){var o=2;if(i=t,typeof t=="function")sh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Oi:return mi(n.children,s,r,e);case wd:o=8,s|=8;break;case Kc:return t=bt(12,n,e,s|2),t.elementType=Kc,t.lanes=r,t;case Gc:return t=bt(13,n,e,s),t.elementType=Gc,t.lanes=r,t;case qc:return t=bt(19,n,e,s),t.elementType=qc,t.lanes=r,t;case Qg:return Ta(n,s,r,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Gg:o=10;break e;case qg:o=9;break e;case Sd:o=11;break e;case kd:o=14;break e;case Sn:o=16,i=null;break e}throw Error(I(130,t==null?t:typeof t,""))}return e=bt(o,n,e,s),e.elementType=t,e.type=i,e.lanes=r,e}function mi(t,e,n,i){return t=bt(7,t,i,e),t.lanes=n,t}function Ta(t,e,n,i){return t=bt(22,t,i,e),t.elementType=Qg,t.lanes=n,t.stateNode={isHidden:!1},t}function Sc(t,e,n){return t=bt(6,t,null,e),t.lanes=n,t}function kc(t,e,n){return e=bt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Hb(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sc(0),this.expirationTimes=sc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sc(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function rh(t,e,n,i,s,r,o,l,a){return t=new Hb(t,e,n,l,a),e===1?(e=1,r===!0&&(e|=8)):e=0,r=bt(3,null,null,e),t.current=r,r.stateNode=t,r.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hd(r),t}function $b(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Di,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function By(t){if(!t)return Vn;t=t._reactInternals;e:{if(Ti(t)!==t||t.tag!==1)throw Error(I(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ot(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(I(171))}if(t.tag===1){var n=t.type;if(ot(n))return B0(t,n,e)}return e}function Hy(t,e,n,i,s,r,o,l,a){return t=rh(n,i,!0,t,s,r,o,l,a),t.context=By(null),n=t.current,i=Qe(),s=On(n),r=cn(i,s),r.callback=e??null,Rn(n,r,s),t.current.lanes=s,to(t,s,i),lt(t,i),t}function Ia(t,e,n,i){var s=e.current,r=Qe(),o=On(s);return n=By(n),e.context===null?e.context=n:e.pendingContext=n,e=cn(r,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Rn(s,e,o),t!==null&&(zt(t,s,o,r),ol(t,s,o)),o}function Bl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function fp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function oh(t,e){fp(t,e),(t=t.alternate)&&fp(t,e)}function Ub(){return null}var $y=typeof reportError=="function"?reportError:function(t){console.error(t)};function lh(t){this._internalRoot=t}Ma.prototype.render=lh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(I(409));Ia(t,e,null,null)};Ma.prototype.unmount=lh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;bi(function(){Ia(null,t,null,null)}),e[hn]=null}};function Ma(t){this._internalRoot=t}Ma.prototype.unstable_scheduleHydration=function(t){if(t){var e=v0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Cn.length&&e!==0&&e<Cn[n].priority;n++);Cn.splice(n,0,t),n===0&&w0(t)}};function ah(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Aa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function pp(){}function Vb(t,e,n,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var c=Bl(o);r.call(c)}}var o=Hy(e,i,t,0,null,!1,!1,"",pp);return t._reactRootContainer=o,t[hn]=o.current,Ar(t.nodeType===8?t.parentNode:t),bi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var l=i;i=function(){var c=Bl(a);l.call(c)}}var a=rh(t,0,!1,null,null,!1,!1,"",pp);return t._reactRootContainer=a,t[hn]=a.current,Ar(t.nodeType===8?t.parentNode:t),bi(function(){Ia(e,a,n,i)}),a}function ja(t,e,n,i,s){var r=n._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var l=s;s=function(){var a=Bl(o);l.call(a)}}Ia(e,o,t,s)}else o=Vb(n,e,t,s,i);return Bl(o)}x0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=qs(e.pendingLanes);n!==0&&(Nd(e,n|1),lt(e,xe()),!(K&6)&&(fs=xe()+500,Xn()))}break;case 13:bi(function(){var i=fn(t,1);if(i!==null){var s=Qe();zt(i,t,1,s)}}),oh(t,1)}};Td=function(t){if(t.tag===13){var e=fn(t,134217728);if(e!==null){var n=Qe();zt(e,t,134217728,n)}oh(t,134217728)}};_0=function(t){if(t.tag===13){var e=On(t),n=fn(t,e);if(n!==null){var i=Qe();zt(n,t,e,i)}oh(t,e)}};v0=function(){return Z};b0=function(t,e){var n=Z;try{return Z=t,e()}finally{Z=n}};ru=function(t,e,n){switch(e){case"input":if(Zc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=wa(i);if(!s)throw Error(I(90));Zg(i),Zc(i,s)}}}break;case"textarea":e0(t,n);break;case"select":e=n.value,e!=null&&qi(t,!!n.multiple,e,!1)}};l0=th;a0=bi;var Yb={usingClientEntryPoint:!1,Events:[io,Wi,wa,r0,o0,th]},Ls={findFiberByHostInstance:ai,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Kb={bundleType:Ls.bundleType,version:Ls.version,rendererPackageName:Ls.rendererPackageName,rendererConfig:Ls.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=d0(t),t===null?null:t.stateNode},findFiberByHostInstance:Ls.findFiberByHostInstance||Ub,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oo.isDisabled&&Oo.supportsFiber)try{xa=Oo.inject(Kb),qt=Oo}catch{}}pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yb;pt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ah(e))throw Error(I(200));return $b(t,e,null,n)};pt.createRoot=function(t,e){if(!ah(t))throw Error(I(299));var n=!1,i="",s=$y;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=rh(t,1,!1,null,null,n,!1,i,s),t[hn]=e.current,Ar(t.nodeType===8?t.parentNode:t),new lh(e)};pt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(I(188)):(t=Object.keys(t).join(","),Error(I(268,t)));return t=d0(e),t=t===null?null:t.stateNode,t};pt.flushSync=function(t){return bi(t)};pt.hydrate=function(t,e,n){if(!Aa(e))throw Error(I(200));return ja(null,t,e,!0,n)};pt.hydrateRoot=function(t,e,n){if(!ah(t))throw Error(I(405));var i=n!=null&&n.hydratedSources||null,s=!1,r="",o=$y;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Hy(e,null,t,1,n??null,s,!1,r,o),t[hn]=e.current,Ar(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ma(e)};pt.render=function(t,e,n){if(!Aa(e))throw Error(I(200));return ja(null,t,e,!1,n)};pt.unmountComponentAtNode=function(t){if(!Aa(t))throw Error(I(40));return t._reactRootContainer?(bi(function(){ja(null,null,t,!1,function(){t._reactRootContainer=null,t[hn]=null})}),!0):!1};pt.unstable_batchedUpdates=th;pt.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Aa(n))throw Error(I(200));if(t==null||t._reactInternals===void 0)throw Error(I(38));return ja(t,e,n,!1,i)};pt.version="18.3.1-next-f1338f8080-20240426";function Uy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Uy)}catch(t){console.error(t)}}Uy(),Ug.exports=pt;var Gb=Ug.exports,Vy,mp=Gb;Vy=mp.createRoot,mp.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),V=(t,e)=>{const n=N.forwardRef(({color:i="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:l="",children:a,...c},d)=>N.createElement("svg",{ref:d,...qb,width:s,height:s,stroke:i,strokeWidth:o?Number(r)*24/Number(s):r,className:["lucide",`lucide-${Qb(t)}`,l].join(" "),...c},[...e.map(([h,f])=>N.createElement(h,f)),...Array.isArray(a)?a:[a]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xb=V("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=V("Anchor",[["path",{d:"M12 22V8",key:"qkxhtm"}],["path",{d:"M5 12H2a10 10 0 0 0 20 0h-3",key:"1hv3nh"}],["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=V("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=V("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=V("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=V("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=V("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=V("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=V("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=V("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=V("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=V("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=V("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=V("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ch=V("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=V("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=V("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=V("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=V("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=V("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=V("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=V("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=V("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=V("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=V("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=V("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=V("Signal",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=V("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=V("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=V("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=V("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=V("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=V("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=V("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=V("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),fw=({activeMethod:t,onMethodChange:e,isTransparent:n=!1})=>{const[i,s]=N.useState(!1),[r,o]=N.useState(!1);N.useEffect(()=>{const d=()=>{window.scrollY>100?o(!0):o(!1)};return window.addEventListener("scroll",d),()=>window.removeEventListener("scroll",d)},[]);const l=[{id:"home",label:"Home",icon:Gy},{id:"single-point",label:"Single Point",icon:Qy},{id:"multi-point",label:"Multi Point",icon:Xy},{id:"about",label:"About Us",icon:ch},{id:"contact",label:"Contact Us",icon:$l}],a=()=>{s(!i)},c=`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${n?r?"bg-white/95 backdrop-blur-sm shadow-lg":"bg-white/10 backdrop-blur-sm":"bg-white shadow-lg border-b border-gray-200"}`;return u.jsx("nav",{className:c,children:u.jsxs("div",{className:"container mx-auto px-4",children:[u.jsxs("div",{className:"flex items-center justify-between h-20",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Ra,{className:`h-8 w-8 ${n&&!r?"text-white":"text-blue-600"}`}),u.jsx("h1",{className:`text-xl font-bold ${n&&!r?"text-white":"text-gray-900"}`,children:"UWB Localization System"})]}),u.jsx("div",{className:"md:hidden",children:u.jsx("button",{onClick:a,className:`${n&&!r?"text-white hover:text-gray-200":"text-gray-700 hover:text-blue-600"} focus:outline-none`,children:i?u.jsx(hw,{className:"h-6 w-6"}):u.jsx(ow,{className:"h-6 w-6"})})}),u.jsx("div",{className:"hidden md:flex space-x-4",children:l.map(d=>u.jsxs("button",{onClick:d.onClick||(()=>{typeof d.id=="string"&&["home","single-point","multi-point","about","contact"].includes(d.id)&&e(d.id)}),className:`
                  flex items-center space-x-2 px-4 py-2 rounded-lg transition-all duration-200
                  ${t===d.id?n&&!r?"bg-white/20 text-white":"bg-blue-600 text-white shadow-md":n&&!r?"text-white hover:bg-white/10":"text-gray-700 hover:bg-gray-100 hover:text-blue-600"}
                `,children:[u.jsx(d.icon,{className:"h-4 w-4"}),u.jsx("span",{className:"font-medium",children:d.label})]},d.id))})]}),i&&u.jsx("div",{className:`md:hidden py-2 pb-4 ${n&&!r?"border-t border-white/20 bg-white/25 backdrop-blur-md":"border-t border-gray-200 bg-white"}`,children:l.map(d=>u.jsxs("button",{onClick:()=>{d.onClick?d.onClick():typeof d.id=="string"&&["home","single-point","multi-point","about","contact"].includes(d.id)&&e(d.id),s(!1)},className:`
                  flex items-center space-x-2 px-4 py-3 w-full
                  ${t===d.id?n&&!r?"bg-white/20 text-white":"bg-blue-600 text-white":n&&!r?"text-white hover:bg-white/10":"text-gray-700 hover:bg-gray-100 hover:text-blue-600"}
                `,children:[u.jsx(d.icon,{className:"h-4 w-4"}),u.jsx("span",{className:"font-medium",children:d.label})]},d.id))})]})})},pw=({onMethodChange:t})=>{const e=new Date().getFullYear(),n=[{name:"Home",method:"home",icon:Gy},{name:"Single Point",method:"single-point",icon:Qy},{name:"Multi Point",method:"multi-point",icon:Xy},{name:"About Us",method:"about",icon:ch},{name:"Contact Us",method:"contact",icon:$l}],i=[{name:"Documentation",href:"#"},{name:"API Reference",href:"#"},{name:"Research Papers",href:"#"},{name:"GitHub Repository",href:"#"}],s=[{name:"GitHub",href:"#",icon:iw},{name:"LinkedIn",href:"#",icon:rw},{name:"Twitter",href:"#",icon:uw}];return u.jsx("footer",{className:"bg-gray-900 text-gray-300",children:u.jsxs("div",{className:"container mx-auto px-4 py-12",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center",children:u.jsx("span",{className:"text-white font-bold text-lg",children:"UL"})}),u.jsx("h3",{className:"text-xl font-bold text-white",children:"UWB Localization"})]}),u.jsx("p",{className:"text-sm",children:"Pioneering next-generation indoor positioning technology with sub-centimeter accuracy using Ultra-Wideband radio technology enhanced by machine learning algorithms."}),u.jsx("div",{className:"flex space-x-4 pt-2",children:s.map(r=>u.jsx("a",{href:r.href,className:"text-gray-400 hover:text-white transition-colors","aria-label":r.name,children:u.jsx(r.icon,{size:20})},r.name))})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Navigation"}),u.jsx("ul",{className:"space-y-2",children:n.map(r=>u.jsx("li",{children:u.jsxs("button",{onClick:()=>t(r.method),className:"flex items-center space-x-2 text-gray-400 hover:text-white transition-colors",children:[u.jsx(r.icon,{size:16}),u.jsx("span",{children:r.name})]})},r.name))})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Resources"}),u.jsx("ul",{className:"space-y-2",children:i.map(r=>u.jsx("li",{children:u.jsx("a",{href:r.href,className:"text-gray-400 hover:text-white transition-colors",children:r.name})},r.name))})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Contact"}),u.jsxs("ul",{className:"space-y-3",children:[u.jsxs("li",{className:"flex items-start space-x-3",children:[u.jsx(qy,{size:18,className:"text-gray-400 mt-1 flex-shrink-0"}),u.jsx("span",{children:"Tharsant884@gmail.com"})]}),u.jsxs("li",{className:"flex items-start space-x-3",children:[u.jsx($l,{size:18,className:"text-gray-400 mt-1 flex-shrink-0"}),u.jsx("span",{children:"+94 707373748"})]}),u.jsx("li",{className:"flex items-start space-x-3 mt-4",children:u.jsx("button",{onClick:()=>t("contact"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Get in Touch"})})]})]})]}),u.jsxs("div",{className:"border-t border-gray-800 mt-12 pt-6 flex flex-col md:flex-row justify-between items-center",children:[u.jsxs("p",{className:"text-sm text-gray-400",children:[" ",e," UWB Localization System. All rights reserved."]}),u.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[u.jsx("a",{href:"#",className:"text-sm text-gray-400 hover:text-white transition-colors",children:"Privacy Policy"}),u.jsx("a",{href:"#",className:"text-sm text-gray-400 hover:text-white transition-colors",children:"Terms of Service"}),u.jsx("a",{href:"#",className:"text-sm text-gray-400 hover:text-white transition-colors",children:"Cookie Policy"})]})]})]})})},Lo=["/UWBLocalization/Tharsan.mp4"];console.log("/UWBLocalization/");const _p=()=>{const t=N.useRef(null),[e,n]=N.useState(0),[i,s]=N.useState(!1);N.useEffect(()=>{const c=Math.floor(Math.random()*Lo.length);n(c)},[]),N.useEffect(()=>{const c=t.current;if(!c)return;const d=()=>{s(!0),setTimeout(()=>{n(h=>(h+1)%Lo.length),s(!1)},1e3)};return c.addEventListener("ended",d),()=>c.removeEventListener("ended",d)},[e]);const r=[{name:"Kalman Filtering",icon:Zy,description:"Advanced algorithm for motion tracking and noise reduction"},{name:"Machine Learning",icon:ew,description:"Neural networks that enhance positioning accuracy"},{name:"Real-time Visualization",icon:Yy,description:"Interactive 3D visualization of positioning data"}],o=["Sub-centimeter accuracy in indoor environments","Reliable performance in non-line-of-sight conditions","Low power consumption for extended tag battery life","Scalable from small spaces to large industrial facilities","Real-time position updates with minimal latency","Integration with existing building management systems"],l=[{title:"Asset Tracking",icon:Jb,description:"Track high-value assets in hospitals, warehouses, and manufacturing facilities with centimeter-level precision."},{title:"Indoor Navigation",icon:Nt,description:"Enable wayfinding in complex indoor environments like airports, shopping malls, and large office buildings."},{title:"Robotics & Automation",icon:Ky,description:"Provide precise positioning data for autonomous robots, drones, and automated guided vehicles."},{title:"Safety & Security",icon:lw,description:"Monitor restricted areas, track personnel in hazardous environments, and enhance emergency response."}],a=c=>{const d=document.getElementById(c);d&&d.scrollIntoView({behavior:"smooth",block:"start"})};return u.jsxs("div",{className:"w-full",children:[u.jsxs("div",{className:"relative w-full h-screen overflow-hidden",id:"hero",children:[u.jsxs("video",{ref:t,className:`absolute top-0 left-0 w-full h-full object-cover transition-opacity duration-1000 ${i?"opacity-0":"opacity-100"}`,autoPlay:!0,muted:!0,playsInline:!0,children:[u.jsx("source",{src:Lo[e],type:"video/mp4"}),"Your browser does not support the video tag."]},Lo[e]),u.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-b from-black via-black/70 to-blue-900/50 z-10"}),u.jsxs("div",{className:"relative z-20 flex flex-col items-center justify-center h-full text-white text-center px-4 pt-16",children:[u.jsx("div",{className:"inline-block bg-blue-600 text-white text-sm font-medium px-4 py-1 rounded-full mb-6",children:"Next-Generation Indoor Positioning"}),u.jsxs("h1",{className:"text-5xl md:text-7xl font-bold mb-6 drop-shadow-lg",children:["UWB Indoor ",u.jsx("span",{className:"text-blue-400",children:"Localization"})]}),u.jsx("p",{className:"text-xl md:text-2xl max-w-3xl mb-10 drop-shadow-md",children:"High-precision, real-time positioning using cutting-edge Ultra-Wideband technology"}),u.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[u.jsx("a",{href:"#technologies",className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-lg font-medium transition shadow-lg hover:shadow-xl",children:"Explore Features"}),u.jsx("a",{href:"#demo",className:"bg-white hover:bg-gray-100 text-blue-600 px-8 py-4 rounded-lg font-medium transition shadow-lg hover:shadow-xl",children:"Watch Demo"})]}),u.jsx("div",{className:"absolute bottom-12 w-full flex justify-center animate-bounce",children:u.jsx("a",{href:"#technologies",className:"text-white",children:u.jsx(gp,{size:40,className:"rotate-90"})})})]})]}),u.jsx("section",{id:"technologies",className:"py-24 px-4 bg-gradient-to-b from-gray-100 to-white scroll-mt-20",children:u.jsxs("div",{className:"max-w-7xl mx-auto",children:[u.jsxs("div",{className:"text-center mb-16",children:[u.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Core Technologies"}),u.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Our system combines cutting-edge technologies to deliver unparalleled indoor positioning accuracy"})]}),u.jsx("div",{className:"flex flex-wrap justify-center gap-3 mb-12",children:[{id:"uwb",label:"UWB Intro"},{id:"twr",label:"TWR Intro"},{id:"tdoa",label:"TDOA Intro"},{id:"aoa",label:"AOA"},{id:"sync",label:"Synchronizations"},{id:"multi-anchor",label:"Multi Anchor Setup"},{id:"single-anchor",label:"Single Anchor Setup"},{id:"chan-est",label:"Chan Estimation"},{id:"kalman",label:"Kalman Improvement"},{id:"ml",label:"ML Effect"},{id:"accuracy",label:"Accuracy Comparison"},{id:"scalability",label:"Scalability"},{id:"power",label:"Power Consumption"},{id:"applications",label:"Applications"}].map(c=>u.jsx("button",{onClick:()=>a(c.id),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-full font-medium transition",type:"button",children:c.label},c.id))}),u.jsxs("div",{id:"uwb",className:"mb-12 max-w-4xl mx-auto text-lg text-gray-700 bg-white rounded-xl shadow p-8",children:[u.jsx("h3",{className:"text-2xl font-semibold text-blue-700 mb-3",children:"What is Ultra-Wideband (UWB)?"}),u.jsx("p",{className:"mb-4",children:"Ultra-Wideband (UWB) is a radio technology that uses very short pulses over a wide frequency spectrum, enabling highly accurate distance measurements and robust wireless communication. Unlike traditional wireless technologies such as Wi-Fi, Bluetooth, or Zigbee, UWB offers:"}),u.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[u.jsx("li",{children:"Superior ranging accuracy (often sub-10cm) due to its wide bandwidth"}),u.jsx("li",{children:"High resistance to multipath and interference, making it ideal for complex indoor environments"}),u.jsx("li",{children:"Low power consumption, suitable for battery-powered tags and devices"}),u.jsx("li",{children:"Minimal impact from obstacles and non-line-of-sight conditions"})]}),u.jsx("p",{children:"These advantages make UWB the preferred choice for next-generation indoor localization, outperforming conventional wireless solutions in precision and reliability."}),u.jsx("div",{className:"mt-8",children:u.jsx("img",{src:"/UWB.jpeg",alt:"Ultra-Wideband Illustration",className:"w-full h-auto object-contain rounded-lg"})})]}),u.jsxs("div",{id:"twr",className:"mb-12 max-w-4xl mx-auto text-lg text-gray-700 bg-white rounded-xl shadow p-8",children:[u.jsx("h3",{className:"text-2xl font-semibold text-blue-700 mb-3",children:"Two Way Ranging(TWR) "}),u.jsxs("p",{className:"mb-4",children:[u.jsx("b",{children:"TWR"})," is a method where two UWB devices exchange messages to measure the round-trip time of signals. By calculating the time it takes for a signal to travel to a responder and back, the distance between devices can be determined with high precision."]}),u.jsxs("p",{children:[u.jsx("b",{children:"TWR-based indoor localization"})," involves a mobile tag performing TWR with multiple fixed anchors. By measuring distances to several anchors, the tag's position can be estimated using trilateration. TWR is simple, robust, and well-suited for scenarios with a moderate number of devices."]})]}),u.jsxs("div",{id:"tdoa",className:"mb-12 max-w-4xl mx-auto text-lg text-gray-700 bg-white rounded-xl shadow p-8",children:[u.jsx("h3",{className:"text-2xl font-semibold text-blue-700 mb-3",children:"Time Difference of Arrival(TDOA) "}),u.jsxs("p",{className:"mb-4",children:[u.jsx("b",{children:"TDOA"})," is a technique where a tag transmits a signal received by multiple anchors. Each anchor records the arrival time, and the differences in arrival times are used to compute the tag's position."]}),u.jsxs("p",{children:[u.jsx("b",{children:"TDOA-based indoor localization"})," enables real-time tracking of many tags simultaneously, as tags only need to transmit and do not require two-way communication. This method is highly scalable and suitable for large deployments."]})]}),u.jsxs("div",{id:"aoa",className:"mb-12 max-w-4xl mx-auto text-lg text-gray-700 bg-white rounded-xl shadow p-8",children:[u.jsx("h3",{className:"text-2xl font-semibold text-blue-700 mb-3",children:"Angle of Arrival (AOA)"}),u.jsx("p",{className:"mb-4",children:"AOA is a technique used to determine the direction from which a signal arrives at a receiver. In our system, we utilize time difference measurements between anchors to estimate the angle. This allows us to calculate the bearing line along which the tag must lie."}),u.jsxs("p",{className:"mb-4",children:["An AOA measurement ",u.jsx("b",{children:""})," (relative to the baseline midpoint ",u.jsxs("b",{children:["M = (A",u.jsx("sub",{children:"0"})," + A",u.jsx("sub",{children:"1"}),")/2"]}),") tells you the tag lies on the ray:"]}),u.jsx("div",{className:"bg-gray-50 rounded p-4 my-4 text-center",children:u.jsxs("span",{className:"text-lg font-mono",children:["P(t) = M + t",u.jsxs("span",{style:{fontFamily:"serif"},children:["(",u.jsxs("span",{style:{display:"inline-block",verticalAlign:"middle"},children:[u.jsx("span",{style:{borderRight:"1px solid #333",paddingRight:4},children:"sin"}),u.jsx("span",{style:{paddingLeft:4},children:"cos"})]}),")"]}),",  t  0"]})}),u.jsx("p",{children:"This means the tag's position is constrained to a straight line originating from the midpoint between the anchors, extending in the direction of the measured angle."}),u.jsx("div",{className:"mt-10 flex justify-center",children:u.jsxs("div",{className:"relative group w-full max-w-md",children:[u.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-br from-blue-400 via-pink-200 to-purple-400 opacity-30 blur-lg group-hover:opacity-50 transition"}),u.jsx("img",{src:"/aoa_arrow.png",alt:"AOA Arrow Graph",className:"relative z-10 w-full rounded-xl shadow-lg border-4 border-white group-hover:scale-105 transition-transform duration-300"}),u.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 bg-white/80 text-blue-700 px-4 py-1 rounded-full text-sm font-semibold shadow group-hover:bg-blue-100 transition",children:"AOA Visualization"})]})})]}),u.jsxs("div",{id:"sync",className:"mb-12 max-w-4xl mx-auto text-lg text-gray-700 bg-white rounded-xl shadow p-8",children:[u.jsx("h3",{className:"text-2xl font-semibold text-blue-700 mb-3",children:"Synchronizations"}),u.jsxs("p",{className:"mb-4",children:["Synchronization is essential for accurate indoor localization, ensuring that all anchors share a common time reference. There are two main synchronization methods: ",u.jsx("b",{children:"wired"})," and ",u.jsx("b",{children:"wireless"}),". In this project, we use the wireless method because it is more feasible and user-friendly, and it supports both single-point and multi-point localization setups."]}),u.jsxs("p",{className:"mb-4",children:["Wireless synchronization can be implemented in two ways:",u.jsxs("ul",{className:"list-disc pl-6 my-2",children:[u.jsxs("li",{children:[u.jsx("b",{children:"Continuous Periodic Pulse Method:"})," Anchors synchronize using regular timing pulses. This method is illustrated in the figure below, where a master anchor periodically broadcasts its local time to slave anchors, which record the time of arrival (ToA) and synchronize accordingly.",u.jsx("div",{className:"mt-4 flex justify-center",children:u.jsx("img",{src:"/sync_method.png",alt:"Wireless Synchronization Methodology",className:"w-full max-w-xl rounded-xl shadow-lg border-4 border-white"})}),u.jsx("div",{className:"text-center text-gray-500 text-sm mt-2",children:"Wireless synchronization methodology: Master anchor broadcasts local time, slave anchors record ToA."})]}),u.jsxs("li",{className:"mt-8",children:[u.jsx("b",{children:"Offset Method:"})," Anchors synchronize by exchanging packets containing their local time and calculating the time offset between devices. In our system, we use the offset method because it offers better accuracy and reliability compared to the periodic pulse method.",u.jsx("div",{className:"mt-4 flex justify-center",children:u.jsx("img",{src:"/Smart Indoor Tracking with UWB.png",alt:"Offset Synchronization Example",className:"w-full max-w-xl rounded-xl shadow-lg border-4 border-white"})}),u.jsx("div",{className:"text-center text-gray-500 text-sm mt-2",children:"Offset synchronization example: Smart indoor tracking with UWB."})]})]})]}),u.jsx("p",{className:"mt-6",children:"By using wireless offset synchronization, our system achieves robust and scalable time alignment across all anchors, enabling precise localization in dynamic environments."})]}),u.jsxs("div",{id:"multi-anchor",className:"mb-12 max-w-4xl mx-auto text-lg text-gray-700 bg-white rounded-xl shadow p-8",children:[u.jsx("h3",{className:"text-2xl font-semibold text-blue-700 mb-3",children:"Multi Anchor Setup"}),u.jsx("p",{className:"mb-4",children:"Our multi-anchor setup is designed to provide reasonable accuracy for indoor localization while maintaining low power consumption. In this configuration, three base stations (anchors) are deployed within the environment. The target device transmits signals that are received by all three anchors, allowing the system to use time difference of arrival (TDOA) techniques for position estimation."}),u.jsxs("p",{className:"mb-4",children:["The process involves three main steps:",u.jsxs("ol",{className:"list-decimal pl-6 my-2",children:[u.jsxs("li",{children:[u.jsx("b",{children:"Communication:"})," The target transmits a signal, which is received by three base stations."]}),u.jsxs("li",{children:[u.jsx("b",{children:"Time Difference Calculation:"})," The system calculates the arrival time differences between pairs of anchors."]}),u.jsxs("li",{children:[u.jsx("b",{children:"Hyperbola Creation & Target Location:"})," Each time difference pair creates a hyperbola, and the intersection of these hyperbolas determines the target's location."]})]})]}),u.jsx("div",{className:"mt-8 flex justify-center",children:u.jsxs("div",{className:"relative w-full max-w-xl",children:[u.jsx("img",{src:"/multi_point.png",alt:"Multi Anchor Setup Illustration",className:"w-full rounded-xl shadow-lg border-4 border-white"}),u.jsx("div",{className:"text-center text-gray-500 text-sm mt-2",children:"Multi-point localization with three anchors: Communication, time difference calculation, and hyperbola intersection for reasonable accuracy and low power consumption."})]})}),u.jsx("p",{className:"mt-6",children:"This approach is well-suited for practical indoor environments where energy efficiency and reliable tracking are essential."})]}),u.jsxs("div",{id:"single-anchor",className:"mb-12 max-w-4xl mx-auto text-lg text-gray-700 bg-white rounded-xl shadow p-8",children:[u.jsx("h3",{className:"text-2xl font-semibold text-blue-700 mb-3",children:"Single Point Setup"}),u.jsxs("p",{className:"mb-4",children:["In our single point setup, we use ",u.jsx("b",{children:"wireless synchronization"})," to align timing across all modules. Specifically, we deploy ",u.jsx("b",{children:"three UWB modules"}),":",u.jsxs("ul",{className:"list-disc pl-6 my-2",children:[u.jsxs("li",{children:[u.jsx("b",{children:"Two modules"})," are used to determine the Angle of Arrival (AoA) of the tag signal."]}),u.jsxs("li",{children:[u.jsx("b",{children:"One module"})," is used to find the hyperbola using Time Difference of Arrival (TDOA), which helps estimate the tag's position."]})]}),"This combination of AoA and TDOA enables reasonable accuracy for indoor localization while maintaining low power consumption."]}),u.jsx("p",{children:"The single point setup is suitable for scenarios where deploying multiple anchors is challenging, and it offers a cost-effective solution for accurate indoor tracking."})]}),u.jsxs("div",{id:"chan-est",className:"mb-12 max-w-4xl mx-auto text-lg text-gray-700 bg-white rounded-xl shadow p-8",children:[u.jsx("h3",{className:"text-2xl font-semibold text-blue-700 mb-3",children:"Channel Estimation"}),u.jsx("p",{className:"mb-4",children:"Channel estimation is a crucial process in UWB localization systems. It allows the receiver to accurately interpret the transmitted signal by analyzing the channel impulse response, which helps distinguish the direct path from reflected signals. Advanced algorithms, such as the Chan algorithm, are used to mitigate errors caused by multipath propagation and non-line-of-sight conditions. Effective channel estimation improves the reliability and precision of indoor positioning, especially in environments with obstacles and interference."}),u.jsxs("p",{children:["For more details, see: ",u.jsx("a",{href:"https://en.wikipedia.org/wiki/Channel_estimation",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"Channel Estimation (Wikipedia)"})]})]}),u.jsxs("div",{id:"kalman",className:"mb-12 max-w-4xl mx-auto text-lg text-gray-700 bg-white rounded-xl shadow p-8",children:[u.jsx("h3",{className:"text-2xl font-semibold text-blue-700 mb-3",children:"Kalman Improvement"}),u.jsx("p",{className:"mb-4",children:"The Kalman filter is widely used in UWB localization to improve the accuracy of position estimates, especially for moving tags. It combines real-time sensor measurements with a predictive model to filter out noise and compensate for measurement errors. By continuously updating the position estimate as new data arrives, the Kalman filter enables smooth and reliable tracking with centimeter-level accuracy. This approach is particularly effective for dynamic applications such as robotics and asset tracking."}),u.jsxs("p",{children:["Learn more: ",u.jsx("a",{href:"https://en.wikipedia.org/wiki/Kalman_filter",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"Kalman Filter (Wikipedia)"})]})]}),u.jsxs("div",{id:"ml",className:"mb-12 max-w-4xl mx-auto text-lg text-gray-700 bg-white rounded-xl shadow p-8",children:[u.jsx("h3",{className:"text-2xl font-semibold text-blue-700 mb-3",children:"ML Effect"}),u.jsx("p",{className:"mb-4",children:"Machine learning (ML) techniques are increasingly used in UWB localization to enhance accuracy and robustness. ML models can learn complex patterns from signal data, compensate for environmental changes, and improve localization in challenging scenarios. Algorithms such as Gradient Boosting Machines (GBM) and neural networks are used to refine position estimates and reduce errors. Integrating ML with traditional localization methods enables adaptive and intelligent indoor positioning solutions. In our project, we used a Gradient Boosting ML model because it is lightweight and easy to deploy on a server for real-time usage, compared to neural networks."})]}),u.jsxs("div",{id:"accuracy",className:"mb-12 max-w-4xl mx-auto text-lg text-gray-700 bg-white rounded-xl shadow p-8",children:[u.jsx("h3",{className:"text-2xl font-semibold text-blue-700 mb-3",children:"Accuracy Comparison"}),u.jsx("p",{className:"mb-4",children:"UWB localization systems offer superior accuracy compared to traditional indoor positioning technologies such as Wi-Fi, Bluetooth, and RFID. With advanced algorithms like TDOA, AoA, and Kalman filtering, UWB can achieve sub-meter or even centimeter-level precision. In our project, static tag localization using Gradient Boosting Machine (GBM) achieved 92.4% accuracy with a 40 cm error, while dynamic tag localization with Kalman filtering reached centimeter-level accuracy. This high precision makes UWB ideal for applications requiring reliable and detailed location data."}),u.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[u.jsx("li",{children:"UWB (with ML/Kalman): up to centimeter-level accuracy"}),u.jsx("li",{children:"Wi-Fi/Bluetooth: typically 1-5 meters accuracy"}),u.jsx("li",{children:"RFID: typically 1-10 meters accuracy"})]}),u.jsx("p",{children:"The choice of algorithm and system configuration directly impacts the achievable accuracy in different environments."})]}),u.jsxs("div",{id:"scalability",className:"mb-12 max-w-4xl mx-auto text-lg text-gray-700 bg-white rounded-xl shadow p-8",children:[u.jsx("h3",{className:"text-2xl font-semibold text-blue-700 mb-3",children:"Scalability"}),u.jsx("p",{className:"mb-4",children:"Scalability is a key advantage of UWB localization systems. Our solution supports both single-point and multi-point setups, allowing easy expansion from small rooms to large facilities. Wireless synchronization and efficient algorithms enable the addition of more anchors and tags without significant loss of performance or increase in power consumption. The system can handle multiple simultaneous tags and anchors, making it suitable for industrial, commercial, and healthcare environments."}),u.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[u.jsx("li",{children:"Flexible deployment: add more anchors for larger coverage"}),u.jsx("li",{children:"Supports high tag density and real-time tracking"}),u.jsx("li",{children:"Low power consumption for scalable, long-term operation"})]}),u.jsx("p",{children:"This scalability ensures that the UWB localization system can grow with your needs, from small-scale projects to enterprise-level solutions."})]}),u.jsx("div",{id:"power",className:"mb-12 max-w-4xl mx-auto text-lg text-gray-700 bg-white rounded-xl shadow p-8"}),u.jsxs("div",{id:"power",className:"mb-12 max-w-4xl mx-auto text-lg text-gray-700 bg-white rounded-xl shadow p-8",children:[u.jsx("h3",{className:"text-2xl font-semibold text-blue-700 mb-3",children:"Power Consumption"}),u.jsx("p",{className:"mb-4",children:"The power consumption of the UWB localization system was analyzed using both STM32F103 and DWM1000 modules. The tag operates every 3 seconds, transmitting for a short burst and then entering a low-power sleep mode."}),u.jsx("h4",{className:"text-xl font-semibold text-gray-800 mt-6 mb-2",children:" Daily Power Usage Comparison"}),u.jsxs("table",{className:"w-full text-left border-collapse text-sm mb-4",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"bg-blue-100",children:[u.jsx("th",{className:"border p-2",children:"Component"}),u.jsx("th",{className:"border p-2",children:"Power (Wh/day)"}),u.jsx("th",{className:"border p-2",children:"% of Total"})]})}),u.jsxs("tbody",{children:[u.jsxs("tr",{children:[u.jsx("td",{className:"border p-2",children:"STM32F103"}),u.jsx("td",{className:"border p-2",children:"0.16035"}),u.jsx("td",{className:"border p-2",children:"97.72%"})]}),u.jsxs("tr",{children:[u.jsx("td",{className:"border p-2",children:"DWM1000 (TDOA/AOA)"}),u.jsx("td",{className:"border p-2",children:"0.003739"}),u.jsx("td",{className:"border p-2",children:"2.28%"})]}),u.jsxs("tr",{className:"bg-green-50 font-semibold",children:[u.jsx("td",{className:"border p-2",children:"Total"}),u.jsx("td",{className:"border p-2",children:"0.1641"}),u.jsx("td",{className:"border p-2",children:"100%"})]})]})]}),u.jsxs("p",{className:"mb-2",children:["For a 1000mAh, 3.7V battery, this setup can operate for approximately ",u.jsx("strong",{children:"22 days"})," continuously. Notably, the DW1000 module contributes only about ",u.jsx("strong",{children:"2.3%"})," to total consumption, making it highly power efficient."]}),u.jsx("h4",{className:"text-xl font-semibold text-gray-800 mt-6 mb-2",children:" TWR vs TDOA/AOA Method"}),u.jsxs("p",{className:"mb-2",children:["When using the TWR method (2 transmissions and 1 reception per cycle), power consumption increases to",u.jsx("strong",{children:"0.01166 Wh/day"}),", which is almost ",u.jsx("strong",{children:"3x higher"})," than the optimized TDOA/AOA method."]}),u.jsxs("p",{className:"mb-2",children:[u.jsx("span",{className:"font-semibold text-green-700",children:"Power Reduction:"})," TDOA/AOA reduces UWB power usage by ",u.jsx("strong",{children:"68%"})," compared to TWR."]}),u.jsx("p",{className:"mt-4 italic text-sm text-gray-500",children:"Calculations are based on 3-second cycle intervals, 28800 transmissions/day, and measured datasheet values."})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map((c,d)=>u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 hover:shadow-lg transition-shadow border-t-4 border-blue-500",children:[u.jsx("div",{className:"bg-blue-100 w-14 h-14 rounded-lg mb-6 flex items-center justify-center",children:u.jsx(c.icon,{size:28,className:"text-blue-600"})}),u.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-3",children:c.name}),u.jsx("p",{className:"text-gray-600",children:c.description})]},d))})]})}),u.jsx("section",{className:"py-24 px-4 bg-blue-700 text-white",children:u.jsxs("div",{className:"max-w-7xl mx-auto",children:[u.jsxs("div",{className:"text-center mb-16",children:[u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"System Benefits"}),u.jsx("p",{className:"text-xl text-blue-100 max-w-3xl mx-auto",children:"Why our UWB Localization System outperforms other indoor positioning technologies"})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-y-8 gap-x-12",children:o.map((c,d)=>u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"bg-blue-600 rounded-full p-1 mt-1 flex-shrink-0",children:u.jsx(nw,{size:16,className:"text-white"})}),u.jsx("p",{className:"text-lg",children:c})]},d))})]})}),u.jsx("section",{id:"applications",className:"py-24 px-4 bg-white",children:u.jsxs("div",{className:"max-w-7xl mx-auto",children:[u.jsxs("div",{className:"text-center mb-16",children:[u.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Applications"}),u.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Our UWB localization system can be deployed across a wide range of industries and use cases"})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:l.map((c,d)=>u.jsxs("div",{className:"flex bg-gray-50 rounded-xl overflow-hidden shadow-md hover:shadow-lg transition-shadow",children:[u.jsx("div",{className:"w-24 bg-blue-600 flex items-center justify-center flex-shrink-0",children:u.jsx(c.icon,{size:32,className:"text-white"})}),u.jsxs("div",{className:"p-6",children:[u.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-2",children:c.title}),u.jsx("p",{className:"text-gray-600",children:c.description})]})]},d))})]})}),u.jsx("section",{id:"demo",className:"py-24 px-4 bg-gray-900 text-white scroll-mt-20",children:u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"See It In Action"}),u.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto mb-12",children:"Watch how our UWB system performs in real indoor environments with dynamic tag movements"})]}),u.jsx("div",{className:"bg-gray-800 p-2 rounded-xl shadow-2xl overflow-hidden",children:u.jsx("div",{className:"aspect-w-16 aspect-h-9",children:u.jsx("iframe",{className:"w-full h-full rounded-lg",src:"https://www.youtube.com/embed/VIDEO_ID",title:"UWB Localization System Demo",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})}),u.jsx("div",{className:"mt-12 text-center",children:u.jsxs("a",{href:"#contact",className:"inline-flex items-center bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-lg font-medium transition shadow-lg hover:shadow-xl",children:[u.jsx("span",{children:"Request a Demo"}),u.jsx(gp,{size:20,className:"ml-2"})]})})]})}),u.jsx("section",{className:"py-24 px-4 bg-gradient-to-r from-blue-600 to-indigo-700",children:u.jsxs("div",{className:"max-w-5xl mx-auto text-center text-white",children:[u.jsx("h2",{className:"text-4xl font-bold mb-6",children:"Ready to Transform Your Indoor Positioning?"}),u.jsx("p",{className:"text-xl mb-10 max-w-3xl mx-auto",children:"Contact us today to learn how our UWB localization system can address your specific needs with tailored solutions and expert implementation."}),u.jsxs("div",{className:"flex flex-wrap justify-center gap-6",children:[u.jsx("button",{onClick:()=>document.dispatchEvent(new CustomEvent("navigate",{detail:{method:"contact"}})),className:"bg-white text-blue-600 hover:bg-gray-100 px-8 py-4 rounded-lg font-bold transition shadow-lg hover:shadow-xl",children:"Contact Us"}),u.jsx("button",{onClick:()=>document.dispatchEvent(new CustomEvent("navigate",{detail:{method:"about"}})),className:"bg-transparent border-2 border-white text-white hover:bg-white/10 px-8 py-4 rounded-lg font-bold transition",children:"Learn More"})]})]})})]})},vp=({id:t,type:e,position:n,isActive:i})=>u.jsxs("div",{className:"relative flex flex-col items-center",children:[u.jsxs("div",{className:`
        relative w-16 h-16 rounded-lg flex items-center justify-center transition-all duration-300
        ${e==="initiator"?"bg-blue-600 hover:bg-blue-700":"bg-green-600 hover:bg-green-700"}
        ${i?"shadow-lg ring-4 ring-opacity-50":"shadow-md"}
        ${i&&e==="initiator"?"ring-blue-300":""}
        ${i&&e==="responder"?"ring-green-300":""}
      `,children:[i&&u.jsx("div",{className:`
            absolute inset-0 rounded-lg animate-pulse
            ${e==="initiator"?"bg-blue-400":"bg-green-400"}
            opacity-30
          `}),u.jsx("div",{className:"relative z-10",children:e==="initiator"?u.jsx(Ra,{className:"h-8 w-8 text-white"}):u.jsx(dw,{className:"h-8 w-8 text-white"})})]}),u.jsxs("div",{className:"mt-2 text-center",children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:t}),u.jsx("p",{className:"text-xs text-gray-500 capitalize",children:e})]})]}),ro=({metrics:t})=>u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("h3",{className:"text-base font-semibold mb-3",children:"Live Metrics"}),u.jsx("div",{className:"space-y-3",children:t.map((e,n)=>u.jsx("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx(e.icon,{className:"h-4 w-4 text-gray-500"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-xs font-medium text-gray-900 truncate",children:e.label}),u.jsx("p",{className:"text-sm font-bold text-blue-600",children:e.value})]})]})},n))})]}),mw=()=>{const[t,e]=N.useState(2.45),[n,i]=N.useState(-45),[s,r]=N.useState(!1);N.useEffect(()=>{const l=setInterval(()=>{s&&(e(a=>a+(Math.random()-.5)*.1),i(a=>a+(Math.random()-.5)*2))},500);return()=>clearInterval(l)},[s]);const o=[{label:"Distance",value:`${t.toFixed(2)} m`,icon:aw},{label:"Signal Strength",value:`${n.toFixed(1)} dBm`,icon:Ra},{label:"Round Trip Time",value:`${(t*2/299792458*1e9).toFixed(2)} ns`,icon:Hl}];return u.jsx("div",{className:"space-y-6",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Two-Way Ranging (TWR)"}),u.jsx("button",{onClick:()=>r(!s),className:`px-4 py-2 rounded-lg font-medium transition-colors ${s?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"}`,children:s?"Stop Ranging":"Start Ranging"})]}),u.jsxs("div",{className:"flex gap-6",children:[u.jsx("div",{className:"flex-1 space-y-6",children:u.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Localization Area"}),u.jsxs("div",{className:"relative w-full h-96 bg-white rounded-lg border-2 border-gray-200 overflow-hidden",children:[u.jsxs("div",{className:"absolute inset-0 opacity-20",children:[Array.from({length:21},(l,a)=>u.jsx("div",{className:"absolute bg-gray-300 w-px h-full",style:{left:`${a*5}%`}},`v-${a}`)),Array.from({length:17},(l,a)=>u.jsx("div",{className:"absolute bg-gray-300 h-px w-full",style:{top:`${a*6.25}%`}},`h-${a}`))]}),u.jsxs("div",{className:"flex items-center justify-between p-8",children:[u.jsx(vp,{id:"Module A",type:"initiator",position:{x:50,y:50},isActive:s}),u.jsx("div",{className:"flex-1 mx-4",children:u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"h-1 bg-gray-200 rounded-full",children:u.jsx("div",{className:"h-1 bg-blue-600 rounded-full transition-all duration-500",style:{width:s?"100%":"0%"}})}),u.jsxs("div",{className:"absolute top-2 left-1/2 transform -translate-x-1/2 text-sm text-gray-600",children:[t.toFixed(2)," m"]})]})}),u.jsx(vp,{id:"Module B",type:"responder",position:{x:250,y:50},isActive:s})]})]})]})}),u.jsxs("div",{className:"w-80 space-y-4",children:[u.jsx(ro,{metrics:o}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[u.jsx("h3",{className:"text-sm font-semibold mb-2",children:"TWR Process"}),u.jsxs("div",{className:"space-y-1.5 text-xs",children:[u.jsxs("div",{className:"flex items-start space-x-2",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-blue-600 rounded-full mt-1"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:"1. Poll Message"}),u.jsx("p",{className:"text-gray-600",children:"Initiator sends poll message to responder"})]})]}),u.jsxs("div",{className:"flex items-start space-x-2",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-green-600 rounded-full mt-1"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:"2. Response Message"}),u.jsx("p",{className:"text-gray-600",children:"Responder replies with response message"})]})]}),u.jsxs("div",{className:"flex items-start space-x-2",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-purple-600 rounded-full mt-1"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:"3. Final Message"}),u.jsx("p",{className:"text-gray-600",children:"Initiator sends final message with timestamps"})]})]}),u.jsxs("div",{className:"flex items-start space-x-2",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-orange-600 rounded-full mt-1"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:"4. Distance Calculation"}),u.jsx("p",{className:"text-gray-600",children:"Distance = (Round Trip Time  Speed of Light) / 2"})]})]})]})]})]})]})]})})},Oa=({id:t,position:e,color:n,isActive:i})=>u.jsxs("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2",style:{left:e.x,top:e.y},children:[u.jsxs("div",{className:`
        relative w-3 h-3 rounded-full flex items-center justify-center transition-all duration-300
        ${n}
        ${i?"shadow-lg ring-3 ring-opacity-50 ring-gray-300":"shadow-md"}
      `,children:[i&&u.jsx("div",{className:`
            absolute inset-0 rounded-full animate-ping
            ${n}
            opacity-30
          `}),u.jsx(Zb,{className:"h-5 w-5 text-white relative z-10"})]}),u.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-1",children:u.jsx("p",{className:"text-xs font-medium text-gray-900 bg-white px-1 rounded shadow-sm",children:t})})]}),La=({id:t,position:e,isActive:n,color:i="bg-orange-600",opacity:s="opacity-100"})=>u.jsxs("div",{className:`absolute transform -translate-x-1/2 -translate-y-1/2 ${s}`,style:{left:e.x,top:e.y},children:[u.jsxs("div",{className:`
        relative w-4 h-4 rounded-full flex items-center justify-center transition-all duration-300
        ${i}
        ${n?"shadow-lg ring-3 ring-opacity-50 ring-orange-300":"shadow-md"}
      `,children:[n&&u.jsx("div",{className:`
            absolute inset-0 rounded-full animate-pulse
            ${i}
            opacity-30
          `}),u.jsx(Nt,{className:"h-3 w-3 text-white relative z-10"})]}),u.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-1",children:u.jsx("p",{className:"text-xs font-medium text-gray-900 bg-white px-1 rounded shadow-sm",children:t})})]}),gw=()=>{};var bp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M=function(t,e){if(!t)throw Es(e)},Es=function(t){return new Error("Firebase Database ("+Jy.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},yw=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=t[n++],o=t[n++],l=t[n++],a=((s&7)<<18|(r&63)<<12|(o&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(a>>10)),e[i++]=String.fromCharCode(56320+(a&1023))}else{const r=t[n++],o=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return e.join("")},uh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const r=t[s],o=s+1<t.length,l=o?t[s+1]:0,a=s+2<t.length,c=a?t[s+2]:0,d=r>>2,h=(r&3)<<4|l>>4;let f=(l&15)<<2|c>>6,p=c&63;a||(p=64,o||(f=64)),i.push(n[d],n[h],n[f],n[p])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ex(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const r=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,r==null||l==null||c==null||h==null)throw new xw;const f=r<<2|l>>4;if(i.push(f),c!==64){const p=l<<4&240|c>>2;if(i.push(p),h!==64){const m=c<<6&192|h;i.push(m)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tx=function(t){const e=ex(t);return uh.encodeByteArray(e,!0)},Ul=function(t){return tx(t).replace(/\./g,"")},Fu=function(t){try{return uh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(t){return nx(void 0,t)}function nx(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!vw(n)||(t[n]=nx(t[n],e[n]));return t}function vw(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww=()=>bw().__FIREBASE_DEFAULTS__,Sw=()=>{if(typeof process>"u"||typeof bp>"u")return;const t=bp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},kw=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Fu(t[1]);return e&&JSON.parse(e)},ix=()=>{try{return gw()||ww()||Sw()||kw()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Cw=t=>{var e,n;return(n=(e=ix())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Ew=t=>{const e=Cw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},sx=()=>{var t;return(t=ix())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Nw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ul(JSON.stringify(n)),Ul(JSON.stringify(o)),""].join(".")}const dr={};function Iw(){const t={prod:[],emulator:[]};for(const e of Object.keys(dr))dr[e]?t.emulator.push(e):t.prod.push(e);return t}function Mw(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let wp=!1;function Aw(t,e){if(typeof window>"u"||typeof document>"u"||!hh(window.location.host)||dr[t]===e||dr[t]||wp)return;dr[t]=e;function n(f){return`__firebase__banner__${f}`}const i="__firebase__banner",r=Iw().prod.length>0;function o(){const f=document.getElementById(i);f&&f.remove()}function l(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function a(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{wp=!0,o()},f}function d(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=Mw(i),p=n("text"),m=document.getElementById(p)||document.createElement("span"),x=n("learnmore"),v=document.getElementById(x)||document.createElement("a"),g=n("preprendIcon"),y=document.getElementById(g)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const _=f.element;l(_),d(v,x);const b=c();a(y,g),_.append(y,m,v,b),document.body.appendChild(_)}r?(m.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jw())}function Pw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ox(){return Jy.NODE_ADMIN===!0}function Rw(){try{return typeof indexedDB=="object"}catch{return!1}}function Dw(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;e(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="FirebaseError";class oo extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Ow,Object.setPrototypeOf(this,oo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lx.prototype.create)}}class lx{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,r=this.errors[e],o=r?Lw(r,i):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new oo(s,l,i)}}function Lw(t,e){return t.replace(Fw,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const Fw=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(t){return JSON.parse(t)}function Ne(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=function(t){let e={},n={},i={},s="";try{const r=t.split(".");e=Wr(Fu(r[0])||""),n=Wr(Fu(r[1])||""),s=r[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:s}},zw=function(t){const e=ax(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Ww=function(t){const e=ax(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ps(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Sp(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vl(t,e,n){const i={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=e.call(n,t[s],s,t));return i}function Yl(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const r=t[s],o=e[s];if(kp(r)&&kp(o)){if(!Yl(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function kp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)i[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)i[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const f=i[h-3]^i[h-8]^i[h-14]^i[h-16];i[h]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],r=this.chain_[1],o=this.chain_[2],l=this.chain_[3],a=this.chain_[4],c,d;for(let h=0;h<80;h++){h<40?h<20?(c=l^r&(o^l),d=1518500249):(c=r^o^l,d=1859775393):h<60?(c=r&o|l&(r|o),d=2400959708):(c=r^o^l,d=3395469782);const f=(s<<5|s>>>27)+c+a+d+i[h]&4294967295;a=l,l=o,o=(r<<30|r>>>2)&4294967295,r=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+r&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+a&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let s=0;const r=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=i;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(r[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(r),o=0;break}}else for(;s<n;)if(r[o]=e[s],++o,++s,o===this.blockSize){this.compress_(r),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let s=0;s<5;s++)for(let r=24;r>=0;r-=8)e[i]=this.chain_[s]>>r&255,++i;return e}}function cx(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);if(s>=55296&&s<=56319){const r=s-55296;i++,M(i<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(i)-56320;s=65536+(r<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Fa=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(t){return t&&t._delegate?t._delegate:t}class Br{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new dh;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Yw(e))try{this.getOrInitializeService({instanceIdentifier:si})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=si){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=si){return this.instances.has(e)}getOptions(e=si){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);i===l&&o.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(e),this.onInitCallbacks.set(s,r);const o=this.instances.get(s);return o&&e(o,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Vw(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=si){return this.component?this.component.multipleInstances?e:si:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Vw(t){return t===si?void 0:t}function Yw(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Uw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const Gw={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},qw=ie.INFO,Qw={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},Xw=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=Qw[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ux{constructor(e){this.name=e,this._logLevel=qw,this._logHandler=Xw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Gw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const Zw=(t,e)=>e.some(n=>t instanceof n);let Cp,Ep;function Jw(){return Cp||(Cp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eS(){return Ep||(Ep=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dx=new WeakMap,zu=new WeakMap,hx=new WeakMap,Ec=new WeakMap,fh=new WeakMap;function tS(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{n(Fn(t.result)),s()},o=()=>{i(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&dx.set(n,t)}).catch(()=>{}),fh.set(e,t),e}function nS(t){if(zu.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{n(),s()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});zu.set(t,e)}let Wu={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return zu.get(t);if(e==="objectStoreNames")return t.objectStoreNames||hx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function iS(t){Wu=t(Wu)}function sS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Nc(this),e,...n);return hx.set(i,e.sort?e.sort():[e]),Fn(i)}:eS().includes(t)?function(...e){return t.apply(Nc(this),e),Fn(dx.get(this))}:function(...e){return Fn(t.apply(Nc(this),e))}}function rS(t){return typeof t=="function"?sS(t):(t instanceof IDBTransaction&&nS(t),Zw(t,Jw())?new Proxy(t,Wu):t)}function Fn(t){if(t instanceof IDBRequest)return tS(t);if(Ec.has(t))return Ec.get(t);const e=rS(t);return e!==t&&(Ec.set(t,e),fh.set(e,t)),e}const Nc=t=>fh.get(t);function oS(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(t,e),l=Fn(o);return i&&o.addEventListener("upgradeneeded",a=>{i(Fn(o.result),a.oldVersion,a.newVersion,Fn(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{r&&a.addEventListener("close",()=>r()),s&&a.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const lS=["get","getKey","getAll","getAllKeys","count"],aS=["put","add","delete","clear"],Tc=new Map;function Np(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Tc.get(e))return Tc.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=aS.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||lS.includes(n)))return;const r=async function(o,...l){const a=this.transaction(o,s?"readwrite":"readonly");let c=a.store;return i&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),s&&a.done]))[0]};return Tc.set(e,r),r}iS(t=>({...t,get:(e,n,i)=>Np(e,n)||t.get(e,n,i),has:(e,n)=>!!Np(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(uS(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function uS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bu="@firebase/app",Tp="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn=new ux("@firebase/app"),dS="@firebase/app-compat",hS="@firebase/analytics-compat",fS="@firebase/analytics",pS="@firebase/app-check-compat",mS="@firebase/app-check",gS="@firebase/auth",yS="@firebase/auth-compat",xS="@firebase/database",_S="@firebase/data-connect",vS="@firebase/database-compat",bS="@firebase/functions",wS="@firebase/functions-compat",SS="@firebase/installations",kS="@firebase/installations-compat",CS="@firebase/messaging",ES="@firebase/messaging-compat",NS="@firebase/performance",TS="@firebase/performance-compat",IS="@firebase/remote-config",MS="@firebase/remote-config-compat",AS="@firebase/storage",jS="@firebase/storage-compat",PS="@firebase/firestore",RS="@firebase/ai",DS="@firebase/firestore-compat",OS="firebase",LS="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu="[DEFAULT]",FS={[Bu]:"fire-core",[dS]:"fire-core-compat",[fS]:"fire-analytics",[hS]:"fire-analytics-compat",[mS]:"fire-app-check",[pS]:"fire-app-check-compat",[gS]:"fire-auth",[yS]:"fire-auth-compat",[xS]:"fire-rtdb",[_S]:"fire-data-connect",[vS]:"fire-rtdb-compat",[bS]:"fire-fn",[wS]:"fire-fn-compat",[SS]:"fire-iid",[kS]:"fire-iid-compat",[CS]:"fire-fcm",[ES]:"fire-fcm-compat",[NS]:"fire-perf",[TS]:"fire-perf-compat",[IS]:"fire-rc",[MS]:"fire-rc-compat",[AS]:"fire-gcs",[jS]:"fire-gcs-compat",[PS]:"fire-fst",[DS]:"fire-fst-compat",[RS]:"fire-vertex","fire-js":"fire-js",[OS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl=new Map,zS=new Map,$u=new Map;function Ip(t,e){try{t.container.addComponent(e)}catch(n){mn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Gl(t){const e=t.name;if($u.has(e))return mn.debug(`There were multiple attempts to register component ${e}.`),!1;$u.set(e,t);for(const n of Kl.values())Ip(n,t);for(const n of zS.values())Ip(n,t);return!0}function WS(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function BS(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zn=new lx("app","Firebase",HS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Br("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=LS;function fx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Hu,automaticDataCollectionEnabled:!0},e),s=i.name;if(typeof s!="string"||!s)throw zn.create("bad-app-name",{appName:String(s)});if(n||(n=sx()),!n)throw zn.create("no-options");const r=Kl.get(s);if(r){if(Yl(n,r.options)&&Yl(i,r.config))return r;throw zn.create("duplicate-app",{appName:s})}const o=new Kw(s);for(const a of $u.values())o.addComponent(a);const l=new $S(n,i,o);return Kl.set(s,l),l}function VS(t=Hu){const e=Kl.get(t);if(!e&&t===Hu&&sx())return fx();if(!e)throw zn.create("no-app",{appName:t});return e}function ts(t,e,n){var i;let s=(i=FS[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const l=[`Unable to register library "${s}" with version "${e}":`];r&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mn.warn(l.join(" "));return}Gl(new Br(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="firebase-heartbeat-database",KS=1,Hr="firebase-heartbeat-store";let Ic=null;function px(){return Ic||(Ic=oS(YS,KS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hr)}catch(n){console.warn(n)}}}}).catch(t=>{throw zn.create("idb-open",{originalErrorMessage:t.message})})),Ic}async function GS(t){try{const n=(await px()).transaction(Hr),i=await n.objectStore(Hr).get(mx(t));return await n.done,i}catch(e){if(e instanceof oo)mn.warn(e.message);else{const n=zn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});mn.warn(n.message)}}}async function Mp(t,e){try{const i=(await px()).transaction(Hr,"readwrite");await i.objectStore(Hr).put(e,mx(t)),await i.done}catch(n){if(n instanceof oo)mn.warn(n.message);else{const i=zn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});mn.warn(i.message)}}}function mx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=1024,QS=30;class XS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new JS(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ap();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>QS){const o=e2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){mn.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ap(),{heartbeatsToSend:i,unsentEntries:s}=ZS(this._heartbeatsCache.heartbeats),r=Ul(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return mn.warn(n),""}}}function Ap(){return new Date().toISOString().substring(0,10)}function ZS(t,e=qS){const n=[];let i=t.slice();for(const s of t){const r=n.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),jp(n)>e){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),jp(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class JS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Rw()?Dw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await GS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Mp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Mp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function jp(t){return Ul(JSON.stringify({version:2,heartbeats:t})).length}function e2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(t){Gl(new Br("platform-logger",e=>new cS(e),"PRIVATE")),Gl(new Br("heartbeat",e=>new XS(e),"PRIVATE")),ts(Bu,Tp,t),ts(Bu,Tp,"esm2017"),ts("fire-js","")}t2("");var n2="firebase",i2="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ts(n2,i2,"app");var Pp={};const Rp="@firebase/database",Dp="1.0.20";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gx="";function s2(t){gx=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ne(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Wr(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return _n(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new r2(e)}}catch{}return new o2},di=yx("localStorage"),l2=yx("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new ux("@firebase/database"),a2=function(){let t=1;return function(){return t++}}(),xx=function(t){const e=$w(t),n=new Hw;n.update(e);const i=n.digest();return uh.encodeByteArray(i)},lo=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=lo.apply(null,i):typeof i=="object"?e+=Ne(i):e+=i,e+=" "}return e};let hr=null,Op=!0;const c2=function(t,e){M(!e,"Can't turn on custom loggers persistently."),ns.logLevel=ie.VERBOSE,hr=ns.log.bind(ns)},Be=function(...t){if(Op===!0&&(Op=!1,hr===null&&l2.get("logging_enabled")===!0&&c2()),hr){const e=lo.apply(null,t);hr(e)}},ao=function(t){return function(...e){Be(t,...e)}},Uu=function(...t){const e="FIREBASE INTERNAL ERROR: "+lo(...t);ns.error(e)},gn=function(...t){const e=`FIREBASE FATAL ERROR: ${lo(...t)}`;throw ns.error(e),new Error(e)},ht=function(...t){const e="FIREBASE WARNING: "+lo(...t);ns.warn(e)},u2=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ht("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},_x=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},d2=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ms="[MIN_NAME]",wi="[MAX_NAME]",Ns=function(t,e){if(t===e)return 0;if(t===ms||e===wi)return-1;if(e===ms||t===wi)return 1;{const n=Lp(t),i=Lp(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},h2=function(t,e){return t===e?0:t<e?-1:1},Fs=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ne(e))},ph=function(t){if(typeof t!="object"||t===null)return Ne(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=Ne(e[i]),n+=":",n+=ph(t[e[i]]);return n+="}",n},vx=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let s=0;s<n;s+=e)s+e>n?i.push(t.substring(s,n)):i.push(t.substring(s,s+e));return i};function at(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const bx=function(t){M(!_x(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let s,r,o,l,a;t===0?(r=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),i),r=l+i,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(r=0,o=Math.round(t/Math.pow(2,1-i-n))));const c=[];for(a=n;a;a-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(a=e;a;a-=1)c.push(r%2?1:0),r=Math.floor(r/2);c.push(s?1:0),c.reverse();const d=c.join("");let h="";for(a=0;a<64;a+=8){let f=parseInt(d.substr(a,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},f2=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},p2=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function m2(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const g2=new RegExp("^-?(0*)\\d{1,10}$"),y2=-2147483648,x2=2147483647,Lp=function(t){if(g2.test(t)){const e=Number(t);if(e>=y2&&e<=x2)return e}return null},co=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw ht("Exception was thrown by user callback.",n),e},Math.floor(0))}},_2=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},fr=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,BS(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){ht(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Be("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ht(e)}}class fl{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}fl.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh="5",wx="v",Sx="s",kx="r",Cx="f",Ex=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Nx="ls",Tx="p",Vu="ac",Ix="websocket",Mx="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,n,i,s,r=!1,o="",l=!1,a=!1,c=null){this.secure=n,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=a,this.emulatorOptions=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=di.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&di.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function w2(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function jx(t,e,n){M(typeof e=="string","typeof type must == string"),M(typeof n=="object","typeof params must == object");let i;if(e===Ix)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Mx)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);w2(t)&&(n.ns=t.namespace);const s=[];return at(n,(r,o)=>{s.push(r+"="+o)}),i+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(){this.counters_={}}incrementCounter(e,n=1){_n(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return _w(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc={},Ac={};function gh(t){const e=t.toString();return Mc[e]||(Mc[e]=new S2),Mc[e]}function k2(t,e){const n=t.toString();return Ac[n]||(Ac[n]=e()),Ac[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&co(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="start",E2="close",N2="pLPCommand",T2="pRTLPCB",Px="id",Rx="pw",Dx="ser",I2="cb",M2="seg",A2="ts",j2="d",P2="dframe",Ox=1870,Lx=30,R2=Ox-Lx,D2=25e3,O2=3e4;class Ki{constructor(e,n,i,s,r,o,l){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ao(e),this.stats_=gh(n),this.urlFn=a=>(this.appCheckToken&&(a[Vu]=this.appCheckToken),jx(n,Mx,a))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new C2(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(O2)),d2(()=>{if(this.isClosed_)return;this.scriptTagHolder=new yh((...r)=>{const[o,l,a,c,d]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Fp)this.id=l,this.password=a;else if(o===E2)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...r)=>{const[o,l]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const i={};i[Fp]="t",i[Dx]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[I2]=this.scriptTagHolder.uniqueCallbackIdentifier),i[wx]=mh,this.transportSessionId&&(i[Sx]=this.transportSessionId),this.lastSessionId&&(i[Nx]=this.lastSessionId),this.applicationId&&(i[Tx]=this.applicationId),this.appCheckToken&&(i[Vu]=this.appCheckToken),typeof location<"u"&&location.hostname&&Ex.test(location.hostname)&&(i[kx]=Cx);const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ki.forceAllow_=!0}static forceDisallow(){Ki.forceDisallow_=!0}static isAvailable(){return Ki.forceAllow_?!0:!Ki.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!f2()&&!p2()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Ne(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=tx(n),s=vx(i,R2);for(let r=0;r<s.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[r]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[P2]="t",i[Px]=e,i[Rx]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Ne(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class yh{constructor(e,n,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=a2(),window[N2+this.uniqueCallbackIdentifier]=e,window[T2+this.uniqueCallbackIdentifier]=n,this.myIFrame=yh.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){Be("frame writing exception"),l.stack&&Be(l.stack),Be(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Be("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Px]=this.myID,e[Rx]=this.myPW,e[Dx]=this.currentSerial;let n=this.urlFn(e),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Lx+i.length<=Ox;){const o=this.pendingSegs.shift();i=i+"&"+M2+s+"="+o.seg+"&"+A2+s+"="+o.ts+"&"+j2+s+"="+o.d,s++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(i,Math.floor(D2)),r=()=>{clearTimeout(s),i()};this.addTag(e,r)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Be("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=16384,F2=45e3;let ql=null;typeof MozWebSocket<"u"?ql=MozWebSocket:typeof WebSocket<"u"&&(ql=WebSocket);class Rt{constructor(e,n,i,s,r,o,l){this.connId=e,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ao(this.connId),this.stats_=gh(n),this.connURL=Rt.connectionURL_(n,o,l,s,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,s,r){const o={};return o[wx]=mh,typeof location<"u"&&location.hostname&&Ex.test(location.hostname)&&(o[kx]=Cx),n&&(o[Sx]=n),i&&(o[Nx]=i),s&&(o[Vu]=s),r&&(o[Tx]=r),jx(e,Ix,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,di.set("previous_websocket_failure",!0);try{let i;ox(),this.mySock=new ql(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Rt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&ql!==null&&!Rt.forceDisallow_}static previouslyFailed(){return di.isInMemoryStorage||di.get("previous_websocket_failure")===!0}markConnectionHealthy(){di.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=Wr(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(M(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=Ne(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=vx(n,L2);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(F2))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Rt.responsesRequiredToBeHealthy=2;Rt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{static get ALL_TRANSPORTS(){return[Ki,Rt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Rt&&Rt.isAvailable();let i=n&&!Rt.previouslyFailed();if(e.webSocketOnly&&(n||ht("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Rt];else{const s=this.transports_=[];for(const r of $r.ALL_TRANSPORTS)r&&r.isAvailable()&&s.push(r);$r.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}$r.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=6e4,W2=5e3,B2=10*1024,H2=100*1024,jc="t",zp="d",$2="s",Wp="r",U2="e",Bp="o",Hp="a",$p="n",Up="p",V2="h";class Y2{constructor(e,n,i,s,r,o,l,a,c,d){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=r,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=a,this.onKill_=c,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ao("c:"+this.id+":"),this.transportManager_=new $r(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=fr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>H2?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>B2?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(jc in e){const n=e[jc];n===Hp?this.upgradeIfSecondaryHealthy_():n===Wp?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Bp&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Fs("t",e),i=Fs("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Up,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Hp,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:$p,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Fs("t",e),i=Fs("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Fs(jc,e);if(zp in e){const i=e[zp];if(n===V2){const s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===$p){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===$2?this.onConnectionShutdown_(i):n===Wp?this.onReset_(i):n===U2?Uu("Server Error: "+i):n===Bp?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Uu("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),mh!==i&&ht("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),fr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(z2))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):fr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(W2))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Up,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(di.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{put(e,n,i,s){}merge(e,n,i,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this.allowedEvents_=e,this.listeners_={},M(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const s=this.getInitialEvent(e);s&&n.apply(i,s)}off(e,n,i){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let r=0;r<s.length;r++)if(s[r].callback===n&&(!i||i===s[r].context)){s.splice(r,1);return}}validateEventType_(e){M(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql extends zx{static getInstance(){return new Ql}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!rx()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return M(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp=32,Yp=768;class ee{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function G(){return new ee("")}function H(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Yn(t){return t.pieces_.length-t.pieceNum_}function se(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ee(t.pieces_,e)}function Wx(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function K2(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Bx(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Hx(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ee(e,0)}function we(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof ee)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&n.push(i[s])}return new ee(n,0)}function $(t){return t.pieceNum_>=t.pieces_.length}function it(t,e){const n=H(t),i=H(e);if(n===null)return e;if(n===i)return it(se(t),se(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function xh(t,e){if(Yn(t)!==Yn(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function Dt(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(Yn(t)>Yn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class G2{constructor(e,n){this.errorPrefix_=n,this.parts_=Bx(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Fa(this.parts_[i]);$x(this)}}function q2(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Fa(e),$x(t)}function Q2(t){const e=t.parts_.pop();t.byteLength_-=Fa(e),t.parts_.length>0&&(t.byteLength_-=1)}function $x(t){if(t.byteLength_>Yp)throw new Error(t.errorPrefix_+"has a key path longer than "+Yp+" bytes ("+t.byteLength_+").");if(t.parts_.length>Vp)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Vp+") or object contains a cycle "+ri(t))}function ri(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h extends zx{static getInstance(){return new _h}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return M(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=1e3,X2=60*5*1e3,Kp=30*1e3,Z2=1.3,J2=3e4,ek="server_kill",Gp=3;class un extends Fx{constructor(e,n,i,s,r,o,l,a){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=a,this.id=un.nextPersistentConnectionId_++,this.log_=ao("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=zs,this.maxReconnectDelay_=X2,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!ox())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");_h.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Ql.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const s=++this.requestNumber_,r={r:s,a:e,b:n};this.log_(Ne(r)),M(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),i&&(this.requestCBHash_[s]=i)}get(e){this.initConnection_();const n=new dh,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(e,n,i,s){this.initConnection_();const r=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+r),this.listens.has(o)||this.listens.set(o,new Map),M(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),M(!this.listens.get(o).has(r),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:n,query:e,tag:i};this.listens.get(o).set(r,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+i+" for "+s);const r={p:i},o="q";e.tag&&(r.q=n._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest(o,r,l=>{const a=l.d,c=l.s;un.warnOnListenWarnings_(a,n),(this.listens.get(i)&&this.listens.get(i).get(s))===e&&(this.log_("listen response",l),c!=="ok"&&this.removeListen_(i,s),e.onComplete&&e.onComplete(c,a))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&_n(e,"w")){const i=ps(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',r=n._path.toString();ht(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${r} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Ww(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Kp)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=zw(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,s=>{const r=s.s,o=s.d||"error";this.authToken_===e&&(r==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(r,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),M(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,e._queryObject,n)}sendUnlisten_(e,n,i,s){this.log_("Unlisten on "+e+" for "+n);const r={p:e},o="n";s&&(r.q=i,r.t=s),this.sendRequest(o,r)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,s){const r={p:n,d:i};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,i,s){this.putInternal("p",e,n,i,s)}merge(e,n,i,s){this.putInternal("m",e,n,i,s)}putInternal(e,n,i,s,r){this.initConnection_();const o={p:n,d:i};r!==void 0&&(o.h=r),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,r=>{this.log_(n+" response",r),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(r.s,r.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const r=i.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ne(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Uu("Unrecognized action received from server: "+Ne(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){M(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=zs,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=zs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>J2&&(this.reconnectDelay_=zs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Z2)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+un.nextConnectionId_++,r=this.lastSessionId;let o=!1,l=null;const a=function(){l?l.close():(o=!0,i())},c=function(h){M(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(h)};this.realtime_={close:a,sendRequest:c};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?Be("getToken() completed but was canceled"):(Be("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,l=new Y2(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,p=>{ht(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(ek)},r))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&ht(h),a())}}}interrupt(e){Be("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Be("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Sp(this.interruptReasons_)&&(this.reconnectDelay_=zs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(r=>ph(r)).join("$"):i="default";const s=this.removeListen_(e,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const i=new ee(e).toString();let s;if(this.listens.has(i)){const r=this.listens.get(i);s=r.get(n),r.delete(n),r.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(e,n){Be("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Gp&&(this.reconnectDelay_=Kp,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Be("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Gp&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+gx.replace(/\./g,"-")]=1,rx()?e["framework.cordova"]=1:Pw()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ql.getInstance().currentlyOnline();return Sp(this.interruptReasons_)&&e}}un.nextPersistentConnectionId_=0;un.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new B(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new B(ms,e),s=new B(ms,n);return this.compare(i,s)!==0}minPost(){return B.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fo;class Ux extends Wa{static get __EMPTY_NODE(){return Fo}static set __EMPTY_NODE(e){Fo=e}compare(e,n){return Ns(e.name,n.name)}isDefinedOn(e){throw Es("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return B.MIN}maxPost(){return new B(wi,Fo)}makePost(e,n){return M(typeof e=="string","KeyIndex indexValue must always be a string."),new B(e,Fo)}toString(){return".key"}}const is=new Ux;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n,i,s,r=null){this.isReverse_=s,this.resultGenerator_=r,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?i(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ee{constructor(e,n,i,s,r){this.key=e,this.value=n,this.color=i??Ee.RED,this.left=s??st.EMPTY_NODE,this.right=r??st.EMPTY_NODE}copy(e,n,i,s,r){return new Ee(e??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const r=i(e,s.key);return r<0?s=s.copy(null,null,null,s.left.insert(e,n,i),null):r===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return st.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,s;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return st.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ee.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ee.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ee.RED=!0;Ee.BLACK=!1;class tk{copy(e,n,i,s,r){return this}insert(e,n,i){return new Ee(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class st{constructor(e,n=st.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new st(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ee.BLACK,null,null))}remove(e){return new st(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ee.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,s=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new zo(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new zo(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new zo(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new zo(this.root_,null,this.comparator_,!0,e)}}st.EMPTY_NODE=new tk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(t,e){return Ns(t.name,e.name)}function vh(t,e){return Ns(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yu;function ik(t){Yu=t}const Vx=function(t){return typeof t=="number"?"number:"+bx(t):"string:"+t},Yx=function(t){if(t.isLeafNode()){const e=t.val();M(typeof e=="string"||typeof e=="number"||typeof e=="object"&&_n(e,".sv"),"Priority must be a string or number.")}else M(t===Yu||t.isEmpty(),"priority of unexpected type.");M(t===Yu||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qp;class ke{static set __childrenNodeConstructor(e){qp=e}static get __childrenNodeConstructor(){return qp}constructor(e,n=ke.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,M(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Yx(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ke(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ke.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return $(e)?this:H(e)===".priority"?this.priorityNode_:ke.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ke.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=H(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(M(i!==".priority"||Yn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,ke.__childrenNodeConstructor.EMPTY_NODE.updateChild(se(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Vx(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=bx(this.value_):e+=this.value_,this.lazyHash_=xx(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ke.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ke.__childrenNodeConstructor?-1:(M(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,s=ke.VALUE_TYPE_ORDER.indexOf(n),r=ke.VALUE_TYPE_ORDER.indexOf(i);return M(s>=0,"Unknown leaf type: "+n),M(r>=0,"Unknown leaf type: "+i),s===r?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ke.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kx,Gx;function sk(t){Kx=t}function rk(t){Gx=t}class ok extends Wa{compare(e,n){const i=e.node.getPriority(),s=n.node.getPriority(),r=i.compareTo(s);return r===0?Ns(e.name,n.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return B.MIN}maxPost(){return new B(wi,new ke("[PRIORITY-POST]",Gx))}makePost(e,n){const i=Kx(e);return new B(n,new ke("[PRIORITY-POST]",i))}toString(){return".priority"}}const ye=new ok;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=Math.log(2);class ak{constructor(e){const n=r=>parseInt(Math.log(r)/lk,10),i=r=>parseInt(Array(r+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=i(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Xl=function(t,e,n,i){t.sort(e);const s=function(a,c){const d=c-a;let h,f;if(d===0)return null;if(d===1)return h=t[a],f=n?n(h):h,new Ee(f,h.node,Ee.BLACK,null,null);{const p=parseInt(d/2,10)+a,m=s(a,p),x=s(p+1,c);return h=t[p],f=n?n(h):h,new Ee(f,h.node,Ee.BLACK,m,x)}},r=function(a){let c=null,d=null,h=t.length;const f=function(m,x){const v=h-m,g=h;h-=m;const y=s(v+1,g),_=t[v],b=n?n(_):_;p(new Ee(b,_.node,x,null,y))},p=function(m){c?(c.left=m,c=m):(d=m,c=m)};for(let m=0;m<a.count;++m){const x=a.nextBitIsOne(),v=Math.pow(2,a.count-(m+1));x?f(v,Ee.BLACK):(f(v,Ee.BLACK),f(v,Ee.RED))}return d},o=new ak(t.length),l=r(o);return new st(i||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pc;const Pi={};class an{static get Default(){return M(Pi&&ye,"ChildrenNode.ts has not been loaded"),Pc=Pc||new an({".priority":Pi},{".priority":ye}),Pc}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=ps(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof st?n:null}hasIndex(e){return _n(this.indexSet_,e.toString())}addIndex(e,n){M(e!==is,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const r=n.getIterator(B.Wrap);let o=r.getNext();for(;o;)s=s||e.isDefinedOn(o.node),i.push(o),o=r.getNext();let l;s?l=Xl(i,e.getCompare()):l=Pi;const a=e.toString(),c=Object.assign({},this.indexSet_);c[a]=e;const d=Object.assign({},this.indexes_);return d[a]=l,new an(d,c)}addToIndexes(e,n){const i=Vl(this.indexes_,(s,r)=>{const o=ps(this.indexSet_,r);if(M(o,"Missing index implementation for "+r),s===Pi)if(o.isDefinedOn(e.node)){const l=[],a=n.getIterator(B.Wrap);let c=a.getNext();for(;c;)c.name!==e.name&&l.push(c),c=a.getNext();return l.push(e),Xl(l,o.getCompare())}else return Pi;else{const l=n.get(e.name);let a=s;return l&&(a=a.remove(new B(e.name,l))),a.insert(e,e.node)}});return new an(i,this.indexSet_)}removeFromIndexes(e,n){const i=Vl(this.indexes_,s=>{if(s===Pi)return s;{const r=n.get(e.name);return r?s.remove(new B(e.name,r)):s}});return new an(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ws;class O{static get EMPTY_NODE(){return Ws||(Ws=new O(new st(vh),null,an.Default))}constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Yx(this.priorityNode_),this.children_.isEmpty()&&M(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ws}updatePriority(e){return this.children_.isEmpty()?this:new O(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Ws:n}}getChild(e){const n=H(e);return n===null?this:this.getImmediateChild(n).getChild(se(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(M(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new B(e,n);let s,r;n.isEmpty()?(s=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(e,n),r=this.indexMap_.addToIndexes(i,this.children_));const o=s.isEmpty()?Ws:this.priorityNode_;return new O(s,o,r)}}updateChild(e,n){const i=H(e);if(i===null)return n;{M(H(e)!==".priority"||Yn(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(se(e),n);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,s=0,r=!0;if(this.forEachChild(ye,(o,l)=>{n[o]=l.val(e),i++,r&&O.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):r=!1}),!e&&r&&s<2*i){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Vx(this.getPriority().val())+":"),this.forEachChild(ye,(n,i)=>{const s=i.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":xx(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const s=this.resolveIndex_(i);if(s){const r=s.getPredecessorKey(new B(e,n));return r?r.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new B(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new B(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,B.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,e)<0;)s.getNext(),r=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,B.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,e)>0;)s.getNext(),r=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===uo?-1:0}withIndex(e){if(e===is||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new O(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===is||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(ye),s=n.getIterator(ye);let r=i.getNext(),o=s.getNext();for(;r&&o;){if(r.name!==o.name||!r.node.equals(o.node))return!1;r=i.getNext(),o=s.getNext()}return r===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===is?null:this.indexMap_.get(e.toString())}}O.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class ck extends O{constructor(){super(new st(vh),O.EMPTY_NODE,an.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return O.EMPTY_NODE}isEmpty(){return!1}}const uo=new ck;Object.defineProperties(B,{MIN:{value:new B(ms,O.EMPTY_NODE)},MAX:{value:new B(wi,uo)}});Ux.__EMPTY_NODE=O.EMPTY_NODE;ke.__childrenNodeConstructor=O;ik(uo);rk(uo);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk=!0;function He(t,e=null){if(t===null)return O.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),M(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new ke(n,He(e))}if(!(t instanceof Array)&&uk){const n=[];let i=!1;if(at(t,(o,l)=>{if(o.substring(0,1)!=="."){const a=He(l);a.isEmpty()||(i=i||!a.getPriority().isEmpty(),n.push(new B(o,a)))}}),n.length===0)return O.EMPTY_NODE;const r=Xl(n,nk,o=>o.name,vh);if(i){const o=Xl(n,ye.getCompare());return new O(r,He(e),new an({".priority":o},{".priority":ye}))}else return new O(r,He(e),an.Default)}else{let n=O.EMPTY_NODE;return at(t,(i,s)=>{if(_n(t,i)&&i.substring(0,1)!=="."){const r=He(s);(r.isLeafNode()||!r.isEmpty())&&(n=n.updateImmediateChild(i,r))}}),n.updatePriority(He(e))}}sk(He);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk extends Wa{constructor(e){super(),this.indexPath_=e,M(!$(e)&&H(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),s=this.extractChild(n.node),r=i.compareTo(s);return r===0?Ns(e.name,n.name):r}makePost(e,n){const i=He(e),s=O.EMPTY_NODE.updateChild(this.indexPath_,i);return new B(n,s)}maxPost(){const e=O.EMPTY_NODE.updateChild(this.indexPath_,uo);return new B(wi,e)}toString(){return Bx(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk extends Wa{compare(e,n){const i=e.node.compareTo(n.node);return i===0?Ns(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return B.MIN}maxPost(){return B.MAX}makePost(e,n){const i=He(e);return new B(n,i)}toString(){return".value"}}const fk=new hk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(t){return{type:"value",snapshotNode:t}}function gs(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ur(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Vr(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function pk(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e){this.index_=e}updateChild(e,n,i,s,r,o){M(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(s).equals(i.getChild(s))&&l.isEmpty()===i.isEmpty()||(o!=null&&(i.isEmpty()?e.hasChild(n)?o.trackChildChange(Ur(n,l)):M(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(gs(n,i)):o.trackChildChange(Vr(n,i,l))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(ye,(s,r)=>{n.hasChild(s)||i.trackChildChange(Ur(s,r))}),n.isLeafNode()||n.forEachChild(ye,(s,r)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(r)||i.trackChildChange(Vr(s,r,o))}else i.trackChildChange(gs(s,r))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?O.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this.indexedFilter_=new bh(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Yr.getStartPost_(e),this.endPost_=Yr.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,s,r,o){return this.matches(new B(n,i))||(i=O.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,s,r,o)}updateFullNode(e,n,i){n.isLeafNode()&&(n=O.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(O.EMPTY_NODE);const r=this;return n.forEachChild(ye,(o,l)=>{r.matches(new B(o,l))||(s=s.updateImmediateChild(o,O.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Yr(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,s,r,o){return this.rangedFilter_.matches(new B(n,i))||(i=O.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,s,r,o):this.fullLimitUpdateChild_(e,n,i,r,o)}updateFullNode(e,n,i){let s;if(n.isLeafNode()||n.isEmpty())s=O.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=O.EMPTY_NODE.withIndex(this.index_);let r;this.reverse_?r=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;r.hasNext()&&o<this.limit_;){const l=r.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))s=s.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(O.EMPTY_NODE);let r;this.reverse_?r=s.getReverseIterator(this.index_):r=s.getIterator(this.index_);let o=0;for(;r.hasNext();){const l=r.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:s=s.updateImmediateChild(l.name,O.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,s,r){let o;if(this.reverse_){const h=this.index_.getCompare();o=(f,p)=>h(p,f)}else o=this.index_.getCompare();const l=e;M(l.numChildren()===this.limit_,"");const a=new B(n,i),c=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),d=this.rangedFilter_.matches(a);if(l.hasChild(n)){const h=l.getImmediateChild(n);let f=s.getChildAfterChild(this.index_,c,this.reverse_);for(;f!=null&&(f.name===n||l.hasChild(f.name));)f=s.getChildAfterChild(this.index_,f,this.reverse_);const p=f==null?1:o(f,a);if(d&&!i.isEmpty()&&p>=0)return r!=null&&r.trackChildChange(Vr(n,i,h)),l.updateImmediateChild(n,i);{r!=null&&r.trackChildChange(Ur(n,h));const x=l.updateImmediateChild(n,O.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(r!=null&&r.trackChildChange(gs(f.name,f.node)),x.updateImmediateChild(f.name,f.node)):x}}else return i.isEmpty()?e:d&&o(c,a)>=0?(r!=null&&(r.trackChildChange(Ur(c.name,c.node)),r.trackChildChange(gs(n,i))),l.updateImmediateChild(n,i).updateImmediateChild(c.name,O.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ye}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return M(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return M(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ms}hasEnd(){return this.endSet_}getIndexEndValue(){return M(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return M(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:wi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return M(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ye}copy(){const e=new wh;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function gk(t){return t.loadsAllData()?new bh(t.getIndex()):t.hasLimit()?new mk(t):new Yr(t)}function Qp(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ye?n="$priority":t.index_===fk?n="$value":t.index_===is?n="$key":(M(t.index_ instanceof dk,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ne(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=Ne(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+Ne(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=Ne(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+Ne(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Xp(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ye&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl extends Fx{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(M(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,i,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=ao("p:rest:"),this.listens_={}}listen(e,n,i,s){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const o=Zl.getListenId_(e,i),l={};this.listens_[o]=l;const a=Qp(e._queryParams);this.restRequest_(r+".json",a,(c,d)=>{let h=d;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(r,h,!1,i),ps(this.listens_,o)===l){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",s(f,null)}})}unlisten(e,n){const i=Zl.getListenId_(e,n);delete this.listens_[i]}get(e){const n=Qp(e._queryParams),i=e._path.toString(),s=new dh;return this.restRequest_(i+".json",n,(r,o)=>{let l=o;r===404&&(l=null,r=null),r===null?(this.onDataUpdate_(i,l,!1,null),s.resolve(l)):s.reject(new Error(l))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,r])=>{s&&s.accessToken&&(n.auth=s.accessToken),r&&r.token&&(n.ac=r.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Bw(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(i&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let a=null;if(l.status>=200&&l.status<300){try{a=Wr(l.responseText)}catch{ht("Failed to parse JSON response for "+o+": "+l.responseText)}i(null,a)}else l.status!==401&&l.status!==404&&ht("Got unsuccessful REST response for "+o+" Status: "+l.status),i(l.status);i=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(){this.rootNode_=O.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jl(){return{value:null,children:new Map}}function Qx(t,e,n){if($(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=H(e);t.children.has(i)||t.children.set(i,Jl());const s=t.children.get(i);e=se(e),Qx(s,e,n)}}function Ku(t,e,n){t.value!==null?n(e,t.value):xk(t,(i,s)=>{const r=new ee(e.toString()+"/"+i);Ku(s,r,n)})}function xk(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&at(this.last_,(i,s)=>{n[i]=n[i]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp=10*1e3,vk=30*1e3,bk=5*60*1e3;class wk{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new _k(e);const i=Zp+(vk-Zp)*Math.random();fr(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;at(e,(s,r)=>{r>0&&_n(this.statsToReport_,s)&&(n[s]=r,i=!0)}),i&&this.server_.reportStats(n),fr(this.reportStats_.bind(this),Math.floor(Math.random()*2*bk))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ot||(Ot={}));function Xx(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Sh(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function kh(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=Ot.ACK_USER_WRITE,this.source=Xx()}operationForChild(e){if($(this.path)){if(this.affectedTree.value!=null)return M(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ee(e));return new ea(G(),n,this.revert)}}else return M(H(this.path)===e,"operationForChild called for unrelated child."),new ea(se(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n){this.source=e,this.path=n,this.type=Ot.LISTEN_COMPLETE}operationForChild(e){return $(this.path)?new Kr(this.source,G()):new Kr(this.source,se(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=Ot.OVERWRITE}operationForChild(e){return $(this.path)?new Si(this.source,G(),this.snap.getImmediateChild(e)):new Si(this.source,se(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=Ot.MERGE}operationForChild(e){if($(this.path)){const n=this.children.subtree(new ee(e));return n.isEmpty()?null:n.value?new Si(this.source,G(),n.value):new Gr(this.source,G(),n)}else return M(H(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Gr(this.source,se(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if($(e))return this.isFullyInitialized()&&!this.filtered_;const n=H(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function kk(t,e,n,i){const s=[],r=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&r.push(pk(o.childName,o.snapshotNode))}),Bs(t,s,"child_removed",e,i,n),Bs(t,s,"child_added",e,i,n),Bs(t,s,"child_moved",r,i,n),Bs(t,s,"child_changed",e,i,n),Bs(t,s,"value",e,i,n),s}function Bs(t,e,n,i,s,r){const o=i.filter(l=>l.type===n);o.sort((l,a)=>Ek(t,l,a)),o.forEach(l=>{const a=Ck(t,l,r);s.forEach(c=>{c.respondsTo(l.type)&&e.push(c.createEvent(a,t.query_))})})}function Ck(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Ek(t,e,n){if(e.childName==null||n.childName==null)throw Es("Should only compare child_ events.");const i=new B(e.childName,e.snapshotNode),s=new B(n.childName,n.snapshotNode);return t.index_.compare(i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(t,e){return{eventCache:t,serverCache:e}}function pr(t,e,n,i){return Ba(new ki(e,n,i),t.serverCache)}function Zx(t,e,n,i){return Ba(t.eventCache,new ki(e,n,i))}function Gu(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ci(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rc;const Nk=()=>(Rc||(Rc=new st(h2)),Rc);class ae{static fromObject(e){let n=new ae(null);return at(e,(i,s)=>{n=n.set(new ee(i),s)}),n}constructor(e,n=Nk()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:G(),value:this.value};if($(e))return null;{const i=H(e),s=this.children.get(i);if(s!==null){const r=s.findRootMostMatchingPathAndValue(se(e),n);return r!=null?{path:we(new ee(i),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if($(e))return this;{const n=H(e),i=this.children.get(n);return i!==null?i.subtree(se(e)):new ae(null)}}set(e,n){if($(e))return new ae(n,this.children);{const i=H(e),r=(this.children.get(i)||new ae(null)).set(se(e),n),o=this.children.insert(i,r);return new ae(this.value,o)}}remove(e){if($(e))return this.children.isEmpty()?new ae(null):new ae(null,this.children);{const n=H(e),i=this.children.get(n);if(i){const s=i.remove(se(e));let r;return s.isEmpty()?r=this.children.remove(n):r=this.children.insert(n,s),this.value===null&&r.isEmpty()?new ae(null):new ae(this.value,r)}else return this}}get(e){if($(e))return this.value;{const n=H(e),i=this.children.get(n);return i?i.get(se(e)):null}}setTree(e,n){if($(e))return n;{const i=H(e),r=(this.children.get(i)||new ae(null)).setTree(se(e),n);let o;return r.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,r),new ae(this.value,o)}}fold(e){return this.fold_(G(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((s,r)=>{i[s]=r.fold_(we(e,s),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,G(),n)}findOnPath_(e,n,i){const s=this.value?i(n,this.value):!1;if(s)return s;if($(e))return null;{const r=H(e),o=this.children.get(r);return o?o.findOnPath_(se(e),we(n,r),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,G(),n)}foreachOnPath_(e,n,i){if($(e))return this;{this.value&&i(n,this.value);const s=H(e),r=this.children.get(s);return r?r.foreachOnPath_(se(e),we(n,s),i):new ae(null)}}foreach(e){this.foreach_(G(),e)}foreach_(e,n){this.children.inorderTraversal((i,s)=>{s.foreach_(we(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.writeTree_=e}static empty(){return new Wt(new ae(null))}}function mr(t,e,n){if($(e))return new Wt(new ae(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const s=i.path;let r=i.value;const o=it(s,e);return r=r.updateChild(o,n),new Wt(t.writeTree_.set(s,r))}else{const s=new ae(n),r=t.writeTree_.setTree(e,s);return new Wt(r)}}}function Jp(t,e,n){let i=t;return at(n,(s,r)=>{i=mr(i,we(e,s),r)}),i}function em(t,e){if($(e))return Wt.empty();{const n=t.writeTree_.setTree(e,new ae(null));return new Wt(n)}}function qu(t,e){return Ii(t,e)!=null}function Ii(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(it(n.path,e)):null}function tm(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ye,(i,s)=>{e.push(new B(i,s))}):t.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&e.push(new B(i,s.value))}),e}function Wn(t,e){if($(e))return t;{const n=Ii(t,e);return n!=null?new Wt(new ae(n)):new Wt(t.writeTree_.subtree(e))}}function Qu(t){return t.writeTree_.isEmpty()}function ys(t,e){return Jx(G(),t.writeTree_,e)}function Jx(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((s,r)=>{s===".priority"?(M(r.value!==null,"Priority writes must always be leaf nodes"),i=r.value):n=Jx(we(t,s),r,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(we(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ch(t,e){return i_(e,t)}function Tk(t,e,n,i,s){M(i>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:s}),s&&(t.visibleWrites=mr(t.visibleWrites,e,n)),t.lastWriteId=i}function Ik(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function Mk(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);M(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let s=i.visible,r=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&Ak(l,i.path)?s=!1:Dt(i.path,l.path)&&(r=!0)),o--}if(s){if(r)return jk(t),!0;if(i.snap)t.visibleWrites=em(t.visibleWrites,i.path);else{const l=i.children;at(l,a=>{t.visibleWrites=em(t.visibleWrites,we(i.path,a))})}return!0}else return!1}function Ak(t,e){if(t.snap)return Dt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Dt(we(t.path,n),e))return!0;return!1}function jk(t){t.visibleWrites=e_(t.allWrites,Pk,G()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Pk(t){return t.visible}function e_(t,e,n){let i=Wt.empty();for(let s=0;s<t.length;++s){const r=t[s];if(e(r)){const o=r.path;let l;if(r.snap)Dt(n,o)?(l=it(n,o),i=mr(i,l,r.snap)):Dt(o,n)&&(l=it(o,n),i=mr(i,G(),r.snap.getChild(l)));else if(r.children){if(Dt(n,o))l=it(n,o),i=Jp(i,l,r.children);else if(Dt(o,n))if(l=it(o,n),$(l))i=Jp(i,G(),r.children);else{const a=ps(r.children,H(l));if(a){const c=a.getChild(se(l));i=mr(i,G(),c)}}}else throw Es("WriteRecord should have .snap or .children")}}return i}function t_(t,e,n,i,s){if(!i&&!s){const r=Ii(t.visibleWrites,e);if(r!=null)return r;{const o=Wn(t.visibleWrites,e);if(Qu(o))return n;if(n==null&&!qu(o,G()))return null;{const l=n||O.EMPTY_NODE;return ys(o,l)}}}else{const r=Wn(t.visibleWrites,e);if(!s&&Qu(r))return n;if(!s&&n==null&&!qu(r,G()))return null;{const o=function(c){return(c.visible||s)&&(!i||!~i.indexOf(c.writeId))&&(Dt(c.path,e)||Dt(e,c.path))},l=e_(t.allWrites,o,e),a=n||O.EMPTY_NODE;return ys(l,a)}}}function Rk(t,e,n){let i=O.EMPTY_NODE;const s=Ii(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(ye,(r,o)=>{i=i.updateImmediateChild(r,o)}),i;if(n){const r=Wn(t.visibleWrites,e);return n.forEachChild(ye,(o,l)=>{const a=ys(Wn(r,new ee(o)),l);i=i.updateImmediateChild(o,a)}),tm(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{const r=Wn(t.visibleWrites,e);return tm(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function Dk(t,e,n,i,s){M(i||s,"Either existingEventSnap or existingServerSnap must exist");const r=we(e,n);if(qu(t.visibleWrites,r))return null;{const o=Wn(t.visibleWrites,r);return Qu(o)?s.getChild(n):ys(o,s.getChild(n))}}function Ok(t,e,n,i){const s=we(e,n),r=Ii(t.visibleWrites,s);if(r!=null)return r;if(i.isCompleteForChild(n)){const o=Wn(t.visibleWrites,s);return ys(o,i.getNode().getImmediateChild(n))}else return null}function Lk(t,e){return Ii(t.visibleWrites,e)}function Fk(t,e,n,i,s,r,o){let l;const a=Wn(t.visibleWrites,e),c=Ii(a,G());if(c!=null)l=c;else if(n!=null)l=ys(a,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const d=[],h=o.getCompare(),f=r?l.getReverseIteratorFrom(i,o):l.getIteratorFrom(i,o);let p=f.getNext();for(;p&&d.length<s;)h(p,i)!==0&&d.push(p),p=f.getNext();return d}else return[]}function zk(){return{visibleWrites:Wt.empty(),allWrites:[],lastWriteId:-1}}function ta(t,e,n,i){return t_(t.writeTree,t.treePath,e,n,i)}function Eh(t,e){return Rk(t.writeTree,t.treePath,e)}function nm(t,e,n,i){return Dk(t.writeTree,t.treePath,e,n,i)}function na(t,e){return Lk(t.writeTree,we(t.treePath,e))}function Wk(t,e,n,i,s,r){return Fk(t.writeTree,t.treePath,e,n,i,s,r)}function Nh(t,e,n){return Ok(t.writeTree,t.treePath,e,n)}function n_(t,e){return i_(we(t.treePath,e),t.writeTree)}function i_(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;M(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),M(i!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const r=s.type;if(n==="child_added"&&r==="child_removed")this.changeMap.set(i,Vr(i,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&r==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&r==="child_changed")this.changeMap.set(i,Ur(i,s.oldSnap));else if(n==="child_changed"&&r==="child_added")this.changeMap.set(i,gs(i,e.snapshotNode));else if(n==="child_changed"&&r==="child_changed")this.changeMap.set(i,Vr(i,e.snapshotNode,s.oldSnap));else throw Es("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const s_=new Hk;class Th{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new ki(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Nh(this.writes_,e,i)}}getChildAfterChild(e,n,i){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ci(this.viewCache_),r=Wk(this.writes_,s,n,1,i,e);return r.length===0?null:r[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(t){return{filter:t}}function Uk(t,e){M(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),M(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Vk(t,e,n,i,s){const r=new Bk;let o,l;if(n.type===Ot.OVERWRITE){const c=n;c.source.fromUser?o=Xu(t,e,c.path,c.snap,i,s,r):(M(c.source.fromServer,"Unknown source."),l=c.source.tagged||e.serverCache.isFiltered()&&!$(c.path),o=ia(t,e,c.path,c.snap,i,s,l,r))}else if(n.type===Ot.MERGE){const c=n;c.source.fromUser?o=Kk(t,e,c.path,c.children,i,s,r):(M(c.source.fromServer,"Unknown source."),l=c.source.tagged||e.serverCache.isFiltered(),o=Zu(t,e,c.path,c.children,i,s,l,r))}else if(n.type===Ot.ACK_USER_WRITE){const c=n;c.revert?o=Qk(t,e,c.path,i,s,r):o=Gk(t,e,c.path,c.affectedTree,i,s,r)}else if(n.type===Ot.LISTEN_COMPLETE)o=qk(t,e,n.path,i,r);else throw Es("Unknown operation type: "+n.type);const a=r.getChanges();return Yk(e,o,a),{viewCache:o,changes:a}}function Yk(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),r=Gu(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!i.getNode().equals(r)||!i.getNode().getPriority().equals(r.getPriority()))&&n.push(qx(Gu(e)))}}function r_(t,e,n,i,s,r){const o=e.eventCache;if(na(i,n)!=null)return e;{let l,a;if($(n))if(M(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Ci(e),d=c instanceof O?c:O.EMPTY_NODE,h=Eh(i,d);l=t.filter.updateFullNode(e.eventCache.getNode(),h,r)}else{const c=ta(i,Ci(e));l=t.filter.updateFullNode(e.eventCache.getNode(),c,r)}else{const c=H(n);if(c===".priority"){M(Yn(n)===1,"Can't have a priority with additional path components");const d=o.getNode();a=e.serverCache.getNode();const h=nm(i,n,d,a);h!=null?l=t.filter.updatePriority(d,h):l=o.getNode()}else{const d=se(n);let h;if(o.isCompleteForChild(c)){a=e.serverCache.getNode();const f=nm(i,n,o.getNode(),a);f!=null?h=o.getNode().getImmediateChild(c).updateChild(d,f):h=o.getNode().getImmediateChild(c)}else h=Nh(i,c,e.serverCache);h!=null?l=t.filter.updateChild(o.getNode(),c,h,d,s,r):l=o.getNode()}}return pr(e,l,o.isFullyInitialized()||$(n),t.filter.filtersNodes())}}function ia(t,e,n,i,s,r,o,l){const a=e.serverCache;let c;const d=o?t.filter:t.filter.getIndexedFilter();if($(n))c=d.updateFullNode(a.getNode(),i,null);else if(d.filtersNodes()&&!a.isFiltered()){const p=a.getNode().updateChild(n,i);c=d.updateFullNode(a.getNode(),p,null)}else{const p=H(n);if(!a.isCompleteForPath(n)&&Yn(n)>1)return e;const m=se(n),v=a.getNode().getImmediateChild(p).updateChild(m,i);p===".priority"?c=d.updatePriority(a.getNode(),v):c=d.updateChild(a.getNode(),p,v,m,s_,null)}const h=Zx(e,c,a.isFullyInitialized()||$(n),d.filtersNodes()),f=new Th(s,h,r);return r_(t,h,n,s,f,l)}function Xu(t,e,n,i,s,r,o){const l=e.eventCache;let a,c;const d=new Th(s,e,r);if($(n))c=t.filter.updateFullNode(e.eventCache.getNode(),i,o),a=pr(e,c,!0,t.filter.filtersNodes());else{const h=H(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),i),a=pr(e,c,l.isFullyInitialized(),l.isFiltered());else{const f=se(n),p=l.getNode().getImmediateChild(h);let m;if($(f))m=i;else{const x=d.getCompleteChild(h);x!=null?Wx(f)===".priority"&&x.getChild(Hx(f)).isEmpty()?m=x:m=x.updateChild(f,i):m=O.EMPTY_NODE}if(p.equals(m))a=e;else{const x=t.filter.updateChild(l.getNode(),h,m,f,d,o);a=pr(e,x,l.isFullyInitialized(),t.filter.filtersNodes())}}}return a}function im(t,e){return t.eventCache.isCompleteForChild(e)}function Kk(t,e,n,i,s,r,o){let l=e;return i.foreach((a,c)=>{const d=we(n,a);im(e,H(d))&&(l=Xu(t,l,d,c,s,r,o))}),i.foreach((a,c)=>{const d=we(n,a);im(e,H(d))||(l=Xu(t,l,d,c,s,r,o))}),l}function sm(t,e,n){return n.foreach((i,s)=>{e=e.updateChild(i,s)}),e}function Zu(t,e,n,i,s,r,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let a=e,c;$(n)?c=i:c=new ae(null).setTree(n,i);const d=e.serverCache.getNode();return c.children.inorderTraversal((h,f)=>{if(d.hasChild(h)){const p=e.serverCache.getNode().getImmediateChild(h),m=sm(t,p,f);a=ia(t,a,new ee(h),m,s,r,o,l)}}),c.children.inorderTraversal((h,f)=>{const p=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!d.hasChild(h)&&!p){const m=e.serverCache.getNode().getImmediateChild(h),x=sm(t,m,f);a=ia(t,a,new ee(h),x,s,r,o,l)}}),a}function Gk(t,e,n,i,s,r,o){if(na(s,n)!=null)return e;const l=e.serverCache.isFiltered(),a=e.serverCache;if(i.value!=null){if($(n)&&a.isFullyInitialized()||a.isCompleteForPath(n))return ia(t,e,n,a.getNode().getChild(n),s,r,l,o);if($(n)){let c=new ae(null);return a.getNode().forEachChild(is,(d,h)=>{c=c.set(new ee(d),h)}),Zu(t,e,n,c,s,r,l,o)}else return e}else{let c=new ae(null);return i.foreach((d,h)=>{const f=we(n,d);a.isCompleteForPath(f)&&(c=c.set(d,a.getNode().getChild(f)))}),Zu(t,e,n,c,s,r,l,o)}}function qk(t,e,n,i,s){const r=e.serverCache,o=Zx(e,r.getNode(),r.isFullyInitialized()||$(n),r.isFiltered());return r_(t,o,n,i,s_,s)}function Qk(t,e,n,i,s,r){let o;if(na(i,n)!=null)return e;{const l=new Th(i,e,s),a=e.eventCache.getNode();let c;if($(n)||H(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=ta(i,Ci(e));else{const h=e.serverCache.getNode();M(h instanceof O,"serverChildren would be complete if leaf node"),d=Eh(i,h)}d=d,c=t.filter.updateFullNode(a,d,r)}else{const d=H(n);let h=Nh(i,d,e.serverCache);h==null&&e.serverCache.isCompleteForChild(d)&&(h=a.getImmediateChild(d)),h!=null?c=t.filter.updateChild(a,d,h,se(n),l,r):e.eventCache.getNode().hasChild(d)?c=t.filter.updateChild(a,d,O.EMPTY_NODE,se(n),l,r):c=a,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=ta(i,Ci(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,r)))}return o=e.serverCache.isFullyInitialized()||na(i,G())!=null,pr(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,s=new bh(i.getIndex()),r=gk(i);this.processor_=$k(r);const o=n.serverCache,l=n.eventCache,a=s.updateFullNode(O.EMPTY_NODE,o.getNode(),null),c=r.updateFullNode(O.EMPTY_NODE,l.getNode(),null),d=new ki(a,o.isFullyInitialized(),s.filtersNodes()),h=new ki(c,l.isFullyInitialized(),r.filtersNodes());this.viewCache_=Ba(h,d),this.eventGenerator_=new Sk(this.query_)}get query(){return this.query_}}function Zk(t){return t.viewCache_.serverCache.getNode()}function Jk(t,e){const n=Ci(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!$(e)&&!n.getImmediateChild(H(e)).isEmpty())?n.getChild(e):null}function rm(t){return t.eventRegistrations_.length===0}function eC(t,e){t.eventRegistrations_.push(e)}function om(t,e,n){const i=[];if(n){M(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(r=>{const o=r.createCancelEvent(n,s);o&&i.push(o)})}if(e){let s=[];for(let r=0;r<t.eventRegistrations_.length;++r){const o=t.eventRegistrations_[r];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(r+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return i}function lm(t,e,n,i){e.type===Ot.MERGE&&e.source.queryId!==null&&(M(Ci(t.viewCache_),"We should always have a full cache before handling merges"),M(Gu(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,r=Vk(t.processor_,s,e,n,i);return Uk(t.processor_,r.viewCache),M(r.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=r.viewCache,o_(t,r.changes,r.viewCache.eventCache.getNode(),null)}function tC(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ye,(r,o)=>{i.push(gs(r,o))}),n.isFullyInitialized()&&i.push(qx(n.getNode())),o_(t,i,n.getNode(),e)}function o_(t,e,n,i){const s=i?[i]:t.eventRegistrations_;return kk(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sa;class nC{constructor(){this.views=new Map}}function iC(t){M(!sa,"__referenceConstructor has already been defined"),sa=t}function sC(){return M(sa,"Reference.ts has not been loaded"),sa}function rC(t){return t.views.size===0}function Ih(t,e,n,i){const s=e.source.queryId;if(s!==null){const r=t.views.get(s);return M(r!=null,"SyncTree gave us an op for an invalid query."),lm(r,e,n,i)}else{let r=[];for(const o of t.views.values())r=r.concat(lm(o,e,n,i));return r}}function oC(t,e,n,i,s){const r=e._queryIdentifier,o=t.views.get(r);if(!o){let l=ta(n,s?i:null),a=!1;l?a=!0:i instanceof O?(l=Eh(n,i),a=!1):(l=O.EMPTY_NODE,a=!1);const c=Ba(new ki(l,a,!1),new ki(i,s,!1));return new Xk(e,c)}return o}function lC(t,e,n,i,s,r){const o=oC(t,e,i,s,r);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),eC(o,n),tC(o,n)}function aC(t,e,n,i){const s=e._queryIdentifier,r=[];let o=[];const l=Kn(t);if(s==="default")for(const[a,c]of t.views.entries())o=o.concat(om(c,n,i)),rm(c)&&(t.views.delete(a),c.query._queryParams.loadsAllData()||r.push(c.query));else{const a=t.views.get(s);a&&(o=o.concat(om(a,n,i)),rm(a)&&(t.views.delete(s),a.query._queryParams.loadsAllData()||r.push(a.query)))}return l&&!Kn(t)&&r.push(new(sC())(e._repo,e._path)),{removed:r,events:o}}function l_(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function ss(t,e){let n=null;for(const i of t.views.values())n=n||Jk(i,e);return n}function a_(t,e){if(e._queryParams.loadsAllData())return Ha(t);{const i=e._queryIdentifier;return t.views.get(i)}}function c_(t,e){return a_(t,e)!=null}function Kn(t){return Ha(t)!=null}function Ha(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ra;function cC(t){M(!ra,"__referenceConstructor has already been defined"),ra=t}function uC(){return M(ra,"Reference.ts has not been loaded"),ra}let dC=1;class am{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ae(null),this.pendingWriteTree_=zk(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function hC(t,e,n,i,s){return Tk(t.pendingWriteTree_,e,n,i,s),s?ho(t,new Si(Xx(),e,n)):[]}function Gi(t,e,n=!1){const i=Ik(t.pendingWriteTree_,e);if(Mk(t.pendingWriteTree_,e)){let r=new ae(null);return i.snap!=null?r=r.set(G(),!0):at(i.children,o=>{r=r.set(new ee(o),!0)}),ho(t,new ea(i.path,r,n))}else return[]}function $a(t,e,n){return ho(t,new Si(Sh(),e,n))}function fC(t,e,n){const i=ae.fromObject(n);return ho(t,new Gr(Sh(),e,i))}function pC(t,e){return ho(t,new Kr(Sh(),e))}function mC(t,e,n){const i=Mh(t,n);if(i){const s=Ah(i),r=s.path,o=s.queryId,l=it(r,e),a=new Kr(kh(o),l);return jh(t,r,a)}else return[]}function Ju(t,e,n,i,s=!1){const r=e._path,o=t.syncPointTree_.get(r);let l=[];if(o&&(e._queryIdentifier==="default"||c_(o,e))){const a=aC(o,e,n,i);rC(o)&&(t.syncPointTree_=t.syncPointTree_.remove(r));const c=a.removed;if(l=a.events,!s){const d=c.findIndex(f=>f._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(r,(f,p)=>Kn(p));if(d&&!h){const f=t.syncPointTree_.subtree(r);if(!f.isEmpty()){const p=xC(f);for(let m=0;m<p.length;++m){const x=p[m],v=x.query,g=f_(t,x);t.listenProvider_.startListening(gr(v),oa(t,v),g.hashFn,g.onComplete)}}}!h&&c.length>0&&!i&&(d?t.listenProvider_.stopListening(gr(e),null):c.forEach(f=>{const p=t.queryToTagMap.get(Ua(f));t.listenProvider_.stopListening(gr(f),p)}))}_C(t,c)}return l}function gC(t,e,n,i){const s=Mh(t,i);if(s!=null){const r=Ah(s),o=r.path,l=r.queryId,a=it(o,e),c=new Si(kh(l),a,n);return jh(t,o,c)}else return[]}function yC(t,e,n,i){const s=Mh(t,i);if(s){const r=Ah(s),o=r.path,l=r.queryId,a=it(o,e),c=ae.fromObject(n),d=new Gr(kh(l),a,c);return jh(t,o,d)}else return[]}function cm(t,e,n,i=!1){const s=e._path;let r=null,o=!1;t.syncPointTree_.foreachOnPath(s,(f,p)=>{const m=it(f,s);r=r||ss(p,m),o=o||Kn(p)});let l=t.syncPointTree_.get(s);l?(o=o||Kn(l),r=r||ss(l,G())):(l=new nC,t.syncPointTree_=t.syncPointTree_.set(s,l));let a;r!=null?a=!0:(a=!1,r=O.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((p,m)=>{const x=ss(m,G());x&&(r=r.updateImmediateChild(p,x))}));const c=c_(l,e);if(!c&&!e._queryParams.loadsAllData()){const f=Ua(e);M(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const p=vC();t.queryToTagMap.set(f,p),t.tagToQueryMap.set(p,f)}const d=Ch(t.pendingWriteTree_,s);let h=lC(l,e,n,d,r,a);if(!c&&!o&&!i){const f=a_(l,e);h=h.concat(bC(t,e,f))}return h}function u_(t,e,n){const s=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,(o,l)=>{const a=it(o,e),c=ss(l,a);if(c)return c});return t_(s,e,r,n,!0)}function ho(t,e){return d_(e,t.syncPointTree_,null,Ch(t.pendingWriteTree_,G()))}function d_(t,e,n,i){if($(t.path))return h_(t,e,n,i);{const s=e.get(G());n==null&&s!=null&&(n=ss(s,G()));let r=[];const o=H(t.path),l=t.operationForChild(o),a=e.children.get(o);if(a&&l){const c=n?n.getImmediateChild(o):null,d=n_(i,o);r=r.concat(d_(l,a,c,d))}return s&&(r=r.concat(Ih(s,t,i,n))),r}}function h_(t,e,n,i){const s=e.get(G());n==null&&s!=null&&(n=ss(s,G()));let r=[];return e.children.inorderTraversal((o,l)=>{const a=n?n.getImmediateChild(o):null,c=n_(i,o),d=t.operationForChild(o);d&&(r=r.concat(h_(d,l,a,c)))}),s&&(r=r.concat(Ih(s,t,i,n))),r}function f_(t,e){const n=e.query,i=oa(t,n);return{hashFn:()=>(Zk(e)||O.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return i?mC(t,n._path,i):pC(t,n._path);{const r=m2(s,n);return Ju(t,n,null,r)}}}}function oa(t,e){const n=Ua(e);return t.queryToTagMap.get(n)}function Ua(t){return t._path.toString()+"$"+t._queryIdentifier}function Mh(t,e){return t.tagToQueryMap.get(e)}function Ah(t){const e=t.indexOf("$");return M(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ee(t.substr(0,e))}}function jh(t,e,n){const i=t.syncPointTree_.get(e);M(i,"Missing sync point for query tag that we're tracking");const s=Ch(t.pendingWriteTree_,e);return Ih(i,n,s,null)}function xC(t){return t.fold((e,n,i)=>{if(n&&Kn(n))return[Ha(n)];{let s=[];return n&&(s=l_(n)),at(i,(r,o)=>{s=s.concat(o)}),s}})}function gr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(uC())(t._repo,t._path):t}function _C(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const s=Ua(i),r=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(r)}}}function vC(){return dC++}function bC(t,e,n){const i=e._path,s=oa(t,e),r=f_(t,n),o=t.listenProvider_.startListening(gr(e),s,r.hashFn,r.onComplete),l=t.syncPointTree_.subtree(i);if(s)M(!Kn(l.value),"If we're adding a query, it shouldn't be shadowed");else{const a=l.fold((c,d,h)=>{if(!$(c)&&d&&Kn(d))return[Ha(d).query];{let f=[];return d&&(f=f.concat(l_(d).map(p=>p.query))),at(h,(p,m)=>{f=f.concat(m)}),f}});for(let c=0;c<a.length;++c){const d=a[c];t.listenProvider_.stopListening(gr(d),oa(t,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Ph(n)}node(){return this.node_}}class Rh{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=we(this.path_,e);return new Rh(this.syncTree_,n)}node(){return u_(this.syncTree_,this.path_)}}const wC=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},um=function(t,e,n){if(!t||typeof t!="object")return t;if(M(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return SC(t[".sv"],e,n);if(typeof t[".sv"]=="object")return kC(t[".sv"],e);M(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},SC=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:M(!1,"Unexpected server value: "+t)}},kC=function(t,e,n){t.hasOwnProperty("increment")||M(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&M(!1,"Unexpected increment value: "+i);const s=e.node();if(M(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const o=s.getValue();return typeof o!="number"?i:o+i},CC=function(t,e,n,i){return Dh(e,new Rh(n,t),i)},EC=function(t,e,n){return Dh(t,new Ph(e),n)};function Dh(t,e,n){const i=t.getPriority().val(),s=um(i,e.getImmediateChild(".priority"),n);let r;if(t.isLeafNode()){const o=t,l=um(o.getValue(),e,n);return l!==o.getValue()||s!==o.getPriority().val()?new ke(l,He(s)):t}else{const o=t;return r=o,s!==o.getPriority().val()&&(r=r.updatePriority(new ke(s))),o.forEachChild(ye,(l,a)=>{const c=Dh(a,e.getImmediateChild(l),n);c!==a&&(r=r.updateImmediateChild(l,c))}),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function Lh(t,e){let n=e instanceof ee?e:new ee(e),i=t,s=H(n);for(;s!==null;){const r=ps(i.node.children,s)||{children:{},childCount:0};i=new Oh(s,i,r),n=se(n),s=H(n)}return i}function Ts(t){return t.node.value}function p_(t,e){t.node.value=e,ed(t)}function m_(t){return t.node.childCount>0}function NC(t){return Ts(t)===void 0&&!m_(t)}function Va(t,e){at(t.node.children,(n,i)=>{e(new Oh(n,t,i))})}function g_(t,e,n,i){n&&!i&&e(t),Va(t,s=>{g_(s,e,!0,i)}),n&&i&&e(t)}function TC(t,e,n){let i=t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function fo(t){return new ee(t.parent===null?t.name:fo(t.parent)+"/"+t.name)}function ed(t){t.parent!==null&&IC(t.parent,t.name,t)}function IC(t,e,n){const i=NC(n),s=_n(t.node.children,e);i&&s?(delete t.node.children[e],t.node.childCount--,ed(t)):!i&&!s&&(t.node.children[e]=n.node,t.node.childCount++,ed(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=/[\[\].#$\/\u0000-\u001F\u007F]/,AC=/[\[\].#$\u0000-\u001F\u007F]/,Dc=10*1024*1024,y_=function(t){return typeof t=="string"&&t.length!==0&&!MC.test(t)},x_=function(t){return typeof t=="string"&&t.length!==0&&!AC.test(t)},jC=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),x_(t)},__=function(t,e,n){const i=n instanceof ee?new G2(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ri(i));if(typeof e=="function")throw new Error(t+"contains a function "+ri(i)+" with contents = "+e.toString());if(_x(e))throw new Error(t+"contains "+e.toString()+" "+ri(i));if(typeof e=="string"&&e.length>Dc/3&&Fa(e)>Dc)throw new Error(t+"contains a string greater than "+Dc+" utf8 bytes "+ri(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,r=!1;if(at(e,(o,l)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(r=!0,!y_(o)))throw new Error(t+" contains an invalid key ("+o+") "+ri(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);q2(i,o),__(t,l,i),Q2(i)}),s&&r)throw new Error(t+' contains ".value" child '+ri(i)+" in addition to actual children.")}},v_=function(t,e,n,i){if(!x_(n))throw new Error(cx(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},PC=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),v_(t,e,n)},RC=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!y_(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!jC(n))throw new Error(cx(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function b_(t,e){let n=null;for(let i=0;i<e.length;i++){const s=e[i],r=s.getPath();n!==null&&!xh(r,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:r}),n.events.push(s)}n&&t.eventLists_.push(n)}function w_(t,e,n){b_(t,n),S_(t,i=>xh(i,e))}function Mi(t,e,n){b_(t,n),S_(t,i=>Dt(i,e)||Dt(e,i))}function S_(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const s=t.eventLists_[i];if(s){const r=s.path;e(r)?(OC(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function OC(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();hr&&Be("event: "+n.toString()),co(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="repo_interrupt",FC=25;class zC{constructor(e,n,i,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new DC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Jl(),this.transactionQueueTree_=new Oh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function WC(t,e,n){if(t.stats_=gh(t.repoInfo_),t.forceRestClient_||_2())t.server_=new Zl(t.repoInfo_,(i,s,r,o)=>{dm(t,i,s,r,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>hm(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ne(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new un(t.repoInfo_,e,(i,s,r,o)=>{dm(t,i,s,r,o)},i=>{hm(t,i)},i=>{HC(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=k2(t.repoInfo_,()=>new wk(t.stats_,t.server_)),t.infoData_=new yk,t.infoSyncTree_=new am({startListening:(i,s,r,o)=>{let l=[];const a=t.infoData_.getNode(i._path);return a.isEmpty()||(l=$a(t.infoSyncTree_,i._path,a),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),Fh(t,"connected",!1),t.serverSyncTree_=new am({startListening:(i,s,r,o)=>(t.server_.listen(i,r,s,(l,a)=>{const c=o(l,a);Mi(t.eventQueue_,i._path,c)}),[]),stopListening:(i,s)=>{t.server_.unlisten(i,s)}})}function BC(t){const n=t.infoData_.getNode(new ee(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function k_(t){return wC({timestamp:BC(t)})}function dm(t,e,n,i,s){t.dataUpdateCount++;const r=new ee(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(i){const a=Vl(n,c=>He(c));o=yC(t.serverSyncTree_,r,a,s)}else{const a=He(n);o=gC(t.serverSyncTree_,r,a,s)}else if(i){const a=Vl(n,c=>He(c));o=fC(t.serverSyncTree_,r,a)}else{const a=He(n);o=$a(t.serverSyncTree_,r,a)}let l=r;o.length>0&&(l=Wh(t,r)),Mi(t.eventQueue_,l,o)}function hm(t,e){Fh(t,"connected",e),e===!1&&UC(t)}function HC(t,e){at(e,(n,i)=>{Fh(t,n,i)})}function Fh(t,e,n){const i=new ee("/.info/"+e),s=He(n);t.infoData_.updateSnapshot(i,s);const r=$a(t.infoSyncTree_,i,s);Mi(t.eventQueue_,i,r)}function $C(t){return t.nextWriteId_++}function UC(t){C_(t,"onDisconnectEvents");const e=k_(t),n=Jl();Ku(t.onDisconnect_,G(),(s,r)=>{const o=CC(s,r,t.serverSyncTree_,e);Qx(n,s,o)});let i=[];Ku(n,G(),(s,r)=>{i=i.concat($a(t.serverSyncTree_,s,r));const o=QC(t,s);Wh(t,o)}),t.onDisconnect_=Jl(),Mi(t.eventQueue_,G(),i)}function VC(t,e,n){let i;H(e._path)===".info"?i=cm(t.infoSyncTree_,e,n):i=cm(t.serverSyncTree_,e,n),w_(t.eventQueue_,e._path,i)}function YC(t,e,n){let i;H(e._path)===".info"?i=Ju(t.infoSyncTree_,e,n):i=Ju(t.serverSyncTree_,e,n),w_(t.eventQueue_,e._path,i)}function KC(t){t.persistentConnection_&&t.persistentConnection_.interrupt(LC)}function C_(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Be(n,...e)}function E_(t,e,n){return u_(t.serverSyncTree_,e,n)||O.EMPTY_NODE}function zh(t,e=t.transactionQueueTree_){if(e||Ya(t,e),Ts(e)){const n=T_(t,e);M(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&GC(t,fo(e),n)}else m_(e)&&Va(e,n=>{zh(t,n)})}function GC(t,e,n){const i=n.map(c=>c.currentWriteId),s=E_(t,e,i);let r=s;const o=s.hash();for(let c=0;c<n.length;c++){const d=n[c];M(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const h=it(e,d.path);r=r.updateChild(h,d.currentOutputSnapshotRaw)}const l=r.val(!0),a=e;t.server_.put(a.toString(),l,c=>{C_(t,"transaction put response",{path:a.toString(),status:c});let d=[];if(c==="ok"){const h=[];for(let f=0;f<n.length;f++)n[f].status=2,d=d.concat(Gi(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&h.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Ya(t,Lh(t.transactionQueueTree_,e)),zh(t,t.transactionQueueTree_),Mi(t.eventQueue_,e,d);for(let f=0;f<h.length;f++)co(h[f])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{ht("transaction at "+a.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}Wh(t,e)}},o)}function Wh(t,e){const n=N_(t,e),i=fo(n),s=T_(t,n);return qC(t,s,i),i}function qC(t,e,n){if(e.length===0)return;const i=[];let s=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const a=e[l],c=it(n,a.path);let d=!1,h;if(M(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)d=!0,h=a.abortReason,s=s.concat(Gi(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=FC)d=!0,h="maxretry",s=s.concat(Gi(t.serverSyncTree_,a.currentWriteId,!0));else{const f=E_(t,a.path,o);a.currentInputSnapshot=f;const p=e[l].update(f.val());if(p!==void 0){__("transaction failed: Data returned ",p,a.path);let m=He(p);typeof p=="object"&&p!=null&&_n(p,".priority")||(m=m.updatePriority(f.getPriority()));const v=a.currentWriteId,g=k_(t),y=EC(m,f,g);a.currentOutputSnapshotRaw=m,a.currentOutputSnapshotResolved=y,a.currentWriteId=$C(t),o.splice(o.indexOf(v),1),s=s.concat(hC(t.serverSyncTree_,a.path,y,a.currentWriteId,a.applyLocally)),s=s.concat(Gi(t.serverSyncTree_,v,!0))}else d=!0,h="nodata",s=s.concat(Gi(t.serverSyncTree_,a.currentWriteId,!0))}Mi(t.eventQueue_,n,s),s=[],d&&(e[l].status=2,function(f){setTimeout(f,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(h==="nodata"?i.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):i.push(()=>e[l].onComplete(new Error(h),!1,null))))}Ya(t,t.transactionQueueTree_);for(let l=0;l<i.length;l++)co(i[l]);zh(t,t.transactionQueueTree_)}function N_(t,e){let n,i=t.transactionQueueTree_;for(n=H(e);n!==null&&Ts(i)===void 0;)i=Lh(i,n),e=se(e),n=H(e);return i}function T_(t,e){const n=[];return I_(t,e,n),n.sort((i,s)=>i.order-s.order),n}function I_(t,e,n){const i=Ts(e);if(i)for(let s=0;s<i.length;s++)n.push(i[s]);Va(e,s=>{I_(t,s,n)})}function Ya(t,e){const n=Ts(e);if(n){let i=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[i]=n[s],i++);n.length=i,p_(e,n.length>0?n:void 0)}Va(e,i=>{Ya(t,i)})}function QC(t,e){const n=fo(N_(t,e)),i=Lh(t.transactionQueueTree_,e);return TC(i,s=>{Oc(t,s)}),Oc(t,i),g_(i,s=>{Oc(t,s)}),n}function Oc(t,e){const n=Ts(e);if(n){const i=[];let s=[],r=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(M(r===o-1,"All SENT items should be at beginning of queue."),r=o,n[o].status=3,n[o].abortReason="set"):(M(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Gi(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));r===-1?p_(e,void 0):n.length=r+1,Mi(t.eventQueue_,fo(e),s);for(let o=0;o<i.length;o++)co(i[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let s=n[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function ZC(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):ht(`Invalid query segment '${n}' in query '${t}'`)}return e}const fm=function(t,e){const n=JC(t),i=n.namespace;n.domain==="firebase.com"&&gn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&gn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||u2();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Ax(n.host,n.secure,i,s,e,"",i!==n.subdomain),path:new ee(n.pathString)}},JC=function(t){let e="",n="",i="",s="",r="",o=!0,l="https",a=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(l=t.substring(0,c-1),t=t.substring(c+2));let d=t.indexOf("/");d===-1&&(d=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(d,h)),d<h&&(s=XC(t.substring(d,h)));const f=ZC(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o=l==="https"||l==="wss",a=parseInt(e.substring(c+1),10)):c=e.length;const p=e.slice(0,c);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{const m=e.indexOf(".");i=e.substring(0,m).toLowerCase(),n=e.substring(m+1),r=i}"ns"in f&&(r=f.ns)}return{host:e,port:a,domain:n,subdomain:i,secure:o,scheme:l,pathString:s,namespace:r}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,n,i,s){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ne(this.snapshot.exportVal())}}class tE{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return M(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n,i,s){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=s}get key(){return $(this._path)?null:Wx(this._path)}get ref(){return new Zn(this._repo,this._path)}get _queryIdentifier(){const e=Xp(this._queryParams),n=ph(e);return n==="{}"?"default":n}get _queryObject(){return Xp(this._queryParams)}isEqual(e){if(e=za(e),!(e instanceof Bh))return!1;const n=this._repo===e._repo,i=xh(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+K2(this._path)}}class Zn extends Bh{constructor(e,n){super(e,n,new wh,!1)}get parent(){const e=Hx(this._path);return e===null?null:new Zn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class la{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ee(e),i=td(this.ref,e);return new la(this._node.getChild(n),i,ye)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,s)=>e(new la(s,td(this.ref,i),ye)))}hasChild(e){const n=new ee(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function po(t,e){return t=za(t),t._checkNotDeleted("ref"),e!==void 0?td(t._root,e):t._root}function td(t,e){return t=za(t),H(t._path)===null?PC("child","path",e):v_("child","path",e),new Zn(t._repo,we(t._path,e))}class Hh{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new eE("value",this,new la(e.snapshotNode,new Zn(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new tE(this,e,n):null}matches(e){return e instanceof Hh?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function iE(t,e,n,i,s){const r=new nE(n,void 0),o=new Hh(r);return VC(t._repo,t,o),()=>YC(t._repo,t,o)}function mo(t,e,n,i){return iE(t,"value",e)}iC(Zn);cC(Zn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="FIREBASE_DATABASE_EMULATOR_HOST",nd={};let rE=!1;function oE(t,e,n,i){const s=e.lastIndexOf(":"),r=e.substring(0,s),o=hh(r);t.repoInfo_=new Ax(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),i&&(t.authTokenProvider_=i)}function lE(t,e,n,i,s){let r=i||t.options.databaseURL;r===void 0&&(t.options.projectId||gn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Be("Using default host for project ",t.options.projectId),r=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=fm(r,s),l=o.repoInfo,a;typeof process<"u"&&Pp&&(a=Pp[sE]),a?(r=`http://${a}?ns=${l.namespace}`,o=fm(r,s),l=o.repoInfo):o.repoInfo.secure;const c=new b2(t.name,t.options,e);RC("Invalid Firebase Database URL",o),$(o.path)||gn("Database URL must point to the root of a Firebase Database (not including a child path).");const d=cE(l,t,c,new v2(t,n));return new uE(d,t)}function aE(t,e){const n=nd[e];(!n||n[t.key]!==t)&&gn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),KC(t),delete n[t.key]}function cE(t,e,n,i){let s=nd[e.name];s||(s={},nd[e.name]=s);let r=s[t.toURLString()];return r&&gn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new zC(t,rE,n,i),s[t.toURLString()]=r,r}class uE{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(WC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Zn(this._repo,G())),this._rootInternal}_delete(){return this._rootInternal!==null&&(aE(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&gn("Cannot call "+e+" on a deleted database.")}}function dE(t=VS(),e){const n=WS(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=Ew("database");i&&hE(n,...i)}return n}function hE(t,e,n,i={}){t=za(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,r=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&Yl(i,r.repoInfo_.emulatorOptions))return;gn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&gn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new fl(fl.OWNER);else if(i.mockUserToken){const l=typeof i.mockUserToken=="string"?i.mockUserToken:Tw(i.mockUserToken,t.app.options.projectId);o=new fl(l)}hh(e)&&(Nw(e),Aw("Database",!0)),oE(r,s,i,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(t){s2(US),Gl(new Br("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return lE(i,s,r,n)},"PUBLIC").setMultipleInstances(!0)),ts(Rp,Dp,t),ts(Rp,Dp,"esm2017")}un.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};un.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};fE();const pE={apiKey:"AIzaSyAICMsMCE3EfgRPK_h6zmS0rz0PnNNl8Cg",authDomain:"uwb-localization-ebf72.firebaseapp.com",databaseURL:"https://uwb-localization-ebf72-default-rtdb.firebaseio.com",projectId:"uwb-localization-ebf72",storageBucket:"uwb-localization-ebf72.appspot.com",messagingSenderId:"266129292178",appId:"1:266129292178:web:35f67c661ef03233995f4b",measurementId:"G-L1L6KL7R1E"},mE=fx(pE),go=dE(mE);function $h(){const[t,e]=N.useState(null);return N.useEffect(()=>{const n=po(go,"/localization"),i=mo(n,s=>{var a,c,d,h,f,p;const r=s.val();console.log(" Firebase raw data:",r);const o=m=>{if(!m)return[0,0];const x=parseFloat(m[0]??m[0])||0,v=parseFloat(m[1]??m[1])||0;return[x,v]},l={tag:o(r==null?void 0:r.tag),tdoa:{tdoa12:parseFloat((a=r==null?void 0:r.tdoa)==null?void 0:a.A1_A2)||0,tdoa13:parseFloat((c=r==null?void 0:r.tdoa)==null?void 0:c.A1_A3)||0,tdoa23:parseFloat((d=r==null?void 0:r.tdoa)==null?void 0:d.A2_A3)||0},anchors:{A1:o((h=r==null?void 0:r.anchors)==null?void 0:h.A1),A2:o((f=r==null?void 0:r.anchors)==null?void 0:f.A2),A3:o((p=r==null?void 0:r.anchors)==null?void 0:p.A3)},accuracy:parseFloat(r==null?void 0:r.accuracy)||0};e(l)});return()=>i()},[]),t}const gE=()=>{const[t,e]=N.useState(!1),[n,i]=N.useState(.7),[s,r]=N.useState({x:0,y:0}),[o,l]=N.useState(!1),[a,c]=N.useState({x:0,y:0}),[d,h]=N.useState([]),f=N.useRef(null),p=$h(),m=(p==null?void 0:p.tag)??[0,0],x=(p==null?void 0:p.tdoa)??{tdoa12:0,tdoa13:0,tdoa23:0},v=(p==null?void 0:p.anchors)??{};p==null||p.accuracy;const g=100,y=.6,_=(C,T)=>({x:C*g*n+s.x,y:550-T*g*n+s.y}),b=_(m[0],m[1]);N.useEffect(()=>{t&&h(C=>{const T=[...C,b];return T.length>100?T.slice(-100):T})},[m[0],m[1],t]);const w={A1:"bg-blue-600",A2:"bg-green-600",A3:"bg-purple-600"},k=["A1","A2","A3"].map(C=>{const T=v[C]||{},R=typeof T[0]=="number"?T[0]:T[0]??0,F=typeof T[1]=="number"?T[1]:T[1]??0;return{id:C,position:_(R,F),realX:R,realY:F,color:w[C]||"bg-gray-600"}}),S=[{label:"Tag X Position",value:`${m[0].toFixed(2)} m`,icon:Nt},{label:"Tag Y Position",value:`${m[1].toFixed(2)} m`,icon:Nt},{label:"TDOA A1-A2",value:`${x.tdoa12.toFixed(3)} ns`,icon:Hl},{label:"TDOA A1-A3",value:`${x.tdoa13.toFixed(3)} ns`,icon:Hl}],E=C=>{l(!0),c({x:C.clientX-s.x,y:C.clientY-s.y})},j=C=>{o&&r({x:C.clientX-a.x,y:C.clientY-a.y})},A=()=>l(!1);return u.jsx("div",{className:"space-y-6",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Time Difference of Arrival (TDOA)"}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>i(C=>Math.min(2,C+.1)),className:"px-3 py-1 bg-blue-600 text-white rounded-lg",children:"Zoom In"}),u.jsx("button",{onClick:()=>i(C=>Math.max(.5,C-.1)),className:"px-3 py-1 bg-blue-600 text-white rounded-lg",children:"Zoom Out"}),u.jsx("button",{onClick:()=>{i(1),r({x:0,y:0})},className:"px-3 py-1 bg-blue-600 text-white rounded-lg",children:"Reset View"}),u.jsx("button",{onClick:()=>{e(C=>!C),t&&h([])},className:`px-4 py-2 rounded-lg font-medium transition-colors ${t?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"}`,children:t?"Stop Tracking":"Start Tracking"})]})]}),u.jsxs("div",{className:"flex gap-6",children:[u.jsxs("div",{className:"flex-1 bg-gray-50 rounded-lg p-6",children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Localization Area"}),u.jsxs("div",{ref:f,className:"relative w-full h-[600px] bg-white border border-gray-300 overflow-hidden cursor-move",onMouseDown:E,onMouseMove:j,onMouseUp:A,onMouseLeave:A,children:[u.jsxs("div",{className:"absolute inset-0",children:[Array.from({length:100},(C,T)=>u.jsx("div",{className:"absolute w-px bg-gray-200",style:{left:`${T*y*g*n+s.x}px`,height:"100%"}},`vline-${T}`)),Array.from({length:100},(C,T)=>u.jsx("div",{className:"absolute h-px bg-gray-200",style:{top:`${T*y*g*n+s.y}px`,width:"100%"}},`hline-${T}`))]}),u.jsxs("svg",{className:"absolute inset-0 w-full h-full",children:[u.jsx("line",{x1:s.x,y1:0,x2:s.x,y2:600,stroke:"gray",strokeWidth:"1"}),u.jsx("line",{x1:0,y1:600-s.y,x2:2e3,y2:600-s.y,stroke:"gray",strokeWidth:"1"}),u.jsx("polyline",{fill:"none",stroke:"red",strokeWidth:"2",strokeDasharray:"6,4",points:[_(1.8,1.38),_(1.8,3.18),_(3,3.18),_(3,3.75),_(6,3.75),_(6,1.38),_(1.8,1.38)].map(C=>`${C.x},${C.y}`).join(" ")})]}),u.jsxs("svg",{className:"absolute inset-0 w-full h-full",children:[u.jsx("line",{x1:s.x,y1:0,x2:s.x,y2:600,stroke:"gray",strokeWidth:"1"}),u.jsx("line",{x1:0,y1:600-s.y,x2:2e3,y2:600-s.y,stroke:"gray",strokeWidth:"1"}),d.length>1&&u.jsx("polyline",{points:d.map(C=>`${C.x},${C.y}`).join(" "),fill:"none",stroke:"purple",strokeWidth:"2"})]}),Array.from({length:100},(C,T)=>u.jsx("div",{className:"absolute text-xs text-gray-400",style:{left:`${T*y*g*n+s.x+2}px`,top:`${550-s.y+2}px`},children:`${(T*y).toFixed(1)}m`},`xlabel-${T}`)),Array.from({length:100},(C,T)=>u.jsx("div",{className:"absolute text-xs text-gray-400",style:{top:`${550-T*y*g*n+s.y}px`,left:`${s.x+2}px`},children:`${(T*y).toFixed(1)}m`},`ylabel-${T}`)),k.map(C=>u.jsxs("div",{children:[u.jsx(Oa,{id:C.id,position:C.position,color:C.color,isActive:t}),u.jsxs("div",{className:"absolute text-xs text-black",style:{left:C.position.x+16,top:C.position.y-16},children:["(",C.realX.toFixed(1),", ",C.realY.toFixed(1),") m"]})]},C.id)),d.map((C,T)=>u.jsx("div",{className:"absolute w-2 h-2 bg-orange-500 rounded-full opacity-70",style:{left:C.x-4,top:C.y-4}},`trail-${T}`)),u.jsx(La,{id:"Tag",position:b,isActive:!0})]})]}),u.jsx("div",{className:"w-56 space-y-4",children:u.jsx(ro,{metrics:S})})]})]})})};function aa(){const[t,e]=N.useState(null);return N.useEffect(()=>{const n=po(go,"/kalman"),i=mo(n,s=>{var a,c,d;const r=s.val(),o=h=>{if(!h)return[0,0];const f=parseFloat(h[0]??h[0])||0,p=parseFloat(h[1]??h[1])||0;return[f,p]},l={tag_tdoa:o(r==null?void 0:r.tag_tdoa),tag_kalman:o(r==null?void 0:r.tag_kalman),anchors:{A1:o((a=r==null?void 0:r.anchors)==null?void 0:a.A1),A2:o((c=r==null?void 0:r.anchors)==null?void 0:c.A2),A3:o((d=r==null?void 0:r.anchors)==null?void 0:d.A3)},accuracy:parseFloat(r==null?void 0:r.accuracy)||0};e(l)});return()=>i()},[]),t}const yE=()=>{const[t,e]=N.useState(!1),[n,i]=N.useState(.7),s=aa(),[r,o]=N.useState(.8),[l,a]=N.useState({x:0,y:0}),[c,d]=N.useState(!1),[h,f]=N.useState({x:0,y:0}),[p,m]=N.useState([]),x=N.useRef(null);aa();const v=(s==null?void 0:s.tag_kalman)??[0,0],g=(s==null?void 0:s.tag_kalman)??[0,0];s==null||s.tag_tdoa;const y=(s==null?void 0:s.anchors)??{};s==null||s.accuracy;const _=100,b=.6,w=(R,F)=>({x:R*_*n+l.x,y:550-F*_*n+l.y}),k=w(v[0],v[1]);N.useEffect(()=>{t&&m(R=>{const F=[...R,k];return F.length>100?F.slice(-100):F})},[v[0],v[1],t]);const S={A1:"bg-blue-600",A2:"bg-green-600",A3:"bg-purple-600"},E=["A1","A2","A3"].map(R=>{const F=y[R]||{},te=typeof F[0]=="number"?F[0]:F[0]??0,de=typeof F[1]=="number"?F[1]:F[1]??0;return{id:R,position:w(te,de),realX:te,realY:de,color:S[R]||"bg-gray-600"}}),j=[{label:"Raw X Position",value:`${v[0].toFixed(2)} m`,icon:Nt},{label:"Raw Y Position",value:`${v[1].toFixed(2)} m`,icon:Nt},{label:"Filtered X Position",value:`${g[0].toFixed(2)} m`,icon:yp},{label:"Filtered Y Position",value:`${g[1].toFixed(2)} m`,icon:yp},{label:"Kalman Gain",value:r.toFixed(2),icon:cw},{label:"Accuracy",value:"0.05 m",icon:Da}],A=R=>{d(!0),f({x:R.clientX-l.x,y:R.clientY-l.y})},C=R=>{c&&a({x:R.clientX-h.x,y:R.clientY-h.y})},T=()=>d(!1);return u.jsx("div",{className:"space-y-6",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Time Difference of Arrival (TDOA)"}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>i(R=>Math.min(2,R+.1)),className:"px-3 py-1 bg-blue-600 text-white rounded-lg",children:"Zoom In"}),u.jsx("button",{onClick:()=>i(R=>Math.max(.5,R-.1)),className:"px-3 py-1 bg-blue-600 text-white rounded-lg",children:"Zoom Out"}),u.jsx("button",{onClick:()=>{i(1),a({x:0,y:0})},className:"px-3 py-1 bg-blue-600 text-white rounded-lg",children:"Reset View"}),u.jsx("button",{onClick:()=>{e(R=>!R),t&&m([])},className:`px-4 py-2 rounded-lg font-medium transition-colors ${t?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"}`,children:t?"Stop Tracking":"Start Tracking"})]})]}),u.jsxs("div",{className:"flex gap-6",children:[u.jsxs("div",{className:"flex-1 bg-gray-50 rounded-lg p-6",children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Localization Area"}),u.jsxs("div",{ref:x,className:"relative w-full h-[600px] bg-white border border-gray-300 overflow-hidden cursor-move",onMouseDown:A,onMouseMove:C,onMouseUp:T,onMouseLeave:T,children:[u.jsxs("div",{className:"absolute inset-0",children:[Array.from({length:100},(R,F)=>u.jsx("div",{className:"absolute w-px bg-gray-200",style:{left:`${F*b*_*n+l.x}px`,height:"100%"}},`vline-${F}`)),Array.from({length:100},(R,F)=>u.jsx("div",{className:"absolute h-px bg-gray-200",style:{top:`${F*b*_*n+l.y}px`,width:"100%"}},`hline-${F}`))]}),u.jsxs("svg",{className:"absolute inset-0 w-full h-full",children:[u.jsx("line",{x1:l.x,y1:0,x2:l.x,y2:600,stroke:"gray",strokeWidth:"1"}),u.jsx("line",{x1:0,y1:600-l.y,x2:2e3,y2:600-l.y,stroke:"gray",strokeWidth:"1"}),u.jsx("polyline",{fill:"none",stroke:"red",strokeWidth:"2",strokeDasharray:"6,4",points:[w(1.8,1.38),w(1.8,3.18),w(3,3.18),w(3,3.75),w(6,3.75),w(6,1.38),w(1.8,1.38)].map(R=>`${R.x},${R.y}`).join(" ")})]}),u.jsxs("svg",{className:"absolute inset-0 w-full h-full",children:[u.jsx("line",{x1:l.x,y1:0,x2:l.x,y2:600,stroke:"gray",strokeWidth:"1"}),u.jsx("line",{x1:0,y1:600-l.y,x2:2e3,y2:600-l.y,stroke:"gray",strokeWidth:"1"}),p.length>1&&u.jsx("polyline",{points:p.map(R=>`${R.x},${R.y}`).join(" "),fill:"none",stroke:"purple",strokeWidth:"2"})]}),Array.from({length:100},(R,F)=>u.jsx("div",{className:"absolute text-xs text-gray-400",style:{left:`${F*b*_*n+l.x+2}px`,top:`${550-l.y+2}px`},children:`${(F*b).toFixed(1)}m`},`xlabel-${F}`)),Array.from({length:100},(R,F)=>u.jsx("div",{className:"absolute text-xs text-gray-400",style:{top:`${550-F*b*_*n+l.y}px`,left:`${l.x+2}px`},children:`${(F*b).toFixed(1)}m`},`ylabel-${F}`)),E.map(R=>u.jsxs("div",{children:[u.jsx(Oa,{id:R.id,position:R.position,color:R.color,isActive:t}),u.jsxs("div",{className:"absolute text-xs text-black",style:{left:R.position.x+16,top:R.position.y-16},children:["(",R.realX.toFixed(1),", ",R.realY.toFixed(1),") m"]})]},R.id)),p.map((R,F)=>u.jsx("div",{className:"absolute w-2 h-2 bg-orange-500 rounded-full opacity-70",style:{left:R.x-4,top:R.y-4}},`trail-${F}`)),u.jsx(La,{id:"Tag",position:k,isActive:!0})]})]}),u.jsx("div",{className:"w-56 space-y-4",children:u.jsx(ro,{metrics:j})})]})]})})};function Uh(){const[t,e]=N.useState(null);return N.useEffect(()=>{const n=po(go,"/ML"),i=mo(n,s=>{var a,c,d;const r=s.val();console.log(" ML Firebase Data:",r);const o=h=>{if(!h)return[0,0];const f=parseFloat(h[0]??h[0])||0,p=parseFloat(h[1]??h[1])||0;return[f,p]},l={tag_tdoa:o(r==null?void 0:r.tag_tdoa),tag_ML:o(r==null?void 0:r.tag_ML),anchors:{A1:o((a=r==null?void 0:r.anchors)==null?void 0:a.A1),A2:o((c=r==null?void 0:r.anchors)==null?void 0:c.A2),A3:o((d=r==null?void 0:r.anchors)==null?void 0:d.A3)},accuracy:parseFloat(r==null?void 0:r.accuracy)||0};e(l)});return()=>i()},[]),t}const xE=()=>{const t=Uh(),[e,n]=N.useState(!1),[i,s]=N.useState(.7),[r,o]=N.useState({x:0,y:0}),[l,a]=N.useState(!1),[c,d]=N.useState({x:0,y:0}),[h,f]=N.useState([]),p=100,m=.6,x=550,v=(C,T)=>({x:C*p*i+r.x,y:x-T*p*i+r.y}),g=(t==null?void 0:t.tag_ML)??[0,0],y=(t==null?void 0:t.accuracy)??0,_=(t==null?void 0:t.anchors)??{};N.useEffect(()=>{e&&f(C=>{const T=[...C,k];return T.length>100?T.slice(-100):T})},[g[0],g[1],e]);const b={A1:"bg-blue-600",A2:"bg-green-600",A3:"bg-purple-600"},w=["A1","A2","A3"].map(C=>{const[T,R]=_[C]??[0,0];return{id:C,position:v(T,R),realX:T,realY:R,color:b[C]||"bg-gray-600"}}),k=v(g[0],g[1]),S=[{label:"Tag X Position",value:`${g[0].toFixed(2)} m`,icon:Nt},{label:"Tag Y Position",value:`${g[1].toFixed(2)} m`,icon:Nt},{label:"Accuracy",value:`${y.toFixed(1)} m`,icon:Da}],E=C=>{a(!0),d({x:C.clientX-r.x,y:C.clientY-r.y})},j=C=>{l&&o({x:C.clientX-c.x,y:C.clientY-c.y})},A=()=>a(!1);return u.jsx("div",{className:"space-y-6",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"TDOA with Machine Learning"}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>s(C=>Math.min(2,C+.1)),className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Zoom In"}),u.jsx("button",{onClick:()=>s(C=>Math.max(.5,C-.1)),className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Zoom Out"}),u.jsx("button",{onClick:()=>{s(1),o({x:0,y:0})},className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Reset View"}),u.jsx("button",{onClick:()=>{n(C=>!C),e&&f([])},className:`px-4 py-2 rounded-lg font-medium transition-colors ${e?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"}`,children:e?"Stop Tracking":"Start Tracking"})]})]}),u.jsxs("div",{className:"flex gap-6",children:[u.jsxs("div",{className:"flex-1 bg-gray-50 rounded-lg p-6",children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Localization Area"}),u.jsxs("div",{className:"relative w-full h-[600px] bg-white border border-gray-300 overflow-hidden cursor-move",onMouseDown:E,onMouseMove:j,onMouseUp:A,onMouseLeave:A,children:[u.jsxs("div",{className:"absolute inset-0",children:[Array.from({length:100},(C,T)=>u.jsx("div",{className:"absolute w-px bg-gray-200",style:{left:`${T*m*p*i+r.x}px`,height:"100%"}},`vline-${T}`)),Array.from({length:100},(C,T)=>u.jsx("div",{className:"absolute h-px bg-gray-200",style:{top:`${x-T*m*p*i+r.y}px`,width:"100%"}},`hline-${T}`))]}),u.jsxs("svg",{className:"absolute inset-0 w-full h-full",children:[u.jsx("line",{x1:r.x,y1:0,x2:r.x,y2:x,stroke:"gray",strokeWidth:"1"}),u.jsx("line",{x1:0,y1:x-r.y,x2:2e3,y2:x-r.y,stroke:"gray",strokeWidth:"1"})]}),u.jsxs("svg",{className:"absolute inset-0 w-full h-full",children:[u.jsx("line",{x1:r.x,y1:0,x2:r.x,y2:550,stroke:"gray",strokeWidth:"1"}),u.jsx("line",{x1:0,y1:550-r.y,x2:2e3,y2:550-r.y,stroke:"gray",strokeWidth:"1"}),u.jsx("polyline",{fill:"none",stroke:"red",strokeWidth:"2",strokeDasharray:"6,4",points:[v(1.8,1.38),v(1.8,3.18),v(3,3.18),v(3,3.75),v(6,3.75),v(6,1.38),v(1.8,1.38)].map(C=>`${C.x},${C.y}`).join(" ")})]}),u.jsxs("svg",{className:"absolute inset-0 w-full h-full",children:[u.jsx("line",{x1:r.x,y1:0,x2:r.x,y2:550,stroke:"gray",strokeWidth:"1"}),u.jsx("line",{x1:0,y1:550-r.y,x2:2e3,y2:550-r.y,stroke:"gray",strokeWidth:"1"}),h.length>1&&u.jsx("polyline",{points:h.map(C=>`${C.x},${C.y}`).join(" "),fill:"none",stroke:"purple",strokeWidth:"2"})]}),Array.from({length:100},(C,T)=>u.jsx("div",{className:"absolute text-xs text-gray-400",style:{left:`${T*m*p*i+r.x+2}px`,top:`${550-r.y+2}px`},children:`${(T*m).toFixed(1)}m`},`xlabel-${T}`)),Array.from({length:100},(C,T)=>u.jsx("div",{className:"absolute text-xs text-gray-400",style:{top:`${550-T*m*p*i+r.y}px`,left:`${r.x+2}px`},children:`${(T*m).toFixed(1)}m`},`ylabel-${T}`)),w.map(C=>u.jsxs("div",{children:[u.jsx(Oa,{id:C.id,position:C.position,color:C.color,isActive:e}),u.jsxs("div",{className:"absolute text-xs text-black",style:{left:C.position.x+16,top:C.position.y-16},children:["(",C.realX.toFixed(1),", ",C.realY.toFixed(1),") m"]})]},C.id)),h.map((C,T)=>u.jsx("div",{className:"absolute w-2 h-2 bg-orange-500 rounded-full opacity-70",style:{left:C.x-4,top:C.y-4}},`trail-${T}`)),u.jsx(La,{id:"ML",position:k,isActive:e,color:"bg-blue-600"})]})]}),u.jsx("div",{className:"w-56 space-y-4",children:u.jsx(ro,{metrics:S})})]})]})})},_E=()=>{const[t,e]=N.useState({x:200,y:150}),[n,i]=N.useState(!1),[s,r]=N.useState({a1:45,a2:135,a3:270}),o=[{id:"A1",position:{x:50,y:50},color:"bg-blue-600"},{id:"A2",position:{x:350,y:50},color:"bg-green-600"},{id:"A3",position:{x:200,y:250},color:"bg-purple-600"}];N.useEffect(()=>{const a=setInterval(()=>{if(n){const c={x:Math.max(70,Math.min(330,t.x+(Math.random()-.5)*20)),y:Math.max(70,Math.min(230,t.y+(Math.random()-.5)*20))};e(c);const d={a1:Math.atan2(c.y-o[0].position.y,c.x-o[0].position.x)*180/Math.PI+(Math.random()-.5)*10,a2:Math.atan2(c.y-o[1].position.y,c.x-o[1].position.x)*180/Math.PI+(Math.random()-.5)*10,a3:Math.atan2(c.y-o[2].position.y,c.x-o[2].position.x)*180/Math.PI+(Math.random()-.5)*10};r(d)}},500);return()=>clearInterval(a)},[n,t]);const l=[{label:"Tag X Position",value:`${((t.x-50)/10).toFixed(1)} m`,icon:Nt},{label:"Tag Y Position",value:`${((250-t.y)/10).toFixed(1)} m`,icon:Nt},{label:"Angle from A1",value:`${s.a1.toFixed(1)}`,icon:Cc},{label:"Angle from A2",value:`${s.a2.toFixed(1)}`,icon:Cc},{label:"Angle from A3",value:`${s.a3.toFixed(1)}`,icon:Cc},{label:"Accuracy",value:"2",icon:Da}];return u.jsx("div",{className:"space-y-6",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Angle of Arrival (AOA)"}),u.jsx("button",{onClick:()=>i(!n),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"}`,children:n?"Stop Tracking":"Start Tracking"})]}),u.jsxs("div",{className:"flex gap-6",children:[u.jsxs("div",{className:"flex-1 bg-gray-50 rounded-lg p-6",children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Localization Area"}),u.jsxs("div",{className:"relative w-full h-96 bg-white rounded-lg border-2 border-gray-200 overflow-hidden",children:[u.jsxs("div",{className:"absolute inset-0 opacity-20",children:[Array.from({length:21},(a,c)=>u.jsx("div",{className:"absolute bg-gray-300 w-px h-full",style:{left:`${c*5}%`}},`v-${c}`)),Array.from({length:17},(a,c)=>u.jsx("div",{className:"absolute bg-gray-300 h-px w-full",style:{top:`${c*6.25}%`}},`h-${c}`))]}),o.map(a=>u.jsx(Oa,{id:a.id,position:a.position,color:a.color,isActive:n},a.id)),u.jsx(La,{id:"Tag",position:t,isActive:n}),n&&u.jsx("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",children:o.map((a,c)=>{const d=Object.values(s)[c],h=60,f=a.position.x+Math.cos(d*Math.PI/180)*h,p=a.position.y+Math.sin(d*Math.PI/180)*h;return u.jsxs("g",{children:[u.jsx("line",{x1:a.position.x,y1:a.position.y,x2:f,y2:p,stroke:a.color.replace("bg-","").replace("-600",""),strokeWidth:"3",opacity:"0.7"}),u.jsx("polygon",{points:`${f},${p} ${f-8},${p-4} ${f-8},${p+4}`,fill:a.color.replace("bg-","").replace("-600",""),opacity:"0.7"})]},`angle-${c}`)})})]})]}),u.jsxs("div",{className:"w-80 space-y-4",children:[u.jsx(ro,{metrics:l}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[u.jsx("h3",{className:"text-sm font-semibold mb-2",children:"AOA Principle"}),u.jsxs("div",{className:"space-y-1.5 text-xs",children:[u.jsxs("div",{className:"flex items-start space-x-2",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-blue-600 rounded-full mt-1"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:"Antenna Arrays"}),u.jsx("p",{className:"text-gray-600",children:"Multiple antennas measure signal phase differences"})]})]}),u.jsxs("div",{className:"flex items-start space-x-2",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-green-600 rounded-full mt-1"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:"Phase Difference"}),u.jsx("p",{className:"text-gray-600",children:"Calculate arrival angle from phase measurements"})]})]}),u.jsxs("div",{className:"flex items-start space-x-2",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-purple-600 rounded-full mt-1"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:"Triangulation"}),u.jsx("p",{className:"text-gray-600",children:"Use angles from multiple anchors to find position"})]})]}),u.jsxs("div",{className:"flex items-start space-x-2",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-orange-600 rounded-full mt-1"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:"Beamforming"}),u.jsx("p",{className:"text-gray-600",children:"Focus antenna pattern towards the tag"})]})]})]})]})]})]})]})})};function vE(t,e,n){const i=(e-90)*(Math.PI/180);return{x:t.x+n*Math.cos(i),y:t.y+n*Math.sin(i)}}function M_(t,e=.38){const[n,i]=N.useState({width:500,height:600});return N.useEffect(()=>{const s=()=>{if(t.current){const r=t.current.offsetWidth;i({width:r,height:r*e})}};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),n}function gt(t,e,n,i,s){return s+(t-e)/(n-e)*(i-2*s)}function yt(t,e,n,i,s){return i-s-(t-e)/(n-e)*(i-2*s)}const Q=50,Le=-6,Ke=6,Fe=0,Ge=5,bE=300,pm=({onFullScreen:t,isFullScreen:e})=>{const n=N.useRef(null),i=M_(n),[s,r]=N.useState(0),[o,l]=N.useState({x:-.5,y:0}),[a,c]=N.useState({x:.5,y:0});return N.useEffect(()=>{const d=po(go,"RawAOA"),h=mo(d,f=>{var x,v,g;const p=f.val();if(!p)return;r(parseFloat(((x=p.angles)==null?void 0:x.a1)||0));const m=y=>({x:parseFloat((y==null?void 0:y[0])??(y==null?void 0:y["0"]))||0,y:parseFloat((y==null?void 0:y[1])??(y==null?void 0:y["1"]))||0});(v=p.anchors)!=null&&v.A1&&l(m(p.anchors.A1)),(g=p.anchors)!=null&&g.A2&&c(m(p.anchors.A2))});return()=>h()},[]),u.jsx(A_,{containerRef:n,svgSize:i,aoaAngle:s,anchor1:o,anchor2:a,title:`Raw AoA: ${s.toFixed(2)}`,onFullScreen:t,isFullScreen:e,label:"Raw AOA"})},mm=({onFullScreen:t,isFullScreen:e})=>{const n=N.useRef(null),i=M_(n),[s,r]=N.useState(0),[o,l]=N.useState({x:-.5,y:0}),[a,c]=N.useState({x:.5,y:0});return N.useEffect(()=>{const d=po(go,"MLAOA"),h=mo(d,f=>{var x,v,g;const p=f.val();if(!p)return;r(parseFloat(((x=p.angles)==null?void 0:x.a1)||0));const m=y=>({x:parseFloat((y==null?void 0:y[0])??(y==null?void 0:y["0"]))||0,y:parseFloat((y==null?void 0:y[1])??(y==null?void 0:y["1"]))||0});(v=p.anchors)!=null&&v.A1&&l(m(p.anchors.A1)),(g=p.anchors)!=null&&g.A2&&c(m(p.anchors.A2))});return()=>h()},[]),u.jsx(A_,{containerRef:n,svgSize:i,aoaAngle:s,anchor1:o,anchor2:a,title:`Kalman AoA: ${s.toFixed(2)}`,onFullScreen:t,isFullScreen:e,label:"Improved AOA with Kalman"})},A_=({containerRef:t,svgSize:e,aoaAngle:n,anchor1:i,anchor2:s,title:r,onFullScreen:o,isFullScreen:l,label:a})=>{const{width:c,height:d}=e,h={x:0,y:0},f={x:gt(h.x,Le,Ke,c,Q),y:yt(h.y,Fe,Ge,d,Q)},p=vE(f,n,bE),m={x1:gt(i.x,Le,Ke,c,Q),y1:yt(i.y,Fe,Ge,d,Q),x2:gt(s.x,Le,Ke,c,Q),y2:yt(s.y,Fe,Ge,d,Q)},x=Array.from({length:Math.floor((Ke-Le)/.6+1)},(g,y)=>+(Le+y*.6).toFixed(2)),v=Array.from({length:Math.floor((Ge-Fe)/.6+1)},(g,y)=>+(Fe+y*.6).toFixed(2));return u.jsxs("div",{ref:t,className:"relative bg-white rounded-xl shadow p-4",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("span",{className:"font-semibold text-gray-700",children:a}),!l&&u.jsx("button",{onClick:o,className:"text-gray-400 hover:text-blue-600",children:u.jsx("svg",{width:20,height:20,viewBox:"0 0 20 20",children:u.jsx("rect",{x:"2",y:"2",width:"16",height:"16",rx:"3",fill:"none",stroke:"currentColor",strokeWidth:"2"})})})]}),u.jsxs("svg",{width:c,height:d,style:{background:"#f9fafb",borderRadius:12},children:[x.map((g,y)=>u.jsx("line",{x1:gt(g,Le,Ke,c,Q),y1:yt(Fe,Fe,Ge,d,Q),x2:gt(g,Le,Ke,c,Q),y2:yt(Ge,Fe,Ge,d,Q),stroke:"#e5e7eb",strokeWidth:g===0?2:1},`x-${y}`)),v.map((g,y)=>u.jsx("line",{x1:gt(Le,Le,Ke,c,Q),y1:yt(g,Fe,Ge,d,Q),x2:gt(Ke,Le,Ke,c,Q),y2:yt(g,Fe,Ge,d,Q),stroke:"#e5e7eb",strokeWidth:g===0?2:1},`y-${y}`)),u.jsx("line",{x1:gt(Le,Le,Ke,c,Q),y1:yt(0,Fe,Ge,d,Q),x2:gt(Ke,Le,Ke,c,Q),y2:yt(0,Fe,Ge,d,Q),stroke:"#111",strokeWidth:2}),u.jsx("line",{x1:gt(0,Le,Ke,c,Q),y1:yt(Fe,Fe,Ge,d,Q),x2:gt(0,Le,Ke,c,Q),y2:yt(Ge,Fe,Ge,d,Q),stroke:"#111",strokeWidth:2}),u.jsx("line",{x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,stroke:"#888",strokeDasharray:"6 4",strokeWidth:3}),u.jsx("circle",{cx:f.x,cy:f.y,r:9,fill:"#fff",stroke:"#111",strokeWidth:2}),u.jsx("line",{x1:f.x,y1:f.y,x2:p.x,y2:p.y,stroke:"#f43f5e",strokeWidth:5,markerEnd:"url(#arrowhead)"}),u.jsx("defs",{children:u.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",orient:"auto",markerUnits:"strokeWidth",children:u.jsx("polygon",{points:"0,0 10,5 0,10",fill:"#f43f5e"})})}),x.map((g,y)=>u.jsx("text",{x:gt(g,Le,Ke,c,Q),y:d-Q+22,fontSize:12,textAnchor:"middle",fill:g===0?"#111":"#888",fontWeight:g===0?"bold":"normal",children:g},`xtick-${y}`)),v.map((g,y)=>u.jsx("text",{x:Q-24,y:yt(g,Fe,Ge,d,Q)+4,fontSize:12,textAnchor:"end",fill:g===0?"#111":"#888",fontWeight:g===0?"bold":"normal",children:g},`ytick-${y}`)),u.jsx("text",{x:c/2,y:d-10,fontSize:16,textAnchor:"middle",fill:"#222",children:"X (meters)"}),u.jsx("text",{x:Q-40,y:d/2,fontSize:16,textAnchor:"middle",fill:"#222",transform:`rotate(-90,${Q-40},${d/2})`,children:"Y (meters)"}),u.jsx("text",{x:c/2,y:Q-22,fontSize:20,textAnchor:"middle",fill:"#222",fontWeight:"bold",children:r})]})]})},gm=({isOpen:t,onClose:e,title:n,children:i})=>t?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-900",children:n}),u.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:u.jsx(Cs,{size:24})})]}),u.jsx("div",{className:"flex-1 overflow-auto p-6",children:i})]})}):null,wE=()=>{const[t,e]=N.useState(null),n=()=>e(null);return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col space-y-2",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 text-center",children:"Single Point Localization"}),u.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-4",children:u.jsx("p",{className:"text-sm text-gray-700",children:"This dashboard displays real-time angle of arrival (AoA) data from a single UWB tag. The left graph shows raw AoA measurements, while the right graph presents ML-enhanced data for improved accuracy. Hover over any graph and click the maximize button to view in full screen mode."})})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsx(pm,{onFullScreen:()=>e("raw"),isFullScreen:!1}),u.jsx(mm,{onFullScreen:()=>e("improved"),isFullScreen:!1})]}),u.jsx(gm,{isOpen:t==="raw",onClose:n,title:"RAW AOA",children:u.jsx(pm,{onFullScreen:n,isFullScreen:!0})}),u.jsx(gm,{isOpen:t==="improved",onClose:n,title:"Improved AOA with Kalman",children:u.jsx(mm,{onFullScreen:n,isFullScreen:!0})})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function yo(t){return t+.5|0}const In=(t,e,n)=>Math.max(Math.min(t,n),e);function Xs(t){return In(yo(t*2.55),0,255)}function Bn(t){return In(yo(t*255),0,255)}function rn(t){return In(yo(t/2.55)/100,0,1)}function ym(t){return In(yo(t*100),0,100)}const xt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},id=[..."0123456789ABCDEF"],SE=t=>id[t&15],kE=t=>id[(t&240)>>4]+id[t&15],Wo=t=>(t&240)>>4===(t&15),CE=t=>Wo(t.r)&&Wo(t.g)&&Wo(t.b)&&Wo(t.a);function EE(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&xt[t[1]]*17,g:255&xt[t[2]]*17,b:255&xt[t[3]]*17,a:e===5?xt[t[4]]*17:255}:(e===7||e===9)&&(n={r:xt[t[1]]<<4|xt[t[2]],g:xt[t[3]]<<4|xt[t[4]],b:xt[t[5]]<<4|xt[t[6]],a:e===9?xt[t[7]]<<4|xt[t[8]]:255})),n}const NE=(t,e)=>t<255?e(t):"";function TE(t){var e=CE(t)?SE:kE;return t?"#"+e(t.r)+e(t.g)+e(t.b)+NE(t.a,e):void 0}const IE=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function j_(t,e,n){const i=e*Math.min(n,1-n),s=(r,o=(r+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function ME(t,e,n){const i=(s,r=(s+t/60)%6)=>n-n*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function AE(t,e,n){const i=j_(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)i[s]*=1-e-n,i[s]+=e;return i}function jE(t,e,n,i,s){return t===s?(e-n)/i+(e<n?6:0):e===s?(n-t)/i+2:(t-e)/i+4}function Vh(t){const n=t.r/255,i=t.g/255,s=t.b/255,r=Math.max(n,i,s),o=Math.min(n,i,s),l=(r+o)/2;let a,c,d;return r!==o&&(d=r-o,c=l>.5?d/(2-r-o):d/(r+o),a=jE(n,i,s,d,r),a=a*60+.5),[a|0,c||0,l]}function Yh(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Bn)}function Kh(t,e,n){return Yh(j_,t,e,n)}function PE(t,e,n){return Yh(AE,t,e,n)}function RE(t,e,n){return Yh(ME,t,e,n)}function P_(t){return(t%360+360)%360}function DE(t){const e=IE.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Xs(+e[5]):Bn(+e[5]));const s=P_(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=PE(s,r,o):e[1]==="hsv"?i=RE(s,r,o):i=Kh(s,r,o),{r:i[0],g:i[1],b:i[2],a:n}}function OE(t,e){var n=Vh(t);n[0]=P_(n[0]+e),n=Kh(n),t.r=n[0],t.g=n[1],t.b=n[2]}function LE(t){if(!t)return;const e=Vh(t),n=e[0],i=ym(e[1]),s=ym(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${s}%, ${rn(t.a)})`:`hsl(${n}, ${i}%, ${s}%)`}const xm={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},_m={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function FE(){const t={},e=Object.keys(_m),n=Object.keys(xm);let i,s,r,o,l;for(i=0;i<e.length;i++){for(o=l=e[i],s=0;s<n.length;s++)r=n[s],l=l.replace(r,xm[r]);r=parseInt(_m[o],16),t[l]=[r>>16&255,r>>8&255,r&255]}return t}let Bo;function zE(t){Bo||(Bo=FE(),Bo.transparent=[0,0,0,0]);const e=Bo[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const WE=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function BE(t){const e=WE.exec(t);let n=255,i,s,r;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?Xs(o):In(o*255,0,255)}return i=+e[1],s=+e[3],r=+e[5],i=255&(e[2]?Xs(i):In(i,0,255)),s=255&(e[4]?Xs(s):In(s,0,255)),r=255&(e[6]?Xs(r):In(r,0,255)),{r:i,g:s,b:r,a:n}}}function HE(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${rn(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Lc=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ri=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function $E(t,e,n){const i=Ri(rn(t.r)),s=Ri(rn(t.g)),r=Ri(rn(t.b));return{r:Bn(Lc(i+n*(Ri(rn(e.r))-i))),g:Bn(Lc(s+n*(Ri(rn(e.g))-s))),b:Bn(Lc(r+n*(Ri(rn(e.b))-r))),a:t.a+n*(e.a-t.a)}}function Ho(t,e,n){if(t){let i=Vh(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=Kh(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function R_(t,e){return t&&Object.assign(e||{},t)}function vm(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Bn(t[3]))):(e=R_(t,{r:0,g:0,b:0,a:1}),e.a=Bn(e.a)),e}function UE(t){return t.charAt(0)==="r"?BE(t):DE(t)}class qr{constructor(e){if(e instanceof qr)return e;const n=typeof e;let i;n==="object"?i=vm(e):n==="string"&&(i=EE(e)||zE(e)||UE(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=R_(this._rgb);return e&&(e.a=rn(e.a)),e}set rgb(e){this._rgb=vm(e)}rgbString(){return this._valid?HE(this._rgb):void 0}hexString(){return this._valid?TE(this._rgb):void 0}hslString(){return this._valid?LE(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,s=e.rgb;let r;const o=n===r?.5:n,l=2*o-1,a=i.a-s.a,c=((l*a===-1?l:(l+a)/(1+l*a))+1)/2;r=1-c,i.r=255&c*i.r+r*s.r+.5,i.g=255&c*i.g+r*s.g+.5,i.b=255&c*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=$E(this._rgb,e._rgb,n)),this}clone(){return new qr(this.rgb)}alpha(e){return this._rgb.a=Bn(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=yo(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Ho(this._rgb,2,e),this}darken(e){return Ho(this._rgb,2,-e),this}saturate(e){return Ho(this._rgb,1,e),this}desaturate(e){return Ho(this._rgb,1,-e),this}rotate(e){return OE(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Jt(){}const VE=(()=>{let t=0;return()=>t++})();function J(t){return t==null}function Te(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function q(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Tt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Ut(t,e){return Tt(t)?t:e}function Y(t,e){return typeof t>"u"?e:t}const YE=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ce(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function X(t,e,n,i){let s,r,o;if(Te(t))for(r=t.length,s=0;s<r;s++)e.call(n,t[s],s);else if(q(t))for(o=Object.keys(t),r=o.length,s=0;s<r;s++)e.call(n,t[o[s]],o[s])}function ca(t,e){let n,i,s,r;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(s=t[n],r=e[n],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function ua(t){if(Te(t))return t.map(ua);if(q(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let s=0;for(;s<i;++s)e[n[s]]=ua(t[n[s]]);return e}return t}function D_(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function KE(t,e,n,i){if(!D_(t))return;const s=e[t],r=n[t];q(s)&&q(r)?Qr(s,r,i):e[t]=ua(r)}function Qr(t,e,n){const i=Te(e)?e:[e],s=i.length;if(!q(t))return t;n=n||{};const r=n.merger||KE;let o;for(let l=0;l<s;++l){if(o=i[l],!q(o))continue;const a=Object.keys(o);for(let c=0,d=a.length;c<d;++c)r(a[c],t,o,n)}return t}function yr(t,e){return Qr(t,e,{merger:GE})}function GE(t,e,n){if(!D_(t))return;const i=e[t],s=n[t];q(i)&&q(s)?yr(i,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ua(s))}const bm={"":t=>t,x:t=>t.x,y:t=>t.y};function qE(t){const e=t.split("."),n=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function QE(t){const e=qE(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function da(t,e){return(bm[e]||(bm[e]=QE(e)))(t)}function Gh(t){return t.charAt(0).toUpperCase()+t.slice(1)}const ha=t=>typeof t<"u",Gn=t=>typeof t=="function",wm=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function XE(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Me=Math.PI,Xt=2*Me,ZE=Xt+Me,fa=Number.POSITIVE_INFINITY,JE=Me/180,Lt=Me/2,Jn=Me/4,Sm=Me*2/3,sd=Math.log10,xs=Math.sign;function xr(t,e,n){return Math.abs(t-e)<n}function km(t){const e=Math.round(t);t=xr(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(sd(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function eN(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((s,r)=>s-r).pop(),e}function tN(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function _s(t){return!tN(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function nN(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function iN(t,e,n){let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i][n],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function hi(t){return t*(Me/180)}function sN(t){return t*(180/Me)}function Cm(t){if(!Tt(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function rN(t,e){const n=e.x-t.x,i=e.y-t.y,s=Math.sqrt(n*n+i*i);let r=Math.atan2(i,n);return r<-.5*Me&&(r+=Xt),{angle:r,distance:s}}function rd(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function oN(t,e){return(t-e+ZE)%Xt-Me}function wn(t){return(t%Xt+Xt)%Xt}function O_(t,e,n,i){const s=wn(t),r=wn(e),o=wn(n),l=wn(r-s),a=wn(o-s),c=wn(s-r),d=wn(s-o);return s===r||s===o||i&&r===o||l>a&&c<d}function wt(t,e,n){return Math.max(e,Math.min(n,t))}function lN(t){return wt(t,-32768,32767)}function Zs(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function qh(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const fi=(t,e,n,i)=>qh(t,n,i?s=>{const r=t[s][e];return r<n||r===n&&t[s+1][e]===n}:s=>t[s][e]<n),aN=(t,e,n)=>qh(t,n,i=>t[i][e]>=n);function cN(t,e,n){let i=0,s=t.length;for(;i<s&&t[i]<e;)i++;for(;s>i&&t[s-1]>n;)s--;return i>0||s<t.length?t.slice(i,s):t}const L_=["push","pop","shift","splice","unshift"];function uN(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),L_.forEach(n=>{const i="_onData"+Gh(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return t._chartjs.listeners.forEach(l=>{typeof l[i]=="function"&&l[i](...r)}),o}})})}function Em(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,s=i.indexOf(e);s!==-1&&i.splice(s,1),!(i.length>0)&&(L_.forEach(r=>{delete t[r]}),delete t._chartjs)}function dN(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const F_=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function z_(t,e){let n=[],i=!1;return function(...s){n=s,i||(i=!0,F_.call(window,()=>{i=!1,t.apply(e,n)}))}}function hN(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const Qh=t=>t==="start"?"left":t==="end"?"right":"center",ze=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,fN=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function W_(t,e,n){const i=e.length;let s=0,r=i;if(t._sorted){const{iScale:o,vScale:l,_parsed:a}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,d=o.axis,{min:h,max:f,minDefined:p,maxDefined:m}=o.getUserBounds();if(p){if(s=Math.min(fi(a,d,h).lo,n?i:fi(e,d,o.getPixelForValue(h)).lo),c){const x=a.slice(0,s+1).reverse().findIndex(v=>!J(v[l.axis]));s-=Math.max(0,x)}s=wt(s,0,i-1)}if(m){let x=Math.max(fi(a,o.axis,f,!0).hi+1,n?0:fi(e,d,o.getPixelForValue(f),!0).hi+1);if(c){const v=a.slice(x-1).findIndex(g=>!J(g[l.axis]));x+=Math.max(0,v)}r=wt(x,s,i)-s}else r=i-s}return{start:s,count:r}}function B_(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=s,!0;const r=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,s),r}const $o=t=>t===0||t===1,Nm=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Xt/n)),Tm=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Xt/n)+1,_r={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Lt)+1,easeOutSine:t=>Math.sin(t*Lt),easeInOutSine:t=>-.5*(Math.cos(Me*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>$o(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>$o(t)?t:Nm(t,.075,.3),easeOutElastic:t=>$o(t)?t:Tm(t,.075,.3),easeInOutElastic(t){return $o(t)?t:t<.5?.5*Nm(t*2,.1125,.45):.5+.5*Tm(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-_r.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?_r.easeInBounce(t*2)*.5:_r.easeOutBounce(t*2-1)*.5+.5};function Xh(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Im(t){return Xh(t)?t:new qr(t)}function Fc(t){return Xh(t)?t:new qr(t).saturate(.5).darken(.1).hexString()}const pN=["x","y","borderWidth","radius","tension"],mN=["color","borderColor","backgroundColor"];function gN(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:mN},numbers:{type:"number",properties:pN}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function yN(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Mm=new Map;function xN(t,e){e=e||{};const n=t+JSON.stringify(e);let i=Mm.get(n);return i||(i=new Intl.NumberFormat(t,e),Mm.set(n,i)),i}function H_(t,e,n){return xN(e,n).format(t)}const $_={values(t){return Te(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let s,r=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=_N(t,n)}const o=sd(Math.abs(r)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),a={notation:s,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(a,this.options.ticks.format),H_(t,i,a)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(sd(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?$_.numeric.call(this,t,e,n):""}};function _N(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var U_={formatters:$_};function vN(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:U_.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ei=Object.create(null),od=Object.create(null);function vr(t,e){if(!e)return t;const n=e.split(".");for(let i=0,s=n.length;i<s;++i){const r=n[i];t=t[r]||(t[r]=Object.create(null))}return t}function zc(t,e,n){return typeof e=="string"?Qr(vr(t,e),n):Qr(vr(t,""),e)}class bN{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>Fc(s.backgroundColor),this.hoverBorderColor=(i,s)=>Fc(s.borderColor),this.hoverColor=(i,s)=>Fc(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return zc(this,e,n)}get(e){return vr(this,e)}describe(e,n){return zc(od,e,n)}override(e,n){return zc(Ei,e,n)}route(e,n,i,s){const r=vr(this,e),o=vr(this,i),l="_"+n;Object.defineProperties(r,{[l]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const a=this[l],c=o[s];return q(a)?Object.assign({},c,a):Y(a,c)},set(a){this[l]=a}}})}apply(e){e.forEach(n=>n(this))}}var _e=new bN({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[gN,yN,vN]);function wN(t){return!t||J(t.size)||J(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Am(t,e,n,i,s){let r=e[s];return r||(r=e[s]=t.measureText(s).width,n.push(s)),r>i&&(i=r),i}function ei(t,e,n){const i=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*i)/i+s}function jm(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function ld(t,e,n,i){V_(t,e,n,i,null)}function V_(t,e,n,i,s){let r,o,l,a,c,d,h,f;const p=e.pointStyle,m=e.rotation,x=e.radius;let v=(m||0)*JE;if(p&&typeof p=="object"&&(r=p.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(v),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(x)||x<=0)){switch(t.beginPath(),p){default:s?t.ellipse(n,i,s/2,x,0,0,Xt):t.arc(n,i,x,0,Xt),t.closePath();break;case"triangle":d=s?s/2:x,t.moveTo(n+Math.sin(v)*d,i-Math.cos(v)*x),v+=Sm,t.lineTo(n+Math.sin(v)*d,i-Math.cos(v)*x),v+=Sm,t.lineTo(n+Math.sin(v)*d,i-Math.cos(v)*x),t.closePath();break;case"rectRounded":c=x*.516,a=x-c,o=Math.cos(v+Jn)*a,h=Math.cos(v+Jn)*(s?s/2-c:a),l=Math.sin(v+Jn)*a,f=Math.sin(v+Jn)*(s?s/2-c:a),t.arc(n-h,i-l,c,v-Me,v-Lt),t.arc(n+f,i-o,c,v-Lt,v),t.arc(n+h,i+l,c,v,v+Lt),t.arc(n-f,i+o,c,v+Lt,v+Me),t.closePath();break;case"rect":if(!m){a=Math.SQRT1_2*x,d=s?s/2:a,t.rect(n-d,i-a,2*d,2*a);break}v+=Jn;case"rectRot":h=Math.cos(v)*(s?s/2:x),o=Math.cos(v)*x,l=Math.sin(v)*x,f=Math.sin(v)*(s?s/2:x),t.moveTo(n-h,i-l),t.lineTo(n+f,i-o),t.lineTo(n+h,i+l),t.lineTo(n-f,i+o),t.closePath();break;case"crossRot":v+=Jn;case"cross":h=Math.cos(v)*(s?s/2:x),o=Math.cos(v)*x,l=Math.sin(v)*x,f=Math.sin(v)*(s?s/2:x),t.moveTo(n-h,i-l),t.lineTo(n+h,i+l),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"star":h=Math.cos(v)*(s?s/2:x),o=Math.cos(v)*x,l=Math.sin(v)*x,f=Math.sin(v)*(s?s/2:x),t.moveTo(n-h,i-l),t.lineTo(n+h,i+l),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o),v+=Jn,h=Math.cos(v)*(s?s/2:x),o=Math.cos(v)*x,l=Math.sin(v)*x,f=Math.sin(v)*(s?s/2:x),t.moveTo(n-h,i-l),t.lineTo(n+h,i+l),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"line":o=s?s/2:Math.cos(v)*x,l=Math.sin(v)*x,t.moveTo(n-o,i-l),t.lineTo(n+o,i+l);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(v)*(s?s/2:x),i+Math.sin(v)*x);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Xr(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Zh(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Jh(t){t.restore()}function SN(t,e,n,i,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const r=(e.x+n.x)/2;t.lineTo(r,e.y),t.lineTo(r,n.y)}else s==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function kN(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function CN(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),J(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function EN(t,e,n,i,s){if(s.strikethrough||s.underline){const r=t.measureText(i),o=e-r.actualBoundingBoxLeft,l=e+r.actualBoundingBoxRight,a=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,d=s.strikethrough?(a+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,d),t.lineTo(l,d),t.stroke()}}function NN(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Zr(t,e,n,i,s,r={}){const o=Te(e)?e:[e],l=r.strokeWidth>0&&r.strokeColor!=="";let a,c;for(t.save(),t.font=s.string,CN(t,r),a=0;a<o.length;++a)c=o[a],r.backdrop&&NN(t,r.backdrop),l&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),J(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(c,n,i,r.maxWidth)),t.fillText(c,n,i,r.maxWidth),EN(t,n,i,c,r),i+=Number(s.lineHeight);t.restore()}function ad(t,e){const{x:n,y:i,w:s,h:r,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*Me,Me,!0),t.lineTo(n,i+r-o.bottomLeft),t.arc(n+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,Me,Lt,!0),t.lineTo(n+s-o.bottomRight,i+r),t.arc(n+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,Lt,0,!0),t.lineTo(n+s,i+o.topRight),t.arc(n+s-o.topRight,i+o.topRight,o.topRight,0,-Lt,!0),t.lineTo(n+o.topLeft,i)}const TN=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,IN=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function MN(t,e){const n=(""+t).match(TN);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const AN=t=>+t||0;function Y_(t,e){const n={},i=q(e),s=i?Object.keys(e):e,r=q(t)?i?o=>Y(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=AN(r(o));return n}function jN(t){return Y_(t,{top:"y",right:"x",bottom:"y",left:"x"})}function br(t){return Y_(t,["topLeft","topRight","bottomLeft","bottomRight"])}function It(t){const e=jN(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function $e(t,e){t=t||{},e=e||_e.font;let n=Y(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=Y(t.style,e.style);i&&!(""+i).match(IN)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:Y(t.family,e.family),lineHeight:MN(Y(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:Y(t.weight,e.weight),string:""};return s.string=wN(s),s}function Uo(t,e,n,i){let s,r,o;for(s=0,r=t.length;s<r;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function PN(t,e,n){const{min:i,max:s}=t,r=YE(e,(s-i)/2),o=(l,a)=>n&&l===0?0:l+a;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function Ai(t,e){return Object.assign(Object.create(t),e)}function ef(t,e=[""],n,i,s=()=>t[0]){const r=n||t;typeof i>"u"&&(i=Q_("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:r,_fallback:i,_getTarget:s,override:l=>ef([l,...t],e,r,i)};return new Proxy(o,{deleteProperty(l,a){return delete l[a],delete l._keys,delete t[0][a],!0},get(l,a){return G_(l,a,()=>BN(a,e,t,l))},getOwnPropertyDescriptor(l,a){return Reflect.getOwnPropertyDescriptor(l._scopes[0],a)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,a){return Rm(l).includes(a)},ownKeys(l){return Rm(l)},set(l,a,c){const d=l._storage||(l._storage=s());return l[a]=d[a]=c,delete l._keys,!0}})}function vs(t,e,n,i){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:K_(t,i),setContext:r=>vs(t,r,n,i),override:r=>vs(t.override(r),e,n,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete t[o],!0},get(r,o,l){return G_(r,o,()=>DN(r,o,l))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(r,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(r,o,l){return t[o]=l,delete r[o],!0}})}function K_(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:i,isScriptable:Gn(n)?n:()=>n,isIndexable:Gn(i)?i:()=>i}}const RN=(t,e)=>t?t+Gh(e):e,tf=(t,e)=>q(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function G_(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function DN(t,e,n){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=t;let l=i[e];return Gn(l)&&o.isScriptable(e)&&(l=ON(e,l,t,n)),Te(l)&&l.length&&(l=LN(e,l,t,o.isIndexable)),tf(e,l)&&(l=vs(l,s,r&&r[e],o)),l}function ON(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_stack:l}=n;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let a=e(r,o||i);return l.delete(t),tf(t,a)&&(a=nf(s._scopes,s,t,a)),a}function LN(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:l}=n;if(typeof r.index<"u"&&i(t))return e[r.index%e.length];if(q(e[0])){const a=e,c=s._scopes.filter(d=>d!==a);e=[];for(const d of a){const h=nf(c,s,t,d);e.push(vs(h,r,o&&o[t],l))}}return e}function q_(t,e,n){return Gn(t)?t(e,n):t}const FN=(t,e)=>t===!0?e:typeof t=="string"?da(e,t):void 0;function zN(t,e,n,i,s){for(const r of e){const o=FN(n,r);if(o){t.add(o);const l=q_(o._fallback,n,s);if(typeof l<"u"&&l!==n&&l!==i)return l}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function nf(t,e,n,i){const s=e._rootScopes,r=q_(e._fallback,n,i),o=[...t,...s],l=new Set;l.add(i);let a=Pm(l,o,n,r||n,i);return a===null||typeof r<"u"&&r!==n&&(a=Pm(l,o,r,a,i),a===null)?!1:ef(Array.from(l),[""],s,r,()=>WN(e,n,i))}function Pm(t,e,n,i,s){for(;n;)n=zN(t,e,n,i,s);return n}function WN(t,e,n){const i=t._getTarget();e in i||(i[e]={});const s=i[e];return Te(s)&&q(n)?n:s||{}}function BN(t,e,n,i){let s;for(const r of e)if(s=Q_(RN(r,t),n),typeof s<"u")return tf(t,s)?nf(n,i,t,s):s}function Q_(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function Rm(t){let e=t._keys;return e||(e=t._keys=HN(t._scopes)),e}function HN(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}const $N=Number.EPSILON||1e-14,bs=(t,e)=>e<t.length&&!t[e].skip&&t[e],X_=t=>t==="x"?"y":"x";function UN(t,e,n,i){const s=t.skip?e:t,r=e,o=n.skip?e:n,l=rd(r,s),a=rd(o,r);let c=l/(l+a),d=a/(l+a);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const h=i*c,f=i*d;return{previous:{x:r.x-h*(o.x-s.x),y:r.y-h*(o.y-s.y)},next:{x:r.x+f*(o.x-s.x),y:r.y+f*(o.y-s.y)}}}function VN(t,e,n){const i=t.length;let s,r,o,l,a,c=bs(t,0);for(let d=0;d<i-1;++d)if(a=c,c=bs(t,d+1),!(!a||!c)){if(xr(e[d],0,$N)){n[d]=n[d+1]=0;continue}s=n[d]/e[d],r=n[d+1]/e[d],l=Math.pow(s,2)+Math.pow(r,2),!(l<=9)&&(o=3/Math.sqrt(l),n[d]=s*o*e[d],n[d+1]=r*o*e[d])}}function YN(t,e,n="x"){const i=X_(n),s=t.length;let r,o,l,a=bs(t,0);for(let c=0;c<s;++c){if(o=l,l=a,a=bs(t,c+1),!l)continue;const d=l[n],h=l[i];o&&(r=(d-o[n])/3,l[`cp1${n}`]=d-r,l[`cp1${i}`]=h-r*e[c]),a&&(r=(a[n]-d)/3,l[`cp2${n}`]=d+r,l[`cp2${i}`]=h+r*e[c])}}function KN(t,e="x"){const n=X_(e),i=t.length,s=Array(i).fill(0),r=Array(i);let o,l,a,c=bs(t,0);for(o=0;o<i;++o)if(l=a,a=c,c=bs(t,o+1),!!a){if(c){const d=c[e]-a[e];s[o]=d!==0?(c[n]-a[n])/d:0}r[o]=l?c?xs(s[o-1])!==xs(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}VN(t,s,r),YN(t,r,e)}function Vo(t,e,n){return Math.max(Math.min(t,n),e)}function GN(t,e){let n,i,s,r,o,l=Xr(t[0],e);for(n=0,i=t.length;n<i;++n)o=r,r=l,l=n<i-1&&Xr(t[n+1],e),r&&(s=t[n],o&&(s.cp1x=Vo(s.cp1x,e.left,e.right),s.cp1y=Vo(s.cp1y,e.top,e.bottom)),l&&(s.cp2x=Vo(s.cp2x,e.left,e.right),s.cp2y=Vo(s.cp2y,e.top,e.bottom)))}function qN(t,e,n,i,s){let r,o,l,a;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")KN(t,s);else{let c=i?t[t.length-1]:t[0];for(r=0,o=t.length;r<o;++r)l=t[r],a=UN(c,l,t[Math.min(r+1,o-(i?0:1))%o],e.tension),l.cp1x=a.previous.x,l.cp1y=a.previous.y,l.cp2x=a.next.x,l.cp2y=a.next.y,c=l}e.capBezierPoints&&GN(t,n)}function sf(){return typeof window<"u"&&typeof document<"u"}function rf(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function pa(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Ka=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function QN(t,e){return Ka(t).getPropertyValue(e)}const XN=["top","right","bottom","left"];function gi(t,e,n){const i={};n=n?"-"+n:"";for(let s=0;s<4;s++){const r=XN[s];i[r]=parseFloat(t[e+"-"+r+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const ZN=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function JN(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:s,offsetY:r}=i;let o=!1,l,a;if(ZN(s,r,t.target))l=s,a=r;else{const c=e.getBoundingClientRect();l=i.clientX-c.left,a=i.clientY-c.top,o=!0}return{x:l,y:a,box:o}}function oi(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,s=Ka(n),r=s.boxSizing==="border-box",o=gi(s,"padding"),l=gi(s,"border","width"),{x:a,y:c,box:d}=JN(t,n),h=o.left+(d&&l.left),f=o.top+(d&&l.top);let{width:p,height:m}=e;return r&&(p-=o.width+l.width,m-=o.height+l.height),{x:Math.round((a-h)/p*n.width/i),y:Math.round((c-f)/m*n.height/i)}}function eT(t,e,n){let i,s;if(e===void 0||n===void 0){const r=t&&rf(t);if(!r)e=t.clientWidth,n=t.clientHeight;else{const o=r.getBoundingClientRect(),l=Ka(r),a=gi(l,"border","width"),c=gi(l,"padding");e=o.width-c.width-a.width,n=o.height-c.height-a.height,i=pa(l.maxWidth,r,"clientWidth"),s=pa(l.maxHeight,r,"clientHeight")}}return{width:e,height:n,maxWidth:i||fa,maxHeight:s||fa}}const Yo=t=>Math.round(t*10)/10;function tT(t,e,n,i){const s=Ka(t),r=gi(s,"margin"),o=pa(s.maxWidth,t,"clientWidth")||fa,l=pa(s.maxHeight,t,"clientHeight")||fa,a=eT(t,e,n);let{width:c,height:d}=a;if(s.boxSizing==="content-box"){const f=gi(s,"border","width"),p=gi(s,"padding");c-=p.width+f.width,d-=p.height+f.height}return c=Math.max(0,c-r.width),d=Math.max(0,i?c/i:d-r.height),c=Yo(Math.min(c,o,a.maxWidth)),d=Yo(Math.min(d,l,a.maxHeight)),c&&!d&&(d=Yo(c/2)),(e!==void 0||n!==void 0)&&i&&a.height&&d>a.height&&(d=a.height,c=Yo(Math.floor(d*i))),{width:c,height:d}}function Dm(t,e,n){const i=e||1,s=Math.floor(t.height*i),r=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(t.currentDevicePixelRatio=i,o.height=s,o.width=r,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const nT=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};sf()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Om(t,e){const n=QN(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function li(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function iT(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function sT(t,e,n,i){const s={x:t.cp2x,y:t.cp2y},r={x:e.cp1x,y:e.cp1y},o=li(t,s,n),l=li(s,r,n),a=li(r,e,n),c=li(o,l,n),d=li(l,a,n);return li(c,d,n)}const rT=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},oT=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function rs(t,e,n){return t?rT(e,n):oT()}function Z_(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function J_(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function ev(t){return t==="angle"?{between:O_,compare:oN,normalize:wn}:{between:Zs,compare:(e,n)=>e-n,normalize:e=>e}}function Lm({start:t,end:e,count:n,loop:i,style:s}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:s}}function lT(t,e,n){const{property:i,start:s,end:r}=n,{between:o,normalize:l}=ev(i),a=e.length;let{start:c,end:d,loop:h}=t,f,p;if(h){for(c+=a,d+=a,f=0,p=a;f<p&&o(l(e[c%a][i]),s,r);++f)c--,d--;c%=a,d%=a}return d<c&&(d+=a),{start:c,end:d,loop:h,style:t.style}}function aT(t,e,n){if(!n)return[t];const{property:i,start:s,end:r}=n,o=e.length,{compare:l,between:a,normalize:c}=ev(i),{start:d,end:h,loop:f,style:p}=lT(t,e,n),m=[];let x=!1,v=null,g,y,_;const b=()=>a(s,_,g)&&l(s,_)!==0,w=()=>l(r,g)===0||a(r,_,g),k=()=>x||b(),S=()=>!x||w();for(let E=d,j=d;E<=h;++E)y=e[E%o],!y.skip&&(g=c(y[i]),g!==_&&(x=a(g,s,r),v===null&&k()&&(v=l(g,s)===0?E:j),v!==null&&S()&&(m.push(Lm({start:v,end:E,loop:f,count:o,style:p})),v=null),j=E,_=g));return v!==null&&m.push(Lm({start:v,end:h,loop:f,count:o,style:p})),m}function cT(t,e){const n=[],i=t.segments;for(let s=0;s<i.length;s++){const r=aT(i[s],t.points,e);r.length&&n.push(...r)}return n}function uT(t,e,n,i){let s=0,r=e-1;if(n&&!i)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(r+=s);r>s&&t[r%e].skip;)r--;return r%=e,{start:s,end:r}}function dT(t,e,n,i){const s=t.length,r=[];let o=e,l=t[e],a;for(a=e+1;a<=n;++a){const c=t[a%s];c.skip||c.stop?l.skip||(i=!1,r.push({start:e%s,end:(a-1)%s,loop:i}),e=o=c.stop?a:null):(o=a,l.skip&&(e=a)),l=c}return o!==null&&r.push({start:e%s,end:o%s,loop:i}),r}function hT(t,e){const n=t.points,i=t.options.spanGaps,s=n.length;if(!s)return[];const r=!!t._loop,{start:o,end:l}=uT(n,s,r,i);if(i===!0)return Fm(t,[{start:o,end:l,loop:r}],n,e);const a=l<o?l+s:l,c=!!t._fullLoop&&o===0&&l===s-1;return Fm(t,dT(n,o,a,c),n,e)}function Fm(t,e,n,i){return!i||!i.setContext||!n?e:fT(t,e,n,i)}function fT(t,e,n,i){const s=t._chart.getContext(),r=zm(t.options),{_datasetIndex:o,options:{spanGaps:l}}=t,a=n.length,c=[];let d=r,h=e[0].start,f=h;function p(m,x,v,g){const y=l?-1:1;if(m!==x){for(m+=a;n[m%a].skip;)m-=y;for(;n[x%a].skip;)x+=y;m%a!==x%a&&(c.push({start:m%a,end:x%a,loop:v,style:g}),d=g,h=x%a)}}for(const m of e){h=l?h:m.start;let x=n[h%a],v;for(f=h+1;f<=m.end;f++){const g=n[f%a];v=zm(i.setContext(Ai(s,{type:"segment",p0:x,p1:g,p0DataIndex:(f-1)%a,p1DataIndex:f%a,datasetIndex:o}))),pT(v,d)&&p(h,f-1,m.loop,d),x=g,d=v}h<f-1&&p(h,f-1,m.loop,d)}return c}function zm(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function pT(t,e){if(!e)return!1;const n=[],i=function(s,r){return Xh(r)?(n.includes(r)||n.push(r),n.indexOf(r)):r};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function Ko(t,e,n){return t.options.clip?t[n]:e[n]}function mT(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:Ko(n,e,"left"),right:Ko(n,e,"right"),top:Ko(i,e,"top"),bottom:Ko(i,e,"bottom")}:e}function gT(t,e){const n=e._clip;if(n.disabled)return!1;const i=mT(e,t.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class yT{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,s){const r=n.listeners[s],o=n.duration;r.forEach(l=>l({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=F_.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,l=!1,a;for(;o>=0;--o)a=r[o],a._active?(a._total>i.duration&&(i.duration=a._total),a.tick(e),l=!0):(r[o]=r[r.length-1],r.pop());l&&(s.draw(),this._notify(s,i,e,"progress")),r.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),n+=r.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var en=new yT;const Wm="transparent",xT={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=Im(t||Wm),s=i.valid&&Im(e||Wm);return s&&s.valid?s.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class _T{constructor(e,n,i,s){const r=n[i];s=Uo([e.to,s,r,e.from]);const o=Uo([e.from,r,s]);this._active=!0,this._fn=e.fn||xT[e.type||typeof o],this._easing=_r[e.easing]||_r.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Uo([e.to,n,s,e.from]),this._from=Uo([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,l=this._to;let a;if(this._active=r!==l&&(o||n<i),!this._active){this._target[s]=l,this._notify(!0);return}if(n<0){this._target[s]=r;return}a=n/i%2,a=o&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[s]=this._fn(r,l,a)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][n]()}}class tv{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!q(e))return;const n=Object.keys(_e.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const r=e[s];if(!q(r))return;const o={};for(const l of n)o[l]=r[l];(Te(r.properties)&&r.properties||[s]).forEach(l=>{(l===s||!i.has(l))&&i.set(l,o)})})}_animateOptions(e,n){const i=n.options,s=bT(e,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&vT(e.options.$animations,i).then(()=>{e.options=i},()=>{}),r}_createAnimations(e,n){const i=this._properties,s=[],r=e.$animations||(e.$animations={}),o=Object.keys(n),l=Date.now();let a;for(a=o.length-1;a>=0;--a){const c=o[a];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const d=n[c];let h=r[c];const f=i.get(c);if(h)if(f&&h.active()){h.update(f,d,l);continue}else h.cancel();if(!f||!f.duration){e[c]=d;continue}r[c]=h=new _T(f,e,c,d),s.push(h)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return en.add(this._chart,i),!0}}function vT(t,e){const n=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const r=t[i[s]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function bT(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Bm(t,e){const n=t&&t.options||{},i=n.reverse,s=n.min===void 0?e:0,r=n.max===void 0?e:0;return{start:i?r:s,end:i?s:r}}function wT(t,e,n){if(n===!1)return!1;const i=Bm(t,n),s=Bm(e,n);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function ST(t){let e,n,i,s;return q(t)?(e=t.top,n=t.right,i=t.bottom,s=t.left):e=n=i=s=t,{top:e,right:n,bottom:i,left:s,disabled:t===!1}}function nv(t,e){const n=[],i=t._getSortedDatasetMetas(e);let s,r;for(s=0,r=i.length;s<r;++s)n.push(i[s].index);return n}function Hm(t,e,n,i={}){const s=t.keys,r=i.mode==="single";let o,l,a,c;if(e===null)return;let d=!1;for(o=0,l=s.length;o<l;++o){if(a=+s[o],a===n){if(d=!0,i.all)continue;break}c=t.values[a],Tt(c)&&(r||e===0||xs(e)===xs(c))&&(e+=c)}return!d&&!i.all?0:e}function kT(t,e){const{iScale:n,vScale:i}=e,s=n.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",o=Object.keys(t),l=new Array(o.length);let a,c,d;for(a=0,c=o.length;a<c;++a)d=o[a],l[a]={[s]:d,[r]:t[d]};return l}function Wc(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function CT(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function ET(t){const{min:e,max:n,minDefined:i,maxDefined:s}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function NT(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function $m(t,e,n,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const r=t[s.index];if(n&&r>0||!n&&r<0)return s.index}return null}function Um(t,e){const{chart:n,_cachedMeta:i}=t,s=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:l}=i,a=r.axis,c=o.axis,d=CT(r,o,i),h=e.length;let f;for(let p=0;p<h;++p){const m=e[p],{[a]:x,[c]:v}=m,g=m._stacks||(m._stacks={});f=g[c]=NT(s,d,x),f[l]=v,f._top=$m(f,o,!0,i.type),f._bottom=$m(f,o,!1,i.type);const y=f._visualValues||(f._visualValues={});y[l]=v}}function Bc(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function TT(t,e){return Ai(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function IT(t,e,n){return Ai(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Hs(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const s of e){const r=s._stacks;if(!r||r[i]===void 0||r[i][n]===void 0)return;delete r[i][n],r[i]._visualValues!==void 0&&r[i]._visualValues[n]!==void 0&&delete r[i]._visualValues[n]}}}const Hc=t=>t==="reset"||t==="none",Vm=(t,e)=>e?t:Object.assign({},t),MT=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:nv(n,!0),values:null};class os{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Wc(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Hs(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),s=(h,f,p,m)=>h==="x"?f:h==="r"?m:p,r=n.xAxisID=Y(i.xAxisID,Bc(e,"x")),o=n.yAxisID=Y(i.yAxisID,Bc(e,"y")),l=n.rAxisID=Y(i.rAxisID,Bc(e,"r")),a=n.indexAxis,c=n.iAxisID=s(a,r,o,l),d=n.vAxisID=s(a,o,r,l);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Em(this._data,this),e._stacked&&Hs(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(q(n)){const s=this._cachedMeta;this._data=kT(n,s)}else if(i!==n){if(i){Em(i,this);const s=this._cachedMeta;Hs(s),s._parsed=[]}n&&Object.isExtensible(n)&&uN(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=n._stacked;n._stacked=Wc(n.vScale,n),n.stack!==i.stack&&(s=!0,Hs(n),n.stack=i.stack),this._resyncElements(e),(s||r!==n._stacked)&&(Um(this,n._parsed),n._stacked=Wc(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,l=r.axis;let a=e===0&&n===s.length?!0:i._sorted,c=e>0&&i._parsed[e-1],d,h,f;if(this._parsing===!1)i._parsed=s,i._sorted=!0,f=s;else{Te(s[e])?f=this.parseArrayData(i,s,e,n):q(s[e])?f=this.parseObjectData(i,s,e,n):f=this.parsePrimitiveData(i,s,e,n);const p=()=>h[l]===null||c&&h[l]<c[l];for(d=0;d<n;++d)i._parsed[d+e]=h=f[d],a&&(p()&&(a=!1),c=h);i._sorted=a}o&&Um(this,f)}parsePrimitiveData(e,n,i,s){const{iScale:r,vScale:o}=e,l=r.axis,a=o.axis,c=r.getLabels(),d=r===o,h=new Array(s);let f,p,m;for(f=0,p=s;f<p;++f)m=f+i,h[f]={[l]:d||r.parse(c[m],m),[a]:o.parse(n[m],m)};return h}parseArrayData(e,n,i,s){const{xScale:r,yScale:o}=e,l=new Array(s);let a,c,d,h;for(a=0,c=s;a<c;++a)d=a+i,h=n[d],l[a]={x:r.parse(h[0],d),y:o.parse(h[1],d)};return l}parseObjectData(e,n,i,s){const{xScale:r,yScale:o}=e,{xAxisKey:l="x",yAxisKey:a="y"}=this._parsing,c=new Array(s);let d,h,f,p;for(d=0,h=s;d<h;++d)f=d+i,p=n[f],c[d]={x:r.parse(da(p,l),f),y:o.parse(da(p,a),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const s=this.chart,r=this._cachedMeta,o=n[e.axis],l={keys:nv(s,!0),values:n._stacks[e.axis]._visualValues};return Hm(l,o,r.index,{mode:i})}updateRangeFromParsed(e,n,i,s){const r=i[n.axis];let o=r===null?NaN:r;const l=s&&i._stacks[n.axis];s&&l&&(s.values=l,o=Hm(s,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&e===i.iScale,o=s.length,l=this._getOtherScale(e),a=MT(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=ET(l);let f,p;function m(){p=s[f];const x=p[l.axis];return!Tt(p[e.axis])||d>x||h<x}for(f=0;f<o&&!(!m()&&(this.updateRangeFromParsed(c,e,p,a),r));++f);if(r){for(f=o-1;f>=0;--f)if(!m()){this.updateRangeFromParsed(c,e,p,a);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=n.length;s<r;++s)o=n[s][e.axis],Tt(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,s=n.vScale,r=this.getParsed(e);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=ST(Y(this.options.clip,wT(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,s=i.data||[],r=n.chartArea,o=[],l=this._drawStart||0,a=this._drawCount||s.length-l,c=this.options.drawActiveElementsOnTop;let d;for(i.dataset&&i.dataset.draw(e,r,l,a),d=l;d<l+a;++d){const h=s[d];h.hidden||(h.active&&c?o.push(h):h.draw(e,r))}for(d=0;d<o.length;++d)o[d].draw(e,r)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const s=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=IT(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=s.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=TT(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const s=n==="active",r=this._cachedDataOpts,o=e+"-"+n,l=r[o],a=this.enableOptionSharing&&ha(i);if(l)return Vm(l,a);const c=this.chart.config,d=c.datasetElementScopeKeys(this._type,e),h=s?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),d),p=Object.keys(_e.elements[e]),m=()=>this.getContext(i,s,n),x=c.resolveNamedOptions(f,p,m,h);return x.$shared&&(x.$shared=a,r[o]=Object.freeze(Vm(x,a))),x}_resolveAnimations(e,n,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,l=r[o];if(l)return l;let a;if(s.options.animation!==!1){const d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,n),f=d.getOptionScopes(this.getDataset(),h);a=d.createResolver(f,this.getContext(e,i,n))}const c=new tv(s,a&&a.animations);return a&&a._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Hc(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(n,r)||r!==s;return this.updateSharedOptions(r,n,i),{sharedOptions:r,includeOptions:o}}updateElement(e,n,i,s){Hc(s)?Object.assign(e,i):this._resolveAnimations(n,s).update(e,i)}updateSharedOptions(e,n,i){e&&!Hc(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,s){e.active=s;const r=this.getStyle(n,s);this._resolveAnimations(n,i,s).update(e,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[l,a,c]of this._syncList)this[l](a,c);this._syncList=[];const s=i.length,r=n.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,e):r<s&&this._removeElements(r,s-r)}_insertElements(e,n,i=!0){const s=this._cachedMeta,r=s.data,o=e+n;let l;const a=c=>{for(c.length+=n,l=c.length-1;l>=o;l--)c[l]=c[l-n]};for(a(r),l=e;l<o;++l)r[l]=new this.dataElementType;this._parsing&&a(s._parsed),this.parse(e,n),i&&this.updateElements(r,e,n,"reset")}updateElements(e,n,i,s){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(e,n);i._stacked&&Hs(i,s)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,s]=e;this[n](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}W(os,"defaults",{}),W(os,"datasetElementType",null),W(os,"dataElementType",null);class pl extends os{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=n,o=this.chart._animationsDisabled;let{start:l,count:a}=W_(n,s,o);this._drawStart=l,this._drawCount=a,B_(n)&&(l=0,a=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(s,l,a,e)}updateElements(e,n,i,s){const r=s==="reset",{iScale:o,vScale:l,_stacked:a,_dataset:c}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(n,s),f=o.axis,p=l.axis,{spanGaps:m,segment:x}=this.options,v=_s(m)?m:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||r||s==="none",y=n+i,_=e.length;let b=n>0&&this.getParsed(n-1);for(let w=0;w<_;++w){const k=e[w],S=g?k:{};if(w<n||w>=y){S.skip=!0;continue}const E=this.getParsed(w),j=J(E[p]),A=S[f]=o.getPixelForValue(E[f],w),C=S[p]=r||j?l.getBasePixel():l.getPixelForValue(a?this.applyStack(l,E,a):E[p],w);S.skip=isNaN(A)||isNaN(C)||j,S.stop=w>0&&Math.abs(E[f]-b[f])>v,x&&(S.parsed=E,S.raw=c.data[w]),h&&(S.options=d||this.resolveDataElementOptions(w,k.active?"active":s)),g||this.updateElement(k,w,S,s),b=E}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}W(pl,"id","line"),W(pl,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),W(pl,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class wr extends os{getLabelAndValue(e){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=n,o=this.getParsed(e),l=s.getLabelForValue(o.x),a=r.getLabelForValue(o.y);return{label:i[e]||"",value:"("+l+", "+a+")"}}update(e){const n=this._cachedMeta,{data:i=[]}=n,s=this.chart._animationsDisabled;let{start:r,count:o}=W_(n,i,s);if(this._drawStart=r,this._drawCount=o,B_(n)&&(r=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:l,_dataset:a}=n;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!a._decimated,l.points=i;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(l,void 0,{animated:!s,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(i,r,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,i,s){const r=s==="reset",{iScale:o,vScale:l,_stacked:a,_dataset:c}=this._cachedMeta,d=this.resolveDataElementOptions(n,s),h=this.getSharedOptions(d),f=this.includeOptions(s,h),p=o.axis,m=l.axis,{spanGaps:x,segment:v}=this.options,g=_s(x)?x:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||s==="none";let _=n>0&&this.getParsed(n-1);for(let b=n;b<n+i;++b){const w=e[b],k=this.getParsed(b),S=y?w:{},E=J(k[m]),j=S[p]=o.getPixelForValue(k[p],b),A=S[m]=r||E?l.getBasePixel():l.getPixelForValue(a?this.applyStack(l,k,a):k[m],b);S.skip=isNaN(j)||isNaN(A)||E,S.stop=b>0&&Math.abs(k[p]-_[p])>g,v&&(S.parsed=k,S.raw=c.data[b]),f&&(S.options=h||this.resolveDataElementOptions(b,w.active?"active":s)),y||this.updateElement(w,b,S,s),_=k}this.updateSharedOptions(h,s,d)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let l=0;for(let a=n.length-1;a>=0;--a)l=Math.max(l,n[a].size(this.resolveDataElementOptions(a))/2);return l>0&&l}const i=e.dataset,s=i.options&&i.options.borderWidth||0;if(!n.length)return s;const r=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,r,o)/2}}W(wr,"id","scatter"),W(wr,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),W(wr,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function ti(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class of{constructor(e){W(this,"options");this.options=e||{}}static override(e){Object.assign(of.prototype,e)}init(){}formats(){return ti()}parse(){return ti()}format(){return ti()}add(){return ti()}diff(){return ti()}startOf(){return ti()}endOf(){return ti()}}var AT={_date:of};function jT(t,e,n,i){const{controller:s,data:r,_sorted:o}=t,l=s._cachedMeta.iScale,a=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&r.length){const c=l._reversePixels?aN:fi;if(i){if(s._sharedOptions){const d=r[0],h=typeof d.getRange=="function"&&d.getRange(e);if(h){const f=c(r,e,n-h),p=c(r,e,n+h);return{lo:f.lo,hi:p.hi}}}}else{const d=c(r,e,n);if(a){const{vScale:h}=s._cachedMeta,{_parsed:f}=t,p=f.slice(0,d.lo+1).reverse().findIndex(x=>!J(x[h.axis]));d.lo-=Math.max(0,p);const m=f.slice(d.hi).findIndex(x=>!J(x[h.axis]));d.hi+=Math.max(0,m)}return d}}return{lo:0,hi:r.length-1}}function xo(t,e,n,i,s){const r=t.getSortedVisibleDatasetMetas(),o=n[e];for(let l=0,a=r.length;l<a;++l){const{index:c,data:d}=r[l],{lo:h,hi:f}=jT(r[l],e,o,s);for(let p=h;p<=f;++p){const m=d[p];m.skip||i(m,c,p)}}}function PT(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,s){const r=e?Math.abs(i.x-s.x):0,o=n?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function $c(t,e,n,i,s){const r=[];return!s&&!t.isPointInArea(e)||xo(t,n,e,function(l,a,c){!s&&!Xr(l,t.chartArea,0)||l.inRange(e.x,e.y,i)&&r.push({element:l,datasetIndex:a,index:c})},!0),r}function RT(t,e,n,i){let s=[];function r(o,l,a){const{startAngle:c,endAngle:d}=o.getProps(["startAngle","endAngle"],i),{angle:h}=rN(o,{x:e.x,y:e.y});O_(h,c,d)&&s.push({element:o,datasetIndex:l,index:a})}return xo(t,n,e,r),s}function DT(t,e,n,i,s,r){let o=[];const l=PT(n);let a=Number.POSITIVE_INFINITY;function c(d,h,f){const p=d.inRange(e.x,e.y,s);if(i&&!p)return;const m=d.getCenterPoint(s);if(!(!!r||t.isPointInArea(m))&&!p)return;const v=l(e,m);v<a?(o=[{element:d,datasetIndex:h,index:f}],a=v):v===a&&o.push({element:d,datasetIndex:h,index:f})}return xo(t,n,e,c),o}function Uc(t,e,n,i,s,r){return!r&&!t.isPointInArea(e)?[]:n==="r"&&!i?RT(t,e,n,s):DT(t,e,n,i,s,r)}function Ym(t,e,n,i,s){const r=[],o=n==="x"?"inXRange":"inYRange";let l=!1;return xo(t,n,e,(a,c,d)=>{a[o]&&a[o](e[n],s)&&(r.push({element:a,datasetIndex:c,index:d}),l=l||a.inRange(e.x,e.y,s))}),i&&!l?[]:r}var OT={evaluateInteractionItems:xo,modes:{index(t,e,n,i){const s=oi(e,t),r=n.axis||"x",o=n.includeInvisible||!1,l=n.intersect?$c(t,s,r,i,o):Uc(t,s,r,!1,i,o),a=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const d=l[0].index,h=c.data[d];h&&!h.skip&&a.push({element:h,datasetIndex:c.index,index:d})}),a):[]},dataset(t,e,n,i){const s=oi(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;let l=n.intersect?$c(t,s,r,i,o):Uc(t,s,r,!1,i,o);if(l.length>0){const a=l[0].datasetIndex,c=t.getDatasetMeta(a).data;l=[];for(let d=0;d<c.length;++d)l.push({element:c[d],datasetIndex:a,index:d})}return l},point(t,e,n,i){const s=oi(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return $c(t,s,r,i,o)},nearest(t,e,n,i){const s=oi(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return Uc(t,s,r,n.intersect,i,o)},x(t,e,n,i){const s=oi(e,t);return Ym(t,s,"x",n.intersect,i)},y(t,e,n,i){const s=oi(e,t);return Ym(t,s,"y",n.intersect,i)}}};const iv=["left","top","right","bottom"];function $s(t,e){return t.filter(n=>n.pos===e)}function Km(t,e){return t.filter(n=>iv.indexOf(n.pos)===-1&&n.box.axis===e)}function Us(t,e){return t.sort((n,i)=>{const s=e?i:n,r=e?n:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function LT(t){const e=[];let n,i,s,r,o,l;for(n=0,i=(t||[]).length;n<i;++n)s=t[n],{position:r,options:{stack:o,stackWeight:l=1}}=s,e.push({index:n,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:l});return e}function FT(t){const e={};for(const n of t){const{stack:i,pos:s,stackWeight:r}=n;if(!i||!iv.includes(s))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function zT(t,e){const n=FT(t),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let r,o,l;for(r=0,o=t.length;r<o;++r){l=t[r];const{fullSize:a}=l.box,c=n[l.stack],d=c&&l.stackWeight/c.weight;l.horizontal?(l.width=d?d*i:a&&e.availableWidth,l.height=s):(l.width=i,l.height=d?d*s:a&&e.availableHeight)}return n}function WT(t){const e=LT(t),n=Us(e.filter(c=>c.box.fullSize),!0),i=Us($s(e,"left"),!0),s=Us($s(e,"right")),r=Us($s(e,"top"),!0),o=Us($s(e,"bottom")),l=Km(e,"x"),a=Km(e,"y");return{fullSize:n,leftAndTop:i.concat(r),rightAndBottom:s.concat(a).concat(o).concat(l),chartArea:$s(e,"chartArea"),vertical:i.concat(s).concat(a),horizontal:r.concat(o).concat(l)}}function Gm(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function sv(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function BT(t,e,n,i){const{pos:s,box:r}=n,o=t.maxPadding;if(!q(s)){n.size&&(t[s]-=n.size);const h=i[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?r.height:r.width),n.size=h.size/h.count,t[s]+=n.size}r.getPadding&&sv(o,r.getPadding());const l=Math.max(0,e.outerWidth-Gm(o,t,"left","right")),a=Math.max(0,e.outerHeight-Gm(o,t,"top","bottom")),c=l!==t.w,d=a!==t.h;return t.w=l,t.h=a,n.horizontal?{same:c,other:d}:{same:d,other:c}}function HT(t){const e=t.maxPadding;function n(i){const s=Math.max(e[i]-t[i],0);return t[i]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function $T(t,e){const n=e.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(e[o],n[o])}),r}return i(t?["left","right"]:["top","bottom"])}function Js(t,e,n,i){const s=[];let r,o,l,a,c,d;for(r=0,o=t.length,c=0;r<o;++r){l=t[r],a=l.box,a.update(l.width||e.w,l.height||e.h,$T(l.horizontal,e));const{same:h,other:f}=BT(e,n,l,i);c|=h&&s.length,d=d||f,a.fullSize||s.push(l)}return c&&Js(s,e,n,i)||d}function Go(t,e,n,i,s){t.top=n,t.left=e,t.right=e+i,t.bottom=n+s,t.width=i,t.height=s}function qm(t,e,n,i){const s=n.padding;let{x:r,y:o}=e;for(const l of t){const a=l.box,c=i[l.stack]||{count:1,placed:0,weight:1},d=l.stackWeight/c.weight||1;if(l.horizontal){const h=e.w*d,f=c.size||a.height;ha(c.start)&&(o=c.start),a.fullSize?Go(a,s.left,o,n.outerWidth-s.right-s.left,f):Go(a,e.left+c.placed,o,h,f),c.start=o,c.placed+=h,o=a.bottom}else{const h=e.h*d,f=c.size||a.width;ha(c.start)&&(r=c.start),a.fullSize?Go(a,r,s.top,f,n.outerHeight-s.bottom-s.top):Go(a,r,e.top+c.placed,f,h),c.start=r,c.placed+=h,r=a.right}}e.x=r,e.y=o}var St={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const s=It(t.options.layout.padding),r=Math.max(e-s.width,0),o=Math.max(n-s.height,0),l=WT(t.boxes),a=l.vertical,c=l.horizontal;X(t.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const d=a.reduce((x,v)=>v.box.options&&v.box.options.display===!1?x:x+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/d,hBoxMaxHeight:o/2}),f=Object.assign({},s);sv(f,It(i));const p=Object.assign({maxPadding:f,w:r,h:o,x:s.left,y:s.top},s),m=zT(a.concat(c),h);Js(l.fullSize,p,h,m),Js(a,p,h,m),Js(c,p,h,m)&&Js(a,p,h,m),HT(p),qm(l.leftAndTop,p,h,m),p.x+=p.w,p.y+=p.h,qm(l.rightAndBottom,p,h,m),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},X(l.chartArea,x=>{const v=x.box;Object.assign(v,t.chartArea),v.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class rv{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,s){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):i)}}isAttached(e){return!0}updateConfig(e){}}class UT extends rv{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const ml="$chartjs",VT={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Qm=t=>t===null||t==="";function YT(t,e){const n=t.style,i=t.getAttribute("height"),s=t.getAttribute("width");if(t[ml]={initial:{height:i,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Qm(s)){const r=Om(t,"width");r!==void 0&&(t.width=r)}if(Qm(i))if(t.style.height==="")t.height=t.width/(e||2);else{const r=Om(t,"height");r!==void 0&&(t.height=r)}return t}const ov=nT?{passive:!0}:!1;function KT(t,e,n){t&&t.addEventListener(e,n,ov)}function GT(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,ov)}function qT(t,e){const n=VT[t.type]||t.type,{x:i,y:s}=oi(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:s!==void 0?s:null}}function ma(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function QT(t,e,n){const i=t.canvas,s=new MutationObserver(r=>{let o=!1;for(const l of r)o=o||ma(l.addedNodes,i),o=o&&!ma(l.removedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function XT(t,e,n){const i=t.canvas,s=new MutationObserver(r=>{let o=!1;for(const l of r)o=o||ma(l.removedNodes,i),o=o&&!ma(l.addedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Jr=new Map;let Xm=0;function lv(){const t=window.devicePixelRatio;t!==Xm&&(Xm=t,Jr.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function ZT(t,e){Jr.size||window.addEventListener("resize",lv),Jr.set(t,e)}function JT(t){Jr.delete(t),Jr.size||window.removeEventListener("resize",lv)}function eI(t,e,n){const i=t.canvas,s=i&&rf(i);if(!s)return;const r=z_((l,a)=>{const c=s.clientWidth;n(l,a),c<s.clientWidth&&n()},window),o=new ResizeObserver(l=>{const a=l[0],c=a.contentRect.width,d=a.contentRect.height;c===0&&d===0||r(c,d)});return o.observe(s),ZT(t,r),o}function Vc(t,e,n){n&&n.disconnect(),e==="resize"&&JT(t)}function tI(t,e,n){const i=t.canvas,s=z_(r=>{t.ctx!==null&&n(qT(r,t))},t);return KT(i,e,s),s}class nI extends rv{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(YT(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[ml])return!1;const i=n[ml].initial;["height","width"].forEach(r=>{const o=i[r];J(o)?n.removeAttribute(r):n.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{n.style[r]=s[r]}),n.width=n.width,delete n[ml],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:QT,detach:XT,resize:eI}[n]||tI;s[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),s=i[n];if(!s)return;({attach:Vc,detach:Vc,resize:Vc}[n]||GT)(e,n,s),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,s){return tT(e,n,i,s)}isAttached(e){const n=e&&rf(e);return!!(n&&n.isConnected)}}function iI(t){return!sf()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?UT:nI}class yn{constructor(){W(this,"x");W(this,"y");W(this,"active",!1);W(this,"options");W(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return _s(this.x)&&_s(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const s={};return e.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}}W(yn,"defaults",{}),W(yn,"defaultRoutes");function sI(t,e){const n=t.options.ticks,i=rI(t),s=Math.min(n.maxTicksLimit||i,i),r=n.major.enabled?lI(e):[],o=r.length,l=r[0],a=r[o-1],c=[];if(o>s)return aI(e,c,r,o/s),c;const d=oI(r,e,s);if(o>0){let h,f;const p=o>1?Math.round((a-l)/(o-1)):null;for(qo(e,c,d,J(p)?0:l-p,l),h=0,f=o-1;h<f;h++)qo(e,c,d,r[h],r[h+1]);return qo(e,c,d,a,J(p)?e.length:a+p),c}return qo(e,c,d),c}function rI(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(i,s))}function oI(t,e,n){const i=cI(t),s=e.length/n;if(!i)return Math.max(s,1);const r=eN(i);for(let o=0,l=r.length-1;o<l;o++){const a=r[o];if(a>s)return a}return Math.max(s,1)}function lI(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function aI(t,e,n,i){let s=0,r=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===r&&(e.push(t[o]),s++,r=n[s*i])}function qo(t,e,n,i,s){const r=Y(i,0),o=Math.min(Y(s,t.length),t.length);let l=0,a,c,d;for(n=Math.ceil(n),s&&(a=s-i,n=a/Math.floor(a/n)),d=r;d<0;)l++,d=Math.round(r+l*n);for(c=Math.max(r,0);c<o;c++)c===d&&(e.push(t[c]),l++,d=Math.round(r+l*n))}function cI(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const uI=t=>t==="left"?"right":t==="right"?"left":t,Zm=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Jm=(t,e)=>Math.min(e||t,t);function eg(t,e){const n=[],i=t.length/e,s=t.length;let r=0;for(;r<s;r+=i)n.push(t[Math.floor(r)]);return n}function dI(t,e,n){const i=t.ticks.length,s=Math.min(e,i-1),r=t._startPixel,o=t._endPixel,l=1e-6;let a=t.getPixelForTick(s),c;if(!(n&&(i===1?c=Math.max(a-r,o-a):e===0?c=(t.getPixelForTick(1)-a)/2:c=(a-t.getPixelForTick(s-1))/2,a+=s<e?c:-c,a<r-l||a>o+l)))return a}function hI(t,e){X(t,n=>{const i=n.gc,s=i.length/2;let r;if(s>e){for(r=0;r<s;++r)delete n.data[i[r]];i.splice(0,s)}})}function Vs(t){return t.drawTicks?t.tickLength:0}function tg(t,e){if(!t.display)return 0;const n=$e(t.font,e),i=It(t.padding);return(Te(t.text)?t.text.length:1)*n.lineHeight+i.height}function fI(t,e){return Ai(t,{scale:e,type:"scale"})}function pI(t,e,n){return Ai(t,{tick:n,index:e,type:"tick"})}function mI(t,e,n){let i=Qh(t);return(n&&e!=="right"||!n&&e==="right")&&(i=uI(i)),i}function gI(t,e,n,i){const{top:s,left:r,bottom:o,right:l,chart:a}=t,{chartArea:c,scales:d}=a;let h=0,f,p,m;const x=o-s,v=l-r;if(t.isHorizontal()){if(p=ze(i,r,l),q(n)){const g=Object.keys(n)[0],y=n[g];m=d[g].getPixelForValue(y)+x-e}else n==="center"?m=(c.bottom+c.top)/2+x-e:m=Zm(t,n,e);f=l-r}else{if(q(n)){const g=Object.keys(n)[0],y=n[g];p=d[g].getPixelForValue(y)-v+e}else n==="center"?p=(c.left+c.right)/2-v+e:p=Zm(t,n,e);m=ze(i,o,s),h=n==="left"?-Lt:Lt}return{titleX:p,titleY:m,maxWidth:f,rotation:h}}class Is extends yn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:s}=this;return e=Ut(e,Number.POSITIVE_INFINITY),n=Ut(n,Number.NEGATIVE_INFINITY),i=Ut(i,Number.POSITIVE_INFINITY),s=Ut(s,Number.NEGATIVE_INFINITY),{min:Ut(e,i),max:Ut(n,s),minDefined:Tt(e),maxDefined:Tt(n)}}getMinMax(e){let{min:n,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:n,max:i};const l=this.getMatchingVisibleMetas();for(let a=0,c=l.length;a<c;++a)o=l[a].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),r||(i=Math.max(i,o.max));return n=r&&n>i?i:n,i=s&&n>i?n:i,{min:Ut(n,Ut(i,n)),max:Ut(i,Ut(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ce(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=PN(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=l<this.ticks.length;this._convertTicksToLabels(a?eg(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=sI(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ce(this.options.afterUpdate,[this])}beforeSetDimensions(){ce(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ce(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ce(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ce(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i],r.label=ce(n.callback,[r.value,i,e],this)}afterTickToLabelConversion(){ce(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ce(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=Jm(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,r=n.maxRotation;let o=s,l,a,c;if(!this._isVisible()||!n.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const d=this._getLabelSizes(),h=d.widest.width,f=d.highest.height,p=wt(this.chart.width-h,0,this.maxWidth);l=e.offset?this.maxWidth/i:p/(i-1),h+6>l&&(l=p/(i-(e.offset?.5:1)),a=this.maxHeight-Vs(e.grid)-n.padding-tg(e.title,this.chart.options.font),c=Math.sqrt(h*h+f*f),o=sN(Math.min(Math.asin(wt((d.highest.height+6)/l,-1,1)),Math.asin(wt(a/c,-1,1))-Math.asin(wt(f/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){ce(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ce(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const a=tg(s,n.options.font);if(l?(e.width=this.maxWidth,e.height=Vs(r)+a):(e.height=this.maxHeight,e.width=Vs(r)+a),i.display&&this.ticks.length){const{first:c,last:d,widest:h,highest:f}=this._getLabelSizes(),p=i.padding*2,m=hi(this.labelRotation),x=Math.cos(m),v=Math.sin(m);if(l){const g=i.mirror?0:v*h.width+x*f.height;e.height=Math.min(this.maxHeight,e.height+g+p)}else{const g=i.mirror?0:x*h.width+v*f.height;e.width=Math.min(this.maxWidth,e.width+g+p)}this._calculatePadding(c,d,v,x)}}this._handleMargins(),l?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,s){const{ticks:{align:r,padding:o},position:l}=this.options,a=this.labelRotation!==0,c=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;a?c?(f=s*e.width,p=i*n.height):(f=i*e.height,p=s*n.width):r==="start"?p=n.width:r==="end"?f=e.width:r!=="inner"&&(f=e.width/2,p=n.width/2),this.paddingLeft=Math.max((f-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((p-h+o)*this.width/(this.width-h),0)}else{let d=n.height/2,h=e.height/2;r==="start"?(d=0,h=e.height):r==="end"&&(d=n.height,h=0),this.paddingTop=d+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ce(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)J(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=eg(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:s,_longestTextCache:r}=this,o=[],l=[],a=Math.floor(n/Jm(n,i));let c=0,d=0,h,f,p,m,x,v,g,y,_,b,w;for(h=0;h<n;h+=a){if(m=e[h].label,x=this._resolveTickFontOptions(h),s.font=v=x.string,g=r[v]=r[v]||{data:{},gc:[]},y=x.lineHeight,_=b=0,!J(m)&&!Te(m))_=Am(s,g.data,g.gc,_,m),b=y;else if(Te(m))for(f=0,p=m.length;f<p;++f)w=m[f],!J(w)&&!Te(w)&&(_=Am(s,g.data,g.gc,_,w),b+=y);o.push(_),l.push(b),c=Math.max(_,c),d=Math.max(b,d)}hI(r,n);const k=o.indexOf(c),S=l.indexOf(d),E=j=>({width:o[j]||0,height:l[j]||0});return{first:E(0),last:E(n-1),widest:E(k),highest:E(S),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return lN(this._alignToPixels?ei(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=pI(this.getContext(),e,i))}return this.$context||(this.$context=fI(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=hi(this.labelRotation),i=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,l=r?r.widest.width+o:0,a=r?r.highest.height+o:0;return this.isHorizontal()?a*i>l*s?l/i:a/s:a*s<l*i?a/i:l/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:l}=s,a=r.offset,c=this.isHorizontal(),h=this.ticks.length+(a?1:0),f=Vs(r),p=[],m=l.setContext(this.getContext()),x=m.display?m.width:0,v=x/2,g=function(de){return ei(i,de,x)};let y,_,b,w,k,S,E,j,A,C,T,R;if(o==="top")y=g(this.bottom),S=this.bottom-f,j=y-v,C=g(e.top)+v,R=e.bottom;else if(o==="bottom")y=g(this.top),C=e.top,R=g(e.bottom)-v,S=y+v,j=this.top+f;else if(o==="left")y=g(this.right),k=this.right-f,E=y-v,A=g(e.left)+v,T=e.right;else if(o==="right")y=g(this.left),A=e.left,T=g(e.right)-v,k=y+v,E=this.left+f;else if(n==="x"){if(o==="center")y=g((e.top+e.bottom)/2+.5);else if(q(o)){const de=Object.keys(o)[0],Re=o[de];y=g(this.chart.scales[de].getPixelForValue(Re))}C=e.top,R=e.bottom,S=y+v,j=S+f}else if(n==="y"){if(o==="center")y=g((e.left+e.right)/2);else if(q(o)){const de=Object.keys(o)[0],Re=o[de];y=g(this.chart.scales[de].getPixelForValue(Re))}k=y-v,E=k-f,A=e.left,T=e.right}const F=Y(s.ticks.maxTicksLimit,h),te=Math.max(1,Math.ceil(h/F));for(_=0;_<h;_+=te){const de=this.getContext(_),Re=r.setContext(de),P=l.setContext(de),L=Re.lineWidth,z=Re.color,ne=P.dash||[],oe=P.dashOffset,Ht=Re.tickWidth,Ve=Re.tickColor,Zt=Re.tickBorderDash||[],Ye=Re.tickBorderDashOffset;b=dI(this,_,a),b!==void 0&&(w=ei(i,b,L),c?k=E=A=T=w:S=j=C=R=w,p.push({tx1:k,ty1:S,tx2:E,ty2:j,x1:A,y1:C,x2:T,y2:R,width:L,color:z,borderDash:ne,borderDashOffset:oe,tickWidth:Ht,tickColor:Ve,tickBorderDash:Zt,tickBorderDashOffset:Ye}))}return this._ticksLength=h,this._borderValue=y,p}_computeLabelItems(e){const n=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),l=this.ticks,{align:a,crossAlign:c,padding:d,mirror:h}=r,f=Vs(i.grid),p=f+d,m=h?-d:p,x=-hi(this.labelRotation),v=[];let g,y,_,b,w,k,S,E,j,A,C,T,R="middle";if(s==="top")k=this.bottom-m,S=this._getXAxisLabelAlignment();else if(s==="bottom")k=this.top+m,S=this._getXAxisLabelAlignment();else if(s==="left"){const te=this._getYAxisLabelAlignment(f);S=te.textAlign,w=te.x}else if(s==="right"){const te=this._getYAxisLabelAlignment(f);S=te.textAlign,w=te.x}else if(n==="x"){if(s==="center")k=(e.top+e.bottom)/2+p;else if(q(s)){const te=Object.keys(s)[0],de=s[te];k=this.chart.scales[te].getPixelForValue(de)+p}S=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")w=(e.left+e.right)/2-p;else if(q(s)){const te=Object.keys(s)[0],de=s[te];w=this.chart.scales[te].getPixelForValue(de)}S=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(a==="start"?R="top":a==="end"&&(R="bottom"));const F=this._getLabelSizes();for(g=0,y=l.length;g<y;++g){_=l[g],b=_.label;const te=r.setContext(this.getContext(g));E=this.getPixelForTick(g)+r.labelOffset,j=this._resolveTickFontOptions(g),A=j.lineHeight,C=Te(b)?b.length:1;const de=C/2,Re=te.color,P=te.textStrokeColor,L=te.textStrokeWidth;let z=S;o?(w=E,S==="inner"&&(g===y-1?z=this.options.reverse?"left":"right":g===0?z=this.options.reverse?"right":"left":z="center"),s==="top"?c==="near"||x!==0?T=-C*A+A/2:c==="center"?T=-F.highest.height/2-de*A+A:T=-F.highest.height+A/2:c==="near"||x!==0?T=A/2:c==="center"?T=F.highest.height/2-de*A:T=F.highest.height-C*A,h&&(T*=-1),x!==0&&!te.showLabelBackdrop&&(w+=A/2*Math.sin(x))):(k=E,T=(1-C)*A/2);let ne;if(te.showLabelBackdrop){const oe=It(te.backdropPadding),Ht=F.heights[g],Ve=F.widths[g];let Zt=T-oe.top,Ye=0-oe.left;switch(R){case"middle":Zt-=Ht/2;break;case"bottom":Zt-=Ht;break}switch(S){case"center":Ye-=Ve/2;break;case"right":Ye-=Ve;break;case"inner":g===y-1?Ye-=Ve:g>0&&(Ye-=Ve/2);break}ne={left:Ye,top:Zt,width:Ve+oe.width,height:Ht+oe.height,color:te.backdropColor}}v.push({label:b,font:j,textOffset:T,options:{rotation:x,color:Re,strokeColor:P,strokeWidth:L,textAlign:z,textBaseline:R,translation:[w,k],backdrop:ne}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-hi(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),l=e+r,a=o.widest.width;let c,d;return n==="left"?s?(d=this.right+r,i==="near"?c="left":i==="center"?(c="center",d+=a/2):(c="right",d+=a)):(d=this.right-l,i==="near"?c="right":i==="center"?(c="center",d-=a/2):(c="left",d=this.left)):n==="right"?s?(d=this.left+r,i==="near"?c="right":i==="center"?(c="center",d-=a/2):(c="left",d-=a)):(d=this.left+l,i==="near"?c="left":i==="center"?(c="center",d+=a/2):(c="right",d=this.right)):c="right",{textAlign:c,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:s,width:r,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,s,r,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(r=>r.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const l=(a,c,d)=>{!d.width||!d.color||(i.save(),i.lineWidth=d.width,i.strokeStyle=d.color,i.setLineDash(d.borderDash||[]),i.lineDashOffset=d.borderDashOffset,i.beginPath(),i.moveTo(a.x,a.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(r=0,o=s.length;r<o;++r){const a=s[r];n.drawOnChartArea&&l({x:a.x1,y:a.y1},{x:a.x2,y:a.y2},a),n.drawTicks&&l({x:a.tx1,y:a.ty1},{x:a.tx2,y:a.ty2},{color:a.tickColor,width:a.tickWidth,borderDash:a.tickBorderDash,borderDashOffset:a.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const l=s.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let c,d,h,f;this.isHorizontal()?(c=ei(e,this.left,o)-o/2,d=ei(e,this.right,l)+l/2,h=f=a):(h=ei(e,this.top,o)-o/2,f=ei(e,this.bottom,l)+l/2,c=d=a),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(c,h),n.lineTo(d,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&Zh(i,s);const r=this.getLabelItems(e);for(const o of r){const l=o.options,a=o.font,c=o.label,d=o.textOffset;Zr(i,c,0,d,a,l)}s&&Jh(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:s}}=this;if(!i.display)return;const r=$e(i.font),o=It(i.padding),l=i.align;let a=r.lineHeight/2;n==="bottom"||n==="center"||q(n)?(a+=o.bottom,Te(i.text)&&(a+=r.lineHeight*(i.text.length-1))):a+=o.top;const{titleX:c,titleY:d,maxWidth:h,rotation:f}=gI(this,a,n,l);Zr(e,i.text,0,0,r,{color:i.color,maxWidth:h,rotation:f,textAlign:mI(l,n,s),textBaseline:"middle",translation:[c,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=Y(e.grid&&e.grid.z,-1),s=Y(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Is.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=n.length;r<o;++r){const l=n[r];l[i]===this.id&&(!e||l.type===e)&&s.push(l)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return $e(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Qo{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;_I(n)&&(i=this.register(n));const s=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in s||(s[r]=e,yI(e,o,i),this.override&&_e.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,s=this.scope;i in n&&delete n[i],s&&i in _e[s]&&(delete _e[s][i],this.override&&delete Ei[i])}}function yI(t,e,n){const i=Qr(Object.create(null),[n?_e.get(n):{},_e.get(e),t.defaults]);_e.set(e,i),t.defaultRoutes&&xI(e,t.defaultRoutes),t.descriptors&&_e.describe(e,t.descriptors)}function xI(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),s=i.pop(),r=[t].concat(i).join("."),o=e[n].split("."),l=o.pop(),a=o.join(".");_e.route(r,s,a,l)})}function _I(t){return"id"in t&&"defaults"in t}class vI{constructor(){this.controllers=new Qo(os,"datasets",!0),this.elements=new Qo(yn,"elements"),this.plugins=new Qo(Object,"plugins"),this.scales=new Qo(Is,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(e,r,s):X(s,o=>{const l=i||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,n,i){const s=Gh(e);ce(i["before"+s],[],i),n[e](i),ce(i["after"+s],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return s}}var Kt=new vI;class bI{constructor(){this._init=[]}notify(e,n,i,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(r,e,n,i);return n==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,i,s){s=s||{};for(const r of e){const o=r.plugin,l=o[i],a=[n,s,r.options];if(ce(l,a,o)===!1&&s.cancelable)return!1}return!0}invalidate(){J(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,s=Y(i.options&&i.options.plugins,{}),r=wI(i);return s===!1&&!n?[]:kI(e,r,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(l=>!o.some(a=>l.plugin.id===a.plugin.id));this._notify(s(n,i),e,"stop"),this._notify(s(i,n),e,"start")}}function wI(t){const e={},n=[],i=Object.keys(Kt.plugins.items);for(let r=0;r<i.length;r++)n.push(Kt.getPlugin(i[r]));const s=t.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function SI(t,e){return!e&&t===!1?null:t===!0?{}:t}function kI(t,{plugins:e,localIds:n},i,s){const r=[],o=t.getContext();for(const l of e){const a=l.id,c=SI(i[a],s);c!==null&&r.push({plugin:l,options:CI(t.config,{plugin:l,local:n[a]},c,o)})}return r}function CI(t,{plugin:e,local:n},i,s){const r=t.pluginScopeKeys(e),o=t.getOptionScopes(i,r);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function cd(t,e){const n=_e.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function EI(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function NI(t,e){return t===e?"_index_":"_value_"}function ng(t){if(t==="x"||t==="y"||t==="r")return t}function TI(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function ud(t,...e){if(ng(t))return t;for(const n of e){const i=n.axis||TI(n.position)||t.length>1&&ng(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function ig(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function II(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return ig(t,"x",n[0])||ig(t,"y",n[0])}return{}}function MI(t,e){const n=Ei[t.type]||{scales:{}},i=e.scales||{},s=cd(t.type,e),r=Object.create(null);return Object.keys(i).forEach(o=>{const l=i[o];if(!q(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const a=ud(o,l,II(o,t),_e.scales[l.type]),c=NI(a,s),d=n.scales||{};r[o]=yr(Object.create(null),[{axis:a},l,d[a],d[c]])}),t.data.datasets.forEach(o=>{const l=o.type||t.type,a=o.indexAxis||cd(l,e),d=(Ei[l]||{}).scales||{};Object.keys(d).forEach(h=>{const f=EI(h,a),p=o[f+"AxisID"]||f;r[p]=r[p]||Object.create(null),yr(r[p],[{axis:f},i[p],d[h]])})}),Object.keys(r).forEach(o=>{const l=r[o];yr(l,[_e.scales[l.type],_e.scale])}),r}function av(t){const e=t.options||(t.options={});e.plugins=Y(e.plugins,{}),e.scales=MI(t,e)}function cv(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function AI(t){return t=t||{},t.data=cv(t.data),av(t),t}const sg=new Map,uv=new Set;function Xo(t,e){let n=sg.get(t);return n||(n=e(),sg.set(t,n),uv.add(n)),n}const Ys=(t,e,n)=>{const i=da(e,n);i!==void 0&&t.add(i)};class jI{constructor(e){this._config=AI(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=cv(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),av(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Xo(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Xo(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Xo(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return Xo(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let s=i.get(e);return(!s||n)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,n,i){const{options:s,type:r}=this,o=this._cachedScopes(e,i),l=o.get(n);if(l)return l;const a=new Set;n.forEach(d=>{e&&(a.add(e),d.forEach(h=>Ys(a,e,h))),d.forEach(h=>Ys(a,s,h)),d.forEach(h=>Ys(a,Ei[r]||{},h)),d.forEach(h=>Ys(a,_e,h)),d.forEach(h=>Ys(a,od,h))});const c=Array.from(a);return c.length===0&&c.push(Object.create(null)),uv.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Ei[n]||{},_e.datasets[n]||{},{type:n},_e,od]}resolveNamedOptions(e,n,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:l}=rg(this._resolverCache,e,s);let a=o;if(RI(o,n)){r.$shared=!1,i=Gn(i)?i():i;const c=this.createResolver(e,i,l);a=vs(o,i,c)}for(const c of n)r[c]=a[c];return r}createResolver(e,n,i=[""],s){const{resolver:r}=rg(this._resolverCache,e,i);return q(n)?vs(r,n,void 0,s):r}}function rg(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const s=n.join();let r=i.get(s);return r||(r={resolver:ef(e,n),subPrefixes:n.filter(l=>!l.toLowerCase().includes("hover"))},i.set(s,r)),r}const PI=t=>q(t)&&Object.getOwnPropertyNames(t).some(e=>Gn(t[e]));function RI(t,e){const{isScriptable:n,isIndexable:i}=K_(t);for(const s of e){const r=n(s),o=i(s),l=(o||r)&&t[s];if(r&&(Gn(l)||PI(l))||o&&Te(l))return!0}return!1}var DI="4.5.0";const OI=["top","bottom","left","right","chartArea"];function og(t,e){return t==="top"||t==="bottom"||OI.indexOf(t)===-1&&e==="x"}function lg(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function ag(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ce(n&&n.onComplete,[t],e)}function LI(t){const e=t.chart,n=e.options.animation;ce(n&&n.onProgress,[t],e)}function dv(t){return sf()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const gl={},cg=t=>{const e=dv(t);return Object.values(gl).filter(n=>n.canvas===e).pop()};function FI(t,e,n){const i=Object.keys(t);for(const s of i){const r=+s;if(r>=e){const o=t[s];delete t[s],(n>0||r>e)&&(t[r+n]=o)}}}function zI(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}var bn;let Ga=(bn=class{static register(...e){Kt.add(...e),ug()}static unregister(...e){Kt.remove(...e),ug()}constructor(e,n){const i=this.config=new jI(n),s=dv(e),r=cg(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||iI(s)),this.platform.updateConfig(i);const l=this.platform.acquireContext(s,o.aspectRatio),a=l&&l.canvas,c=a&&a.height,d=a&&a.width;if(this.id=VE(),this.ctx=l,this.canvas=a,this.width=d,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new bI,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=hN(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],gl[this.id]=this,!l||!a){console.error("Failed to create chart: can't acquire context from the given item");return}en.listen(this,"complete",ag),en.listen(this,"progress",LI),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:s,_aspectRatio:r}=this;return J(e)?n&&r?r:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Kt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Dm(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return jm(this.canvas,this.ctx),this}stop(){return en.stop(this),this}resize(e,n){en.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,r),l=i.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Dm(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),ce(i.onResize,[this,o],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};X(n,(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,s=Object.keys(i).reduce((o,l)=>(o[l]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const l=n[o],a=ud(o,l),c=a==="r",d=a==="x";return{options:l,dposition:c?"chartArea":d?"bottom":"left",dtype:c?"radialLinear":d?"category":"linear"}}))),X(r,o=>{const l=o.options,a=l.id,c=ud(a,l),d=Y(l.type,o.dtype);(l.position===void 0||og(l.position,c)!==og(o.dposition))&&(l.position=o.dposition),s[a]=!0;let h=null;if(a in i&&i[a].type===d)h=i[a];else{const f=Kt.getScale(d);h=new f({id:a,type:d,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(l,e)}),X(s,(o,l)=>{o||delete i[l]}),X(i,o=>{St.configure(this,o,o.options),St.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((s,r)=>s.index-r.index),i>n){for(let s=n;s<i;++s)this._destroyDatasetMeta(s);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(lg("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,s)=>{n.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=n.length;i<s;i++){const r=n[i];let o=this.getDatasetMeta(i);const l=r.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=l,o.indexAxis=r.indexAxis||cd(l,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const a=Kt.getController(l),{datasetElementType:c,dataElementType:d}=_e.datasets[l];Object.assign(a,{dataElementType:Kt.getElement(d),datasetElementType:c&&Kt.getElement(c)}),o.controller=new a(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){X(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,d=this.data.datasets.length;c<d;c++){const{controller:h}=this.getDatasetMeta(c),f=!s&&r.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||X(r,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(lg("z","_idx"));const{_active:l,_lastEvent:a}=this;a?this._eventHandler(a,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){X(this.scales,e=>{St.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!wm(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of n){const o=i==="_removeElements"?-r:r;FI(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=r=>new Set(e.filter(o=>o[0]===r).map((o,l)=>l+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<n;r++)if(!wm(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;St.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],X(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Gn(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(en.has(this)?this.attached&&!en.running(this)&&en.start(this):(this.draw(),ag({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let s,r;for(s=0,r=n.length;s<r;++s){const o=n[s];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i={meta:e,index:e.index,cancelable:!0},s=gT(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&Zh(n,s),e.controller.draw(),s&&Jh(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return Xr(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,s){const r=OT.modes[n];return typeof r=="function"?r(this,e,i,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let s=i.filter(r=>r&&r._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Ai(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const s=i?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,s);ha(n)?(r.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(r,{visible:i}),this.update(l=>l.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),en.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),jm(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete gl[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(r,o)=>{n.addEventListener(this,r,o),e[r]=o},s=(r,o,l)=>{r.offsetX=o,r.offsetY=l,this._eventHandler(r)};X(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(a,c)=>{n.addEventListener(this,a,c),e[a]=c},s=(a,c)=>{e[a]&&(n.removeEventListener(this,a,c),delete e[a])},r=(a,c)=>{this.canvas&&this.resize(a,c)};let o;const l=()=>{s("attach",l),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",l)},n.isAttached(this.canvas)?l():o()}unbindEvents(){X(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},X(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const s=i?"set":"remove";let r,o,l,a;for(n==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),l=0,a=e.length;l<a;++l){o=e[l];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:r,index:o})=>{const l=this.getDatasetMeta(r);if(!l)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:l.data[o],index:o}});!ca(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const s=this.options.hover,r=(a,c)=>a.filter(d=>!c.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),o=r(n,e),l=i?e:r(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:s=[],options:r}=this,o=n,l=this._getActiveElements(e,s,i,o),a=XE(e),c=zI(e,this._lastEvent,i,a);i&&(this._lastEvent=null,ce(r.onHover,[e,l,this],this),a&&ce(r.onClick,[e,l,this],this));const d=!ca(l,s);return(d||n)&&(this._active=l,this._updateHoverStyles(l,s,n)),this._lastEvent=c,d}_getActiveElements(e,n,i,s){if(e.type==="mouseout")return[];if(!i)return n;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,s)}},W(bn,"defaults",_e),W(bn,"instances",gl),W(bn,"overrides",Ei),W(bn,"registry",Kt),W(bn,"version",DI),W(bn,"getChart",cg),bn);function ug(){return X(Ga.instances,t=>t._plugins.invalidate())}function hv(t,e,n=e){t.lineCap=Y(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Y(n.borderDash,e.borderDash)),t.lineDashOffset=Y(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Y(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Y(n.borderWidth,e.borderWidth),t.strokeStyle=Y(n.borderColor,e.borderColor)}function WI(t,e,n){t.lineTo(n.x,n.y)}function BI(t){return t.stepped?SN:t.tension||t.cubicInterpolationMode==="monotone"?kN:WI}function fv(t,e,n={}){const i=t.length,{start:s=0,end:r=i-1}=n,{start:o,end:l}=e,a=Math.max(s,o),c=Math.min(r,l),d=s<o&&r<o||s>l&&r>l;return{count:i,start:a,loop:e.loop,ilen:c<a&&!d?i+c-a:c-a}}function HI(t,e,n,i){const{points:s,options:r}=e,{count:o,start:l,loop:a,ilen:c}=fv(s,n,i),d=BI(r);let{move:h=!0,reverse:f}=i||{},p,m,x;for(p=0;p<=c;++p)m=s[(l+(f?c-p:p))%o],!m.skip&&(h?(t.moveTo(m.x,m.y),h=!1):d(t,x,m,f,r.stepped),x=m);return a&&(m=s[(l+(f?c:0))%o],d(t,x,m,f,r.stepped)),!!a}function $I(t,e,n,i){const s=e.points,{count:r,start:o,ilen:l}=fv(s,n,i),{move:a=!0,reverse:c}=i||{};let d=0,h=0,f,p,m,x,v,g;const y=b=>(o+(c?l-b:b))%r,_=()=>{x!==v&&(t.lineTo(d,v),t.lineTo(d,x),t.lineTo(d,g))};for(a&&(p=s[y(0)],t.moveTo(p.x,p.y)),f=0;f<=l;++f){if(p=s[y(f)],p.skip)continue;const b=p.x,w=p.y,k=b|0;k===m?(w<x?x=w:w>v&&(v=w),d=(h*d+b)/++h):(_(),t.lineTo(b,w),m=k,h=0,x=v=w),g=w}_()}function dd(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?$I:HI}function UI(t){return t.stepped?iT:t.tension||t.cubicInterpolationMode==="monotone"?sT:li}function VI(t,e,n,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,i)&&s.closePath()),hv(t,e.options),t.stroke(s)}function YI(t,e,n,i){const{segments:s,options:r}=e,o=dd(e);for(const l of s)hv(t,r,l.style),t.beginPath(),o(t,e,l,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const KI=typeof Path2D=="function";function GI(t,e,n,i){KI&&!e.options.segment?VI(t,e,n,i):YI(t,e,n,i)}class er extends yn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;qN(this._points,i,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=hT(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,s=e[n],r=this.points,o=cT(this,{property:n,start:s,end:s});if(!o.length)return;const l=[],a=UI(i);let c,d;for(c=0,d=o.length;c<d;++c){const{start:h,end:f}=o[c],p=r[h],m=r[f];if(p===m){l.push(p);continue}const x=Math.abs((s-p[n])/(m[n]-p[n])),v=a(p,m,x,i.stepped);v[n]=e[n],l.push(v)}return l.length===1?l[0]:l}pathSegment(e,n,i){return dd(this)(e,this,n,i)}path(e,n,i){const s=this.segments,r=dd(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const l of s)o&=r(e,this,l,{start:n,end:n+i-1});return!!o}draw(e,n,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),GI(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}W(er,"id","line"),W(er,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),W(er,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),W(er,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function dg(t,e,n,i){const s=t.options,{[n]:r}=t.getProps([n],i);return Math.abs(e-r)<s.radius+s.hitRadius}class yl extends yn{constructor(n){super();W(this,"parsed");W(this,"skip");W(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,s){const r=this.options,{x:o,y:l}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(i-l,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(n,i){return dg(this,n,"x",i)}inYRange(n,i){return dg(this,n,"y",i)}getCenterPoint(n){const{x:i,y:s}=this.getProps(["x","y"],n);return{x:i,y:s}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const s=i&&n.borderWidth||0;return(i+s)*2}draw(n,i){const s=this.options;this.skip||s.radius<.1||!Xr(this,i,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,ld(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}W(yl,"id","point"),W(yl,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),W(yl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const hg=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},qI=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class fg extends yn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=ce(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,s)=>e.sort(i,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,s=$e(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:a}=hg(i,r);let c,d;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,d=this._fitRows(o,r,l,a)+10):(d=this.maxHeight,c=this._fitCols(o,s,l,a)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:l}}}=this,a=this.legendHitBoxes=[],c=this.lineWidths=[0],d=s+l;let h=e;r.textAlign="left",r.textBaseline="middle";let f=-1,p=-d;return this.legendItems.forEach((m,x)=>{const v=i+n/2+r.measureText(m.text).width;(x===0||c[c.length-1]+v+2*l>o)&&(h+=d,c[c.length-(x>0?0:1)]=0,p+=d,f++),a[x]={left:0,top:p,row:f,width:v,height:s},c[c.length-1]+=v+l}),h}_fitCols(e,n,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:l}}}=this,a=this.legendHitBoxes=[],c=this.columnSizes=[],d=o-e;let h=l,f=0,p=0,m=0,x=0;return this.legendItems.forEach((v,g)=>{const{itemWidth:y,itemHeight:_}=QI(i,n,r,v,s);g>0&&p+_+2*l>d&&(h+=f+l,c.push({width:f,height:p}),m+=f+l,x++,f=p=0),a[g]={left:m,top:p,col:x,width:y,height:_},f=Math.max(f,y),p+=_+l}),h+=f,c.push({width:f,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:s},rtl:r}}=this,o=rs(r,this.left,this.width);if(this.isHorizontal()){let l=0,a=ze(i,this.left+s,this.right-this.lineWidths[l]);for(const c of n)l!==c.row&&(l=c.row,a=ze(i,this.left+s,this.right-this.lineWidths[l])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(a),c.width),a+=c.width+s}else{let l=0,a=ze(i,this.top+e+s,this.bottom-this.columnSizes[l].height);for(const c of n)c.col!==l&&(l=c.col,a=ze(i,this.top+e+s,this.bottom-this.columnSizes[l].height)),c.top=a,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),a+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Zh(e,this),this._draw(),Jh(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:s}=this,{align:r,labels:o}=e,l=_e.color,a=rs(e.rtl,this.left,this.width),c=$e(o.font),{padding:d}=o,h=c.size,f=h/2;let p;this.drawTitle(),s.textAlign=a.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:m,boxHeight:x,itemHeight:v}=hg(o,h),g=function(k,S,E){if(isNaN(m)||m<=0||isNaN(x)||x<0)return;s.save();const j=Y(E.lineWidth,1);if(s.fillStyle=Y(E.fillStyle,l),s.lineCap=Y(E.lineCap,"butt"),s.lineDashOffset=Y(E.lineDashOffset,0),s.lineJoin=Y(E.lineJoin,"miter"),s.lineWidth=j,s.strokeStyle=Y(E.strokeStyle,l),s.setLineDash(Y(E.lineDash,[])),o.usePointStyle){const A={radius:x*Math.SQRT2/2,pointStyle:E.pointStyle,rotation:E.rotation,borderWidth:j},C=a.xPlus(k,m/2),T=S+f;V_(s,A,C,T,o.pointStyleWidth&&m)}else{const A=S+Math.max((h-x)/2,0),C=a.leftForLtr(k,m),T=br(E.borderRadius);s.beginPath(),Object.values(T).some(R=>R!==0)?ad(s,{x:C,y:A,w:m,h:x,radius:T}):s.rect(C,A,m,x),s.fill(),j!==0&&s.stroke()}s.restore()},y=function(k,S,E){Zr(s,E.text,k,S+v/2,c,{strikethrough:E.hidden,textAlign:a.textAlign(E.textAlign)})},_=this.isHorizontal(),b=this._computeTitleHeight();_?p={x:ze(r,this.left+d,this.right-i[0]),y:this.top+d+b,line:0}:p={x:this.left+d,y:ze(r,this.top+b+d,this.bottom-n[0].height),line:0},Z_(this.ctx,e.textDirection);const w=v+d;this.legendItems.forEach((k,S)=>{s.strokeStyle=k.fontColor,s.fillStyle=k.fontColor;const E=s.measureText(k.text).width,j=a.textAlign(k.textAlign||(k.textAlign=o.textAlign)),A=m+f+E;let C=p.x,T=p.y;a.setWidth(this.width),_?S>0&&C+A+d>this.right&&(T=p.y+=w,p.line++,C=p.x=ze(r,this.left+d,this.right-i[p.line])):S>0&&T+w>this.bottom&&(C=p.x=C+n[p.line].width+d,p.line++,T=p.y=ze(r,this.top+b+d,this.bottom-n[p.line].height));const R=a.x(C);if(g(R,T,k),C=fN(j,C+m+f,_?C+A:this.right,e.rtl),y(a.x(C),T,k),_)p.x+=A+d;else if(typeof k.text!="string"){const F=c.lineHeight;p.y+=pv(k,F)+d}else p.y+=w}),J_(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=$e(n.font),s=It(n.padding);if(!n.display)return;const r=rs(e.rtl,this.left,this.width),o=this.ctx,l=n.position,a=i.size/2,c=s.top+a;let d,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),d=this.top+c,h=ze(e.align,h,this.right-f);else{const m=this.columnSizes.reduce((x,v)=>Math.max(x,v.height),0);d=c+ze(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const p=ze(l,h,h+f);o.textAlign=r.textAlign(Qh(l)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,Zr(o,n.text,p,d,i)}_computeTitleHeight(){const e=this.options.title,n=$e(e.font),i=It(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,s,r;if(Zs(e,this.left,this.right)&&Zs(n,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],Zs(e,s.left,s.left+s.width)&&Zs(n,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!JI(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,r=qI(s,i);s&&!r&&ce(n.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!r&&ce(n.onHover,[e,i,this],this)}else i&&ce(n.onClick,[e,i,this],this)}}function QI(t,e,n,i,s){const r=XI(i,t,e,n),o=ZI(s,i,e.lineHeight);return{itemWidth:r,itemHeight:o}}function XI(t,e,n,i){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),e+n.size/2+i.measureText(s).width}function ZI(t,e,n){let i=t;return typeof e.text!="string"&&(i=pv(e,n)),i}function pv(t,e){const n=t.text?t.text.length:0;return e*n}function JI(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var eM={id:"legend",_element:fg,start(t,e,n){const i=t.legend=new fg({ctx:t.ctx,options:n,chart:t});St.configure(t,i,n),St.addBox(t,i)},stop(t){St.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;St.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,s=n.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(a=>{const c=a.controller.getStyle(n?0:void 0),d=It(c.borderWidth);return{text:e[a.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!a.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(l||c.borderRadius),datasetIndex:a.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class mv extends yn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=Te(i.text)?i.text.length:1;this._padding=It(i.padding);const r=s*$e(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:s,right:r,options:o}=this,l=o.align;let a=0,c,d,h;return this.isHorizontal()?(d=ze(l,i,r),h=n+e,c=r-i):(o.position==="left"?(d=i+e,h=ze(l,s,n),a=Me*-.5):(d=r-e,h=ze(l,n,s),a=Me*.5),c=s-n),{titleX:d,titleY:h,maxWidth:c,rotation:a}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=$e(n.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:a,rotation:c}=this._drawArgs(r);Zr(e,n.text,0,0,i,{color:n.color,maxWidth:a,rotation:c,textAlign:Qh(n.align),textBaseline:"middle",translation:[o,l]})}}function tM(t,e){const n=new mv({ctx:t.ctx,options:e,chart:t});St.configure(t,n,e),St.addBox(t,n),t.titleBlock=n}var nM={id:"title",_element:mv,start(t,e,n){tM(t,n)},stop(t){const e=t.titleBlock;St.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;St.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const tr={average(t){if(!t.length)return!1;let e,n,i=new Set,s=0,r=0;for(e=0,n=t.length;e<n;++e){const l=t[e].element;if(l&&l.hasValue()){const a=l.tooltipPosition();i.add(a.x),s+=a.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((l,a)=>l+a)/i.size,y:s/r}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,s=Number.POSITIVE_INFINITY,r,o,l;for(r=0,o=t.length;r<o;++r){const a=t[r].element;if(a&&a.hasValue()){const c=a.getCenterPoint(),d=rd(e,c);d<s&&(s=d,l=a)}}if(l){const a=l.tooltipPosition();n=a.x,i=a.y}return{x:n,y:i}}};function Vt(t,e){return e&&(Te(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function tn(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function iM(t,e){const{element:n,datasetIndex:i,index:s}=e,r=t.getDatasetMeta(i).controller,{label:o,value:l}=r.getLabelAndValue(s);return{chart:t,label:o,parsed:r.getParsed(s),raw:t.data.datasets[i].data[s],formattedValue:l,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:n}}function pg(t,e){const n=t.chart.ctx,{body:i,footer:s,title:r}=t,{boxWidth:o,boxHeight:l}=e,a=$e(e.bodyFont),c=$e(e.titleFont),d=$e(e.footerFont),h=r.length,f=s.length,p=i.length,m=It(e.padding);let x=m.height,v=0,g=i.reduce((b,w)=>b+w.before.length+w.lines.length+w.after.length,0);if(g+=t.beforeBody.length+t.afterBody.length,h&&(x+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),g){const b=e.displayColors?Math.max(l,a.lineHeight):a.lineHeight;x+=p*b+(g-p)*a.lineHeight+(g-1)*e.bodySpacing}f&&(x+=e.footerMarginTop+f*d.lineHeight+(f-1)*e.footerSpacing);let y=0;const _=function(b){v=Math.max(v,n.measureText(b).width+y)};return n.save(),n.font=c.string,X(t.title,_),n.font=a.string,X(t.beforeBody.concat(t.afterBody),_),y=e.displayColors?o+2+e.boxPadding:0,X(i,b=>{X(b.before,_),X(b.lines,_),X(b.after,_)}),y=0,n.font=d.string,X(t.footer,_),n.restore(),v+=m.width,{width:v,height:x}}function sM(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function rM(t,e,n,i){const{x:s,width:r}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&s+r+o>e.width||t==="right"&&s-r-o<0)return!0}function oM(t,e,n,i){const{x:s,width:r}=n,{width:o,chartArea:{left:l,right:a}}=t;let c="center";return i==="center"?c=s<=(l+a)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),rM(c,t,e,n)&&(c="center"),c}function mg(t,e,n){const i=n.yAlign||e.yAlign||sM(t,n);return{xAlign:n.xAlign||e.xAlign||oM(t,e,n,i),yAlign:i}}function lM(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function aM(t,e,n){let{y:i,height:s}=t;return e==="top"?i+=n:e==="bottom"?i-=s+n:i-=s/2,i}function gg(t,e,n,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=t,{xAlign:l,yAlign:a}=n,c=s+r,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:p}=br(o);let m=lM(e,l);const x=aM(e,a,c);return a==="center"?l==="left"?m+=c:l==="right"&&(m-=c):l==="left"?m-=Math.max(d,f)+s:l==="right"&&(m+=Math.max(h,p)+s),{x:wt(m,0,i.width-e.width),y:wt(x,0,i.height-e.height)}}function Zo(t,e,n){const i=It(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function yg(t){return Vt([],tn(t))}function cM(t,e,n){return Ai(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function xg(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const gv={beforeTitle:Jt,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Jt,beforeBody:Jt,beforeLabel:Jt,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return J(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Jt,afterBody:Jt,beforeFooter:Jt,footer:Jt,afterFooter:Jt};function Je(t,e,n,i){const s=t[e].call(n,i);return typeof s>"u"?gv[e].call(n,i):s}class hd extends yn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&n.options.animation&&i.animations,r=new tv(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=cM(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,s=Je(i,"beforeTitle",this,e),r=Je(i,"title",this,e),o=Je(i,"afterTitle",this,e);let l=[];return l=Vt(l,tn(s)),l=Vt(l,tn(r)),l=Vt(l,tn(o)),l}getBeforeBody(e,n){return yg(Je(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,s=[];return X(e,r=>{const o={before:[],lines:[],after:[]},l=xg(i,r);Vt(o.before,tn(Je(l,"beforeLabel",this,r))),Vt(o.lines,Je(l,"label",this,r)),Vt(o.after,tn(Je(l,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(e,n){return yg(Je(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,s=Je(i,"beforeFooter",this,e),r=Je(i,"footer",this,e),o=Je(i,"afterFooter",this,e);let l=[];return l=Vt(l,tn(s)),l=Vt(l,tn(r)),l=Vt(l,tn(o)),l}_createItems(e){const n=this._active,i=this.chart.data,s=[],r=[],o=[];let l=[],a,c;for(a=0,c=n.length;a<c;++a)l.push(iM(this.chart,n[a]));return e.filter&&(l=l.filter((d,h,f)=>e.filter(d,h,f,i))),e.itemSort&&(l=l.sort((d,h)=>e.itemSort(d,h,i))),X(l,d=>{const h=xg(e.callbacks,d);s.push(Je(h,"labelColor",this,d)),r.push(Je(h,"labelPointStyle",this,d)),o.push(Je(h,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=l,l}update(e,n){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const l=tr[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const a=this._size=pg(this,i),c=Object.assign({},l,a),d=mg(this.chart,i,c),h=gg(i,c,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,r={opacity:1,x:h.x,y:h.y,width:a.width,height:a.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,s){const r=this.getCaretPosition(e,i,s);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(e,n,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:l}=i,{topLeft:a,topRight:c,bottomLeft:d,bottomRight:h}=br(l),{x:f,y:p}=e,{width:m,height:x}=n;let v,g,y,_,b,w;return r==="center"?(b=p+x/2,s==="left"?(v=f,g=v-o,_=b+o,w=b-o):(v=f+m,g=v+o,_=b-o,w=b+o),y=v):(s==="left"?g=f+Math.max(a,d)+o:s==="right"?g=f+m-Math.max(c,h)-o:g=this.caretX,r==="top"?(_=p,b=_-o,v=g-o,y=g+o):(_=p+x,b=_+o,v=g+o,y=g-o),w=_),{x1:v,x2:g,x3:y,y1:_,y2:b,y3:w}}drawTitle(e,n,i){const s=this.title,r=s.length;let o,l,a;if(r){const c=rs(i.rtl,this.x,this.width);for(e.x=Zo(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=$e(i.titleFont),l=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,a=0;a<r;++a)n.fillText(s[a],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,a+1===r&&(e.y+=i.titleMarginBottom-l)}}_drawColorBox(e,n,i,s,r){const o=this.labelColors[i],l=this.labelPointStyles[i],{boxHeight:a,boxWidth:c}=r,d=$e(r.bodyFont),h=Zo(this,"left",r),f=s.x(h),p=a<d.lineHeight?(d.lineHeight-a)/2:0,m=n.y+p;if(r.usePointStyle){const x={radius:Math.min(c,a)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},v=s.leftForLtr(f,c)+c/2,g=m+a/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,ld(e,x,v,g),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,ld(e,x,v,g)}else{e.lineWidth=q(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const x=s.leftForLtr(f,c),v=s.leftForLtr(s.xPlus(f,1),c-2),g=br(o.borderRadius);Object.values(g).some(y=>y!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,ad(e,{x,y:m,w:c,h:a,radius:g}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),ad(e,{x:v,y:m+1,w:c-2,h:a-2,radius:g}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(x,m,c,a),e.strokeRect(x,m,c,a),e.fillStyle=o.backgroundColor,e.fillRect(v,m+1,c-2,a-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:l,boxHeight:a,boxWidth:c,boxPadding:d}=i,h=$e(i.bodyFont);let f=h.lineHeight,p=0;const m=rs(i.rtl,this.x,this.width),x=function(E){n.fillText(E,m.x(e.x+p),e.y+f/2),e.y+=f+r},v=m.textAlign(o);let g,y,_,b,w,k,S;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=Zo(this,v,i),n.fillStyle=i.bodyColor,X(this.beforeBody,x),p=l&&v!=="right"?o==="center"?c/2+d:c+2+d:0,b=0,k=s.length;b<k;++b){for(g=s[b],y=this.labelTextColors[b],n.fillStyle=y,X(g.before,x),_=g.lines,l&&_.length&&(this._drawColorBox(n,e,b,m,i),f=Math.max(h.lineHeight,a)),w=0,S=_.length;w<S;++w)x(_[w]),f=h.lineHeight;X(g.after,x)}p=0,f=h.lineHeight,X(this.afterBody,x),e.y-=r}drawFooter(e,n,i){const s=this.footer,r=s.length;let o,l;if(r){const a=rs(i.rtl,this.x,this.width);for(e.x=Zo(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=a.textAlign(i.footerAlign),n.textBaseline="middle",o=$e(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,l=0;l<r;++l)n.fillText(s[l],a.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,s){const{xAlign:r,yAlign:o}=this,{x:l,y:a}=e,{width:c,height:d}=i,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:m}=br(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(l+h,a),o==="top"&&this.drawCaret(e,n,i,s),n.lineTo(l+c-f,a),n.quadraticCurveTo(l+c,a,l+c,a+f),o==="center"&&r==="right"&&this.drawCaret(e,n,i,s),n.lineTo(l+c,a+d-m),n.quadraticCurveTo(l+c,a+d,l+c-m,a+d),o==="bottom"&&this.drawCaret(e,n,i,s),n.lineTo(l+p,a+d),n.quadraticCurveTo(l,a+d,l,a+d-p),o==="center"&&r==="left"&&this.drawCaret(e,n,i,s),n.lineTo(l,a+h),n.quadraticCurveTo(l,a,l+h,a),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=tr[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=pg(this,e),a=Object.assign({},o,this._size),c=mg(n,e,a),d=gg(e,a,c,n);(s._to!==d.x||r._to!==d.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=It(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(e.save(),e.globalAlpha=i,this.drawBackground(r,e,s,n),Z_(e,n.textDirection),r.y+=o.top,this.drawTitle(r,e,n),this.drawBody(r,e,n),this.drawFooter(r,e,n),J_(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,s=e.map(({datasetIndex:l,index:a})=>{const c=this.chart.getDatasetMeta(l);if(!c)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:c.data[a],index:a}}),r=!ca(i,s),o=this._positionChanged(s,n);(r||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(e,r,n,i),l=this._positionChanged(o,e),a=n||!ca(o,r)||l;return a&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),a}_getActiveElements(e,n,i,s){const r=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:s,options:r}=this,o=tr[r.position].call(this,e,n);return o!==!1&&(i!==o.x||s!==o.y)}}W(hd,"positioners",tr);var uM={id:"tooltip",_element:hd,positioners:tr,afterInit(t,e,n){n&&(t.tooltip=new hd({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:gv},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const dM=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function hM(t,e,n,i){const s=t.indexOf(e);if(s===-1)return dM(t,e,n,i);const r=t.lastIndexOf(e);return s!==r?n:s}const fM=(t,e)=>t===null?null:wt(Math.round(t),0,e);function _g(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class fd extends Is{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:s,label:r}of n)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(J(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:hM(i,e,Y(n,e),this._addedLabels),fM(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=e===0&&n===r.length-1?r:r.slice(e,n+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return _g.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}W(fd,"id","category"),W(fd,"defaults",{ticks:{callback:_g}});function pM(t,e){const n=[],{bounds:s,step:r,min:o,max:l,precision:a,count:c,maxTicks:d,maxDigits:h,includeBounds:f}=t,p=r||1,m=d-1,{min:x,max:v}=e,g=!J(o),y=!J(l),_=!J(c),b=(v-x)/(h+1);let w=km((v-x)/m/p)*p,k,S,E,j;if(w<1e-14&&!g&&!y)return[{value:x},{value:v}];j=Math.ceil(v/w)-Math.floor(x/w),j>m&&(w=km(j*w/m/p)*p),J(a)||(k=Math.pow(10,a),w=Math.ceil(w*k)/k),s==="ticks"?(S=Math.floor(x/w)*w,E=Math.ceil(v/w)*w):(S=x,E=v),g&&y&&r&&nN((l-o)/r,w/1e3)?(j=Math.round(Math.min((l-o)/w,d)),w=(l-o)/j,S=o,E=l):_?(S=g?o:S,E=y?l:E,j=c-1,w=(E-S)/j):(j=(E-S)/w,xr(j,Math.round(j),w/1e3)?j=Math.round(j):j=Math.ceil(j));const A=Math.max(Cm(w),Cm(S));k=Math.pow(10,J(a)?A:a),S=Math.round(S*k)/k,E=Math.round(E*k)/k;let C=0;for(g&&(f&&S!==o?(n.push({value:o}),S<o&&C++,xr(Math.round((S+C*w)*k)/k,o,vg(o,b,t))&&C++):S<o&&C++);C<j;++C){const T=Math.round((S+C*w)*k)/k;if(y&&T>l)break;n.push({value:T})}return y&&f&&E!==l?n.length&&xr(n[n.length-1].value,l,vg(l,b,t))?n[n.length-1].value=l:n.push({value:l}):(!y||E===l)&&n.push({value:E}),n}function vg(t,e,{horizontal:n,minRotation:i}){const s=hi(i),r=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/r,o)}class mM extends Is{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return J(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=a=>s=n?s:a,l=a=>r=i?r:a;if(e){const a=xs(s),c=xs(r);a<0&&c<0?l(0):a>0&&c>0&&o(0)}if(s===r){let a=r===0?1:Math.abs(r*.05);l(r+a),e||o(s-a)}this.min=s,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,o=pM(s,r);return e.bounds==="ticks"&&iN(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-n)/Math.max(e.length-1,1)/2;n-=s,i+=s}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return H_(e,this.chart.options.locale,this.options.ticks.format)}}class pd extends mM{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Tt(e)?e:0,this.max=Tt(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=hi(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}W(pd,"id","linear"),W(pd,"defaults",{ticks:{callback:U_.formatters.numeric}});const qa={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},tt=Object.keys(qa);function bg(t,e){return t-e}function wg(t,e){if(J(e))return null;const n=t._adapter,{parser:i,round:s,isoWeekday:r}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),Tt(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(_s(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,s)),+o)}function Sg(t,e,n,i){const s=tt.length;for(let r=tt.indexOf(t);r<s-1;++r){const o=qa[tt[r]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(l*o.size))<=i)return tt[r]}return tt[s-1]}function gM(t,e,n,i,s){for(let r=tt.length-1;r>=tt.indexOf(n);r--){const o=tt[r];if(qa[o].common&&t._adapter.diff(s,i,o)>=e-1)return o}return tt[n?tt.indexOf(n):0]}function yM(t){for(let e=tt.indexOf(t)+1,n=tt.length;e<n;++e)if(qa[tt[e]].common)return tt[e]}function kg(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:s}=qh(n,e),r=n[i]>=e?n[i]:n[s];t[r]=!0}}function xM(t,e,n,i){const s=t._adapter,r=+s.startOf(e[0].value,i),o=e[e.length-1].value;let l,a;for(l=r;l<=o;l=+s.add(l,1,i))a=n[l],a>=0&&(e[a].major=!0);return e}function Cg(t,e,n){const i=[],s={},r=e.length;let o,l;for(o=0;o<r;++o)l=e[o],s[l]=o,i.push({value:l,major:!1});return r===0||!n?i:xM(t,i,s,n)}class ga extends Is{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),s=this._adapter=new AT._date(e.adapters.date);s.init(n),yr(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:wg(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:l}=this.getUserBounds();function a(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!l&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!l)&&(a(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&a(this.getMinMax(!1))),s=Tt(s)&&!isNaN(s)?s:+n.startOf(Date.now(),i),r=Tt(r)&&!isNaN(r)?r:+n.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,l=cN(s,r,o);return this._unit=n.unit||(i.autoSkip?Sg(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):gM(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:yM(this._unit),this.initOffsets(s),e.reverse&&l.reverse(),Cg(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,s,r;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?i=r:i=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=wt(n,0,o),i=wt(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||Sg(r.minUnit,n,i,this._getLabelCapacity(n)),l=Y(s.ticks.stepSize,1),a=o==="week"?r.isoWeekday:!1,c=_s(a)||a===!0,d={};let h=n,f,p;if(c&&(h=+e.startOf(h,"isoWeek",a)),h=+e.startOf(h,c?"day":o),e.diff(i,n,o)>1e5*l)throw new Error(n+" and "+i+" are too far apart with stepSize of "+l+" "+o);const m=s.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<i;f=+e.add(f,l,o),p++)kg(d,f,m);return(f===i||s.bounds==="ticks"||p===1)&&kg(d,f,m),Object.keys(d).sort(bg).map(x=>+x)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,r=this._unit,o=n||s[r];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,s){const r=this.options,o=r.ticks.callback;if(o)return ce(o,[e,n,i],this);const l=r.time.displayFormats,a=this._unit,c=this._majorUnit,d=a&&l[a],h=c&&l[c],f=i[n],p=c&&h&&f&&f.major;return this._adapter.format(e,s||(p?h:d))}generateTickLabels(e){let n,i,s;for(n=0,i=e.length;n<i;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,s=hi(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(s),o=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:i*r+l*o,h:i*o+l*r}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,s=i[n.unit]||i.millisecond,r=this._tickFormatFunction(e,0,Cg(this,[e],this._majorUnit),s),o=this._getLabelSize(r),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,i=s.length;n<i;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const s=this.getLabels();for(n=0,i=s.length;n<i;++n)e.push(wg(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return dN(e.sort(bg))}}W(ga,"id","time"),W(ga,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Jo(t,e,n){let i=0,s=t.length-1,r,o,l,a;n?(e>=t[i].pos&&e<=t[s].pos&&({lo:i,hi:s}=fi(t,"pos",e)),{pos:r,time:l}=t[i],{pos:o,time:a}=t[s]):(e>=t[i].time&&e<=t[s].time&&({lo:i,hi:s}=fi(t,"time",e)),{time:r,pos:l}=t[i],{time:o,pos:a}=t[s]);const c=o-r;return c?l+(a-l)*(e-r)/c:l}class Eg extends ga{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Jo(n,this.min),this._tableRange=Jo(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,s=[],r=[];let o,l,a,c,d;for(o=0,l=e.length;o<l;++o)c=e[o],c>=n&&c<=i&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,l=s.length;o<l;++o)d=s[o+1],a=s[o-1],c=s[o],Math.round((d+a)/2)!==c&&r.push({time:c,pos:o/(l-1)});return r}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Jo(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return Jo(this._table,i*this._tableRange+this._minPos,!0)}}W(Eg,"id","timeseries"),W(Eg,"defaults",ga.defaults);const yv="label";function Ng(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function _M(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function xv(t,e){t.labels=e}function _v(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:yv;const i=[];t.datasets=e.map(s=>{const r=t.datasets.find(o=>o[n]===s[n]);return!r||!s.data||i.includes(r)?{...s}:(i.push(r),Object.assign(r,s),r)})}function vM(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yv;const n={labels:[],datasets:[]};return xv(n,t.labels),_v(n,t.datasets,e),n}function bM(t,e){const{height:n=150,width:i=300,redraw:s=!1,datasetIdKey:r,type:o,data:l,options:a,plugins:c=[],fallbackContent:d,updateMode:h,...f}=t,p=N.useRef(null),m=N.useRef(null),x=()=>{p.current&&(m.current=new Ga(p.current,{type:o,data:vM(l,r),options:a&&{...a},plugins:c}),Ng(e,m.current))},v=()=>{Ng(e,null),m.current&&(m.current.destroy(),m.current=null)};return N.useEffect(()=>{!s&&m.current&&a&&_M(m.current,a)},[s,a]),N.useEffect(()=>{!s&&m.current&&xv(m.current.config.data,l.labels)},[s,l.labels]),N.useEffect(()=>{!s&&m.current&&l.datasets&&_v(m.current.config.data,l.datasets,r)},[s,l.datasets]),N.useEffect(()=>{m.current&&(s?(v(),setTimeout(x)):m.current.update(h))},[s,a,l.labels,l.datasets,h]),N.useEffect(()=>{m.current&&(v(),setTimeout(x))},[o]),N.useEffect(()=>(x(),()=>v()),[]),Hg.createElement("canvas",{ref:p,role:"img",height:n,width:i,...f},d)}const wM=N.forwardRef(bM);function SM(t,e){return Ga.register(e),N.forwardRef((n,i)=>Hg.createElement(wM,{...n,ref:i,type:t}))}const Qa=SM("scatter",wr);Ga.register(fd,pd,yl,er,nM,uM,eM,pl,wr);const Xa=t=>({responsive:!0,maintainAspectRatio:!1,aspectRatio:1,plugins:{legend:{position:"top",labels:{font:{size:12},boxWidth:12}},title:{display:!0,text:t,font:{size:16}}},scales:{x:{type:"linear",title:{display:!0,text:"X [m]",font:{size:14}},min:-.6,max:12,ticks:{stepSize:.6,font:{size:12}},grid:{color:"#cccccc",lineWidth:1,drawTicks:!0}},y:{type:"linear",title:{display:!0,text:"Y [m]",font:{size:14}},min:-.6,max:7,ticks:{stepSize:.6,font:{size:12}},grid:{color:"#cccccc",lineWidth:1,drawTicks:!0}}}}),Hn=(t,e,n)=>({label:e,type:"line",data:t.map(([i,s])=>({x:i,y:s})),backgroundColor:n,borderColor:n,borderWidth:2,pointRadius:3,pointHoverRadius:5,fill:!1,tension:.3,showLine:!0}),$n=(t,e,n,i)=>({label:n,type:"scatter",data:[{x:t,y:e}],backgroundColor:i,borderColor:i,borderWidth:2,pointRadius:8,pointHoverRadius:10,showLine:!1}),Za=t=>{const e={A1:"rgba(54, 162, 235, 1)",A2:"rgba(75, 192, 192, 1)",A3:"rgba(153, 102, 255, 1)"};return Object.entries(t).map(([n,[i,s]])=>({label:`Anchor ${n}`,type:"scatter",data:[{x:i,y:s}],backgroundColor:e[n]||"rgba(201, 203, 207, 1)",borderColor:e[n]||"rgba(201, 203, 207, 1)",borderWidth:2,pointRadius:10,pointHoverRadius:12,pointStyle:"triangle",showLine:!1}))},Tg=({onFullScreen:t,isFullScreen:e})=>{var h,f;const[n,i]=N.useState(!1),[s,r]=N.useState([]),o=$h(),l=(o==null?void 0:o.tag)??[0,0],a=(o==null?void 0:o.anchors)??{};N.useEffect(()=>{o&&o.tag&&r(p=>{const m=[...p,o.tag];return m.length>100?m.slice(-100):m})},[o]);const c={datasets:[...Za(a),Hn(s,"TDOA Tag Path","rgba(255, 99, 132, 0.5)"),$n(l[0],l[1],"Current TDOA Position","rgba(255, 99, 132, 1)")]},d=Xa("Raw TDOA Localization");return u.jsxs("div",{className:`relative bg-white rounded-lg shadow-lg ${e?"p-6":"p-4"} border border-gray-200`,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[u.jsx("div",{className:"flex justify-between items-center mb-4",children:(n||e)&&u.jsx("div",{className:"absolute top-3 right-3 z-10",children:u.jsx("button",{onClick:t,className:"text-gray-600 hover:text-blue-600 transition-colors",children:e?u.jsx(Cs,{size:20}):u.jsx(Pa,{size:20})})})}),u.jsx("div",{className:"relative mx-auto w-full",children:u.jsx("div",{className:`relative ${e?"w-[850px] h-[500px]":"w-[400px] h-[300px]"} mx-auto bg-gray-50 rounded-lg`,children:u.jsx(Qa,{data:c,options:d})})}),u.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2 text-sm",children:[u.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[u.jsx("span",{className:"font-semibold",children:"X Position:"})," ",l[0].toFixed(2)," m"]}),u.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[u.jsx("span",{className:"font-semibold",children:"Y Position:"})," ",l[1].toFixed(2)," m"]}),u.jsxs("div",{className:"bg-gray-50 p-2 rounded col-span-2",children:[u.jsx("span",{className:"font-semibold",children:"TDOA Values:"})," "," ","A1-A2: ",((h=o==null?void 0:o.tdoa)==null?void 0:h.tdoa12.toFixed(3))||"0.000"," ns, A1-A3: ",((f=o==null?void 0:o.tdoa)==null?void 0:f.tdoa13.toFixed(3))||"0.000"," ns"]})]})]})},Ig=({onFullScreen:t,isFullScreen:e})=>{const[n,i]=N.useState(!1),[s,r]=N.useState([]),[o,l]=N.useState([]),a=aa(),c=(a==null?void 0:a.tag_tdoa)??[0,0],d=(a==null?void 0:a.tag_kalman)??[0,0],h=(a==null?void 0:a.anchors)??{};N.useEffect(()=>{a&&(a.tag_tdoa&&r(m=>{const x=[...m,a.tag_tdoa];return x.length>100?x.slice(-100):x}),a.tag_kalman&&l(m=>{const x=[...m,a.tag_kalman];return x.length>100?x.slice(-100):x}))},[a]);const f={datasets:[...Za(h),Hn(s,"Raw TDOA Path","rgba(255, 159, 64, 0.3)"),$n(c[0],c[1],"Raw TDOA Position","rgba(255, 159, 64, 0.8)"),Hn(o,"Kalman Filtered Path","rgba(54, 162, 235, 0.5)"),$n(d[0],d[1],"Kalman Filtered Position","rgba(54, 162, 235, 1)")]},p=Xa("TDOA with Kalman Filter");return u.jsxs("div",{className:`relative bg-white rounded-lg shadow-lg ${e?"p-6":"p-4"} border border-gray-200`,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[u.jsx("div",{className:"flex justify-between items-center mb-4",children:(n||e)&&u.jsx("div",{className:"absolute top-3 right-3 z-10",children:u.jsx("button",{onClick:t,className:"text-gray-600 hover:text-blue-600 transition-colors",children:e?u.jsx(Cs,{size:20}):u.jsx(Pa,{size:20})})})}),u.jsx("div",{className:"relative mx-auto w-full",children:u.jsx("div",{className:`relative ${e?"w-[850px] h-[500px]":"w-[400px] h-[300px]"} mx-auto bg-gray-50 rounded-lg`,children:u.jsx(Qa,{data:f,options:p})})}),u.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2 text-sm",children:[u.jsxs("div",{className:"bg-gray-100 p-2 rounded",children:[u.jsx("span",{className:"font-semibold",children:"Raw Position:"}),"(",c[0].toFixed(2),", ",c[1].toFixed(2),")"]}),u.jsxs("div",{className:"bg-gray-100 p-2 rounded",children:[u.jsx("span",{className:"font-semibold",children:"Filtered Position:"}),"(",d[0].toFixed(2),", ",d[1].toFixed(2),")"]}),u.jsxs("div",{className:"bg-blue-50 p-2 rounded col-span-2",children:[u.jsx("span",{className:"font-semibold",children:"Kalman Improvement:"}),Math.sqrt(Math.pow(c[0]-d[0],2)+Math.pow(c[1]-d[1],2)).toFixed(2)," meters"]})]})]})},Mg=({onFullScreen:t,isFullScreen:e})=>{const[n,i]=N.useState(!1),[s,r]=N.useState([]),[o,l]=N.useState([]),a=Uh(),c=(a==null?void 0:a.tag_tdoa)??[0,0],d=(a==null?void 0:a.tag_ML)??[0,0],h=(a==null?void 0:a.anchors)??{};N.useEffect(()=>{a&&(a.tag_tdoa&&r(m=>{const x=[...m,a.tag_tdoa];return x.length>100?x.slice(-100):x}),a.tag_ML&&l(m=>{const x=[...m,a.tag_ML];return x.length>100?x.slice(-100):x}))},[a]);const f={datasets:[...Za(h),Hn(s,"Raw TDOA Path","rgba(255, 159, 64, 0.3)"),$n(c[0],c[1],"Raw TDOA Position","rgba(255, 159, 64, 0.8)"),Hn(o,"ML Enhanced Path","rgba(153, 102, 255, 0.5)"),$n(d[0],d[1],"ML Enhanced Position","rgba(153, 102, 255, 1)")]},p=Xa("TDOA with Machine Learning");return u.jsxs("div",{className:`relative bg-white rounded-lg shadow-lg ${e?"p-6":"p-4"} border border-gray-200`,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[u.jsx("div",{className:"flex justify-between items-center mb-4",children:(n||e)&&u.jsx("div",{className:"absolute top-3 right-3 z-10",children:u.jsx("button",{onClick:t,className:"text-gray-600 hover:text-blue-600 transition-colors",children:e?u.jsx(Cs,{size:20}):u.jsx(Pa,{size:20})})})}),u.jsx("div",{className:"relative mx-auto w-full",children:u.jsx("div",{className:`relative ${e?"w-[850px] h-[500px]":"w-[400px] h-[300px]"} mx-auto bg-gray-50 rounded-lg`,children:u.jsx(Qa,{data:f,options:p})})}),u.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2 text-sm",children:[u.jsxs("div",{className:"bg-gray-100 p-2 rounded",children:[u.jsx("span",{className:"font-semibold",children:"Raw Position:"}),"(",c[0].toFixed(2),", ",c[1].toFixed(2),")"]}),u.jsxs("div",{className:"bg-gray-100 p-2 rounded",children:[u.jsx("span",{className:"font-semibold",children:"ML Position:"}),"(",d[0].toFixed(2),", ",d[1].toFixed(2),")"]}),u.jsxs("div",{className:"bg-purple-50 p-2 rounded col-span-2",children:[u.jsx("span",{className:"font-semibold",children:"ML Improvement:"}),Math.sqrt(Math.pow(c[0]-d[0],2)+Math.pow(c[1]-d[1],2)).toFixed(2)," meters"]})]})]})},Ag=({onFullScreen:t,isFullScreen:e})=>{const[n,i]=N.useState(!1),[s,r]=N.useState("all"),o=$h(),l=aa(),a=Uh(),c=(o==null?void 0:o.tag)??[0,0],d=(l==null?void 0:l.tag_kalman)??[0,0],h=(a==null?void 0:a.tag_ML)??[0,0],f=(o==null?void 0:o.anchors)??(l==null?void 0:l.anchors)??(a==null?void 0:a.anchors)??{},[p,m]=N.useState([]),[x,v]=N.useState([]),[g,y]=N.useState([]);N.useEffect(()=>{o!=null&&o.tag&&m(k=>{const S=[...k,o.tag];return S.length>100?S.slice(-100):S}),l!=null&&l.tag_kalman&&v(k=>{const S=[...k,l.tag_kalman];return S.length>100?S.slice(-100):S}),a!=null&&a.tag_ML&&y(k=>{const S=[...k,a.tag_ML];return S.length>100?S.slice(-100):S})},[o,l,a]);const b={datasets:(()=>{const k=[...Za(f)];return(s==="all"||s==="raw")&&k.push(Hn(p,"Raw TDOA Path","rgba(255, 99, 132, 0.5)"),$n(c[0],c[1],"Raw TDOA Position","rgba(255, 99, 132, 1)")),(s==="all"||s==="kalman")&&k.push(Hn(x,"Kalman Path","rgba(54, 162, 235, 0.5)"),$n(d[0],d[1],"Kalman Position","rgba(54, 162, 235, 1)")),(s==="all"||s==="ml")&&k.push(Hn(g,"ML Path","rgba(153, 102, 255, 0.5)"),$n(h[0],h[1],"ML Position","rgba(153, 102, 255, 1)")),k})()},w=Xa("TDOA Methods Comparison");return u.jsxs("div",{className:`relative bg-white rounded-lg shadow-lg ${e?"p-6":"p-4"} border border-gray-200`,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[u.jsx("div",{className:"flex justify-between items-center mb-4",children:(n||e)&&u.jsx("div",{className:"absolute top-3 right-3 z-10",children:u.jsx("button",{onClick:t,className:"text-gray-600 hover:text-blue-600 transition-colors",children:e?u.jsx(Cs,{size:20}):u.jsx(Pa,{size:20})})})}),u.jsx("div",{className:"mb-4",children:u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>r("all"),className:`px-3 py-1 rounded text-sm ${s==="all"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"All Methods"}),u.jsx("button",{onClick:()=>r("raw"),className:`px-3 py-1 rounded text-sm ${s==="raw"?"bg-red-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Raw TDOA"}),u.jsx("button",{onClick:()=>r("kalman"),className:`px-3 py-1 rounded text-sm ${s==="kalman"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Kalman Filter"}),u.jsx("button",{onClick:()=>r("ml"),className:`px-3 py-1 rounded text-sm ${s==="ml"?"bg-purple-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Machine Learning"})]})}),u.jsx("div",{className:"relative mx-auto w-full",children:u.jsx("div",{className:`relative ${e?"w-[850px] h-[500px]":"w-[400px] h-[300px]"} mx-auto bg-gray-50 rounded-lg`,children:u.jsx(Qa,{data:b,options:w})})}),u.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-2 text-sm",children:[u.jsxs("div",{className:"bg-red-50 p-2 rounded",children:[u.jsx("span",{className:"font-semibold",children:"Raw:"}),"(",c[0].toFixed(2),", ",c[1].toFixed(2),")"]}),u.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[u.jsx("span",{className:"font-semibold",children:"Kalman:"}),"(",d[0].toFixed(2),", ",d[1].toFixed(2),")"]}),u.jsxs("div",{className:"bg-purple-50 p-2 rounded",children:[u.jsx("span",{className:"font-semibold",children:"ML:"}),"(",h[0].toFixed(2),", ",h[1].toFixed(2),")"]})]})]})},el=({isOpen:t,onClose:e,title:n,description:i,children:s})=>t?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold text-gray-900",children:n}),u.jsx("p",{className:"text-sm text-gray-600",children:i})]}),u.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:u.jsx(Cs,{size:24})})]}),u.jsx("div",{className:"flex-1 overflow-auto p-6",children:s})]})}):null,kM=()=>{const[t,e]=N.useState(null),n=()=>e(null);return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col space-y-2",children:[u.jsx("h2",{className:"pt-4 text-2xl font-bold text-gray-900 text-center",children:"Multi Point Localization"}),u.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-4",children:u.jsx("p",{className:"text-sm text-gray-700",children:"This dashboard visualizes multi-point positioning data using Time Difference of Arrival (TDOA) technology. Compare raw TDOA data, Kalman filter enhanced data, machine learning enhanced data, and see a side-by-side comparison of all three approaches. Hover over any graph and click the maximize button to view in full screen mode."})})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsx(Tg,{onFullScreen:()=>e("rawTdoa"),isFullScreen:!1}),u.jsx(Ig,{onFullScreen:()=>e("tdoaKalman"),isFullScreen:!1}),u.jsx(Mg,{onFullScreen:()=>e("tdoaMl"),isFullScreen:!1}),u.jsx(Ag,{onFullScreen:()=>e("comparison"),isFullScreen:!1})]}),u.jsx(el,{isOpen:t==="rawTdoa",onClose:n,title:"Raw TDOA",description:"Time Difference of Arrival raw measurements from multiple anchors",children:u.jsx(Tg,{onFullScreen:n,isFullScreen:!0})}),u.jsx(el,{isOpen:t==="tdoaKalman",onClose:n,title:"TDOA with Kalman",description:"TDOA data filtered using Kalman filter for improved accuracy",children:u.jsx(Ig,{onFullScreen:n,isFullScreen:!0})}),u.jsx(el,{isOpen:t==="tdoaMl",onClose:n,title:"TDOA with ML",description:"TDOA data enhanced with machine learning algorithms",children:u.jsx(Mg,{onFullScreen:n,isFullScreen:!0})}),u.jsx(el,{isOpen:t==="comparison",onClose:n,title:"Comparison Graph",description:"Comparative analysis of all three TDOA approaches",children:u.jsx(Ag,{onFullScreen:n,isFullScreen:!0})})]})},CM=()=>{const t=[{},{},{}],e=[{name:"Ultra-Wideband",icon:Ra,description:"Low-power radio technology for precise indoor positioning"},{name:"Time Difference of Arrival",icon:Hl,description:"Localization technique based on signal arrival time differences"},{name:"Angle of Arrival",icon:Da,description:"Direction-based positioning using signal time differences"},{name:"Kalman Filtering",icon:Zy,description:"Advanced algorithm for motion tracking and noise reduction"},{name:"Machine Learning",icon:Ky,description:"ML techniques for improving positioning accuracy"},{name:"Data Visualization",icon:Yy,description:"Interactive 2D visualization of real-time location data"}],n=[{title:"Comparative Analysis of TWR, TDOA, and AOA Techniques for Indoor Localization",authors:"Johnson A., Smith J., et al.",conference:"International Symposium on Wearable Computers, 2023",link:"#"}];return u.jsxs("div",{className:"space-y-12 py-6",children:[u.jsxs("div",{className:"relative rounded-xl shadow-lg overflow-hidden mb-8",children:[u.jsx("div",{className:"absolute inset-0 animate-gradient bg-gradient-to-r from-purple-500 via-pink-100 to-blue-600 opacity-90"}),u.jsxs("div",{className:"relative container mx-auto px-6 py-16 text-center",children:[u.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-4 drop-shadow-lg",children:"About UWB Localization System"}),u.jsx("p",{className:"text-xl md:text-2xl text-white max-w-3xl mx-auto drop-shadow",children:"Pioneering next-generation indoor positioning technology with consideration for application scalability."})]})]}),u.jsx("div",{className:"bg-white rounded-xl shadow-md p-8",children:u.jsxs("div",{className:"flex items-start space-x-4 mb-6",children:[u.jsx(ch,{className:"h-8 w-8 text-blue-600 flex-shrink-0 mt-1"}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Project Overview"}),u.jsx("p",{className:"text-gray-700 mb-4",children:"The UWB Localization System is a cutting-edge research initiative focused on developing low-power, scalable indoor positioning technology using Ultra-Wideband (UWB) radio signals. Our system supports both single-point and multi-point localization."}),u.jsx("p",{className:"text-gray-700 mb-4",children:"Leveraging multiple positioning methodologies including Two-Way Ranging (TWR), Time Difference of Arrival (TDOA), and Angle of Arrival (AOA), our system provides robust performance across various scenarios. We've further enhanced accuracy and reliability through advanced signal processing techniques including Kalman filtering and machine learning algorithms."}),u.jsx("p",{className:"text-gray-700",children:"This visualization platform allows for real-time monitoring and analysis of positioning data, providing valuable insights for research and practical applications in fields ranging from robotics and automation to healthcare and smart buildings."})]})]})}),u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8",children:[u.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[u.jsx(sw,{className:"h-7 w-7 text-blue-600 mr-3"}),"Technology Stack"]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((i,s)=>u.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-100 hover:shadow-md transition-shadow",children:[u.jsxs("div",{className:"flex items-center mb-3",children:[u.jsx(i.icon,{className:"h-6 w-6 text-blue-600 mr-2"}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:i.name})]}),u.jsx("p",{className:"text-gray-700",children:i.description})]},s))})]}),u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Research Team"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map((i,s)=>u.jsxs("div",{className:"bg-gray-50 rounded-lg overflow-hidden border border-gray-100 hover:shadow-lg transition-shadow",children:[u.jsx("div",{className:"aspect-w-1 aspect-h-1",children:u.jsx("img",{src:i.image,alt:i.name,className:"object-cover w-full h-64"})}),u.jsxs("div",{className:"p-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:i.name}),u.jsx("p",{className:"text-blue-600 text-sm mb-2",children:i.role}),u.jsx("p",{className:"text-gray-700 text-sm",children:i.bio})]})]},s))})]}),u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Published Research"}),u.jsx("div",{className:"space-y-4",children:n.map((i,s)=>u.jsxs("div",{className:"border-l-4 border-blue-500 pl-4 py-2",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:i.title}),u.jsx("p",{className:"text-gray-700",children:i.authors}),u.jsx("p",{className:"text-gray-500 text-sm",children:i.conference}),u.jsx("a",{href:i.link,className:"text-blue-600 text-sm hover:underline mt-1 inline-block",children:"Read Paper "})]},s))})]})]})},EM=()=>{const[t,e]=N.useState({name:"",email:"",subject:"",message:""}),[n,i]=N.useState(null),s=a=>{const{name:c,value:d}=a.target;e(h=>({...h,[c]:d}))},r=a=>{a.preventDefault(),i({submitted:!0,success:!0,message:"Your message has been sent successfully. Our team will get back to you soon!"}),e({name:"",email:"",subject:"",message:""})},o=[{icon:Nt,title:"Visit Us",details:["University of Sri Jayewardenepura","Department of Electrical and Electronic Engineering","Faculty of Engineering"]},{icon:qy,title:"Email Us",details:["sannithy.thanupiriyan@gmail.com","tharsant884@gmail.com","jasmirooban@gmail.com"]},{icon:$l,title:"Call Us",details:["Thanupiriyan: +94 766819810","Tharsan: +94 707373748","Jasmika: +94 764389894"]}],l=["General Inquiry","Technical Support","Research Collaboration","Product Information","Career Opportunities","Other"];return u.jsxs("div",{className:"space-y-10 py-6",children:[u.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 rounded-xl shadow-lg overflow-hidden",children:u.jsxs("div",{className:"container mx-auto px-6 py-16 text-center",children:[u.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Contact Us"}),u.jsx("p",{className:"text-xl text-blue-100 max-w-3xl mx-auto",children:"Have questions about our UWB Localization System? We're here to help!"})]})}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsx("div",{className:"lg:col-span-1 space-y-6",children:o.map((a,c)=>u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow",children:[u.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[u.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:u.jsx(a.icon,{className:"h-6 w-6 text-blue-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:a.title})]}),u.jsx("div",{className:"space-y-2 pl-2 border-l-2 border-blue-200",children:a.details.map((d,h)=>u.jsx("p",{className:"text-gray-700",children:d},h))})]},c))}),u.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-md p-8",children:[u.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[u.jsx(xp,{className:"h-6 w-6 text-blue-600 mr-3"}),"Send Us a Message"]}),n&&u.jsx("div",{className:`mb-6 p-4 rounded-lg ${n.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:u.jsxs("div",{className:"flex items-start space-x-3",children:[n.success?u.jsx(tw,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}):u.jsx(Xb,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),u.jsx("p",{className:n.success?"text-green-700":"text-red-700",children:n.message})]})}),u.jsxs("form",{onSubmit:r,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Name"}),u.jsx("input",{type:"text",id:"name",name:"name",value:t.name,onChange:s,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),u.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:s,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),u.jsxs("select",{id:"subject",name:"subject",value:t.subject,onChange:s,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[u.jsx("option",{value:"",disabled:!0,children:"Select a topic"}),l.map((a,c)=>u.jsx("option",{value:a,children:a},c))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Message"}),u.jsx("textarea",{id:"message",name:"message",value:t.message,onChange:s,required:!0,rows:6,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),u.jsx("div",{className:"flex justify-end",children:u.jsxs("button",{type:"submit",className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors flex items-center",children:[u.jsx(xp,{className:"h-4 w-4 mr-2"}),"Send Message"]})})]})]})]}),u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Find Us"}),u.jsx("div",{className:"h-96 bg-gray-200 rounded-lg overflow-hidden",children:u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx(Nt,{className:"h-12 w-12 text-blue-500 mx-auto mb-3"}),u.jsx("p",{className:"text-gray-700",children:"Interactive map would be displayed here"}),u.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"University of sri Jayewardenepura, Faculty Of engineering."})]})})})]})]})};function NM(){const[t,e]=N.useState("home");N.useEffect(()=>{const i=s=>{const r=s;r.detail&&r.detail.method&&(e(r.detail.method),window.scrollTo(0,0))};return document.addEventListener("navigate",i),()=>{document.removeEventListener("navigate",i)}},[]);const n=()=>{switch(t){case"home":return u.jsx(_p,{});case"single-point":return u.jsx(wE,{});case"multi-point":return u.jsx(kM,{});case"about":return u.jsx(CM,{});case"contact":return u.jsx(EM,{});case"twr":return u.jsx(mw,{});case"tdoa":return u.jsx(gE,{});case"tdoa-kalman":return u.jsx(yE,{});case"tdoa-ml":return u.jsx(xE,{});case"aoa":return u.jsx(_E,{});default:return u.jsx(_p,{})}};return u.jsxs("div",{className:`min-h-screen flex flex-col ${t==="home"?"bg-black":"bg-gray-50"}`,children:[u.jsx(fw,{activeMethod:t,onMethodChange:e,isTransparent:t==="home"}),u.jsx("main",{className:`flex-grow ${t==="home"?"pt-0":"pt-20"}`,children:n()}),u.jsx(pw,{onMethodChange:e})]})}Vy(document.getElementById("root")).render(u.jsx(N.StrictMode,{children:u.jsx(NM,{})}));
